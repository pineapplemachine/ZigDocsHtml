<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zig Documentation</title>
    <link rel="icon" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNTMgMTQwIj48ZyBmaWxsPSIjRjdBNDFEIj48Zz48cG9seWdvbiBwb2ludHM9IjQ2LDIyIDI4LDQ0IDE5LDMwIi8+PHBvbHlnb24gcG9pbnRzPSI0NiwyMiAzMywzMyAyOCw0NCAyMiw0NCAyMiw5NSAzMSw5NSAyMCwxMDAgMTIsMTE3IDAsMTE3IDAsMjIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMzEsOTUgMTIsMTE3IDQsMTA2Ii8+PC9nPjxnPjxwb2x5Z29uIHBvaW50cz0iNTYsMjIgNjIsMzYgMzcsNDQiLz48cG9seWdvbiBwb2ludHM9IjU2LDIyIDExMSwyMiAxMTEsNDQgMzcsNDQgNTYsMzIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMTE2LDk1IDk3LDExNyA5MCwxMDQiLz48cG9seWdvbiBwb2ludHM9IjExNiw5NSAxMDAsMTA0IDk3LDExNyA0MiwxMTcgNDIsOTUiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMTUwLDAgNTIsMTE3IDMsMTQwIDEwMSwyMiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjE0MSwyMiAxNDAsNDAgMTIyLDQ1Ii8+PHBvbHlnb24gcG9pbnRzPSIxNTMsMjIgMTUzLDExNyAxMDYsMTE3IDEyMCwxMDUgMTI1LDk1IDEzMSw5NSAxMzEsNDUgMTIyLDQ1IDEzMiwzNiAxNDEsMjIiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwb2x5Z29uIHBvaW50cz0iMTI1LDk1IDEzMCwxMTAgMTA2LDExNyIvPjwvZz48L2c+PC9zdmc+">
    <style type="text/css">
      *, *::before, *::after {
        box-sizing: border-box;
      }
      body {
        font-family: system-ui, -apple-system, Roboto, "Segoe UI", sans-serif;
        font-size: 16px;
        color: #000000;
      }
      .hidden {
        display: none;
      }
      table {
        width: 100%;
      }
      a {
        color: #2A6286;
      }
      details summary {
        cursor: pointer;
      }
      pre {
        font-family: "Source Code Pro",monospace;
        font-size: 1rem;
        background-color: #F5F5F5;
        padding: 1rem;
        margin: 0;
        overflow-x: auto;
      }
      :not(pre) > code {
        white-space: break-spaces;
      }
      code, code a {
        font-family: "Source Code Pro", monospace;
        font-size: 0.9rem;
      }
      code a {
        color: #000000;
      }
      .listFields > div, .listParams > div {
        margin-bottom: 1rem;
      }
      .declHeader a {
        font-size: 0.7rem;
        padding-left: 1rem;
      }
      .declHeader .declHeaderIdentifier {
        padding-left: 0.75rem;
      }
      .fieldDocs {
        border: 1px solid #F5F5F5;
        border-top: 0px;
        padding: 1px 1rem;
      }

      #logo {
        width: 8rem;
        padding: 0.5rem 1rem;
      }

      #navWrap {
        width: -moz-available;
        width: -webkit-fill-available;
        width: stretch;
        margin-left: 11rem;
      }

      #search {
        width: 100%;
      }

      nav {
        width: 10rem;
        float: left;
      }
      nav h2 {
        font-size: 1.2rem;
        text-decoration: underline;
        margin: 0;
        padding: 0.5rem 0;
        text-align: center;
      }
      nav p {
        margin: 0;
        padding: 0;
        text-align: center;
      }
      section {
        clear: both;
        padding-top: 1rem;
      }
      section .declHeader {
        font-size: 1.3rem;
        border-bottom: 1px dashed;
        margin: 0 0;
      }
      section .sectionHeader {
        font-size: 1.3rem;
        margin: 0.5rem 0;
        padding: 0;
        border-bottom: 1px solid;
      }
      #listNav {
        list-style-type: none;
        margin: 0.5rem 0 0 0;
        padding: 0;
        overflow: hidden;
        background-color: #f1f1f1;
      }
      #listNav li {
        float:left;
      }
      #listNav li a {
        display: block;
        color: #000;
        text-align: center;
        padding: .5rem .8rem;
        text-decoration: none;
      }
      #listNav li a:hover {
        background-color: #555;
        color: #fff;
      }
      #listNav li a.active {
        background-color: #FFBB4D;
        color: #000;
      }
      .sectSource {
        margin-bottom: 2rem;
      }

      #helpDialog {
        width: 21rem;
        height: 21rem;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #333;
        color: #fff;
        border: 1px solid #fff;
      }
      #helpDialog h1 {
        text-align: center;
        font-size: 1.5rem;
      }
      #helpDialog dt, #helpDialog dd {
        display: inline;
        margin: 0 0.2rem;
      }
      kbd {
        color: #000;
        background-color: #fafbfc;
        border-color: #d1d5da;
        border-bottom-color: #c6cbd1;
        box-shadow-color: #c6cbd1;
        display: inline-block;
        padding: 0.3rem 0.2rem;
        font: 1.2rem monospace;
        line-height: 0.8rem;
        vertical-align: middle;
        border: solid 1px;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0;
        cursor: default;
      }

      #errors {
        background-color: #faa;
        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        max-height: min(20rem, 50vh);
        padding: 0.5rem;
        overflow: auto;
      }
      #errors h1 {
        font-size: 1.5rem;
      }
      #errors pre {
        background-color: #fcc;
      }
      
      .decl .decl {
        padding-left: 1rem;
        border-left: 4px solid;
        border-color: #555;
      }

      .listSearchResults li.selected {
        background-color: #93e196;
      }

      .tableFnErrors dt {
        font-weight: bold;
      }

      dl > div {
          padding: 0.5rem;
          border: 1px solid #c0c0c0;
          margin-top: 0.5rem;
      }

      td, th {
        text-align: unset;
        vertical-align: top;
        margin: 0;
        padding: 0.5rem;
        max-width: 20rem;
        text-overflow: ellipsis;
        overflow-x: hidden;
      }

      ul.columns {
        column-width: 20rem;
      }

      .tok-kw {
          color: #333;
          font-weight: bold;
      }
      .tok-str {
          color: #d14;
      }
      .tok-builtin {
          color: #0086b3;
      }
      .tok-comment {
          color: #777;
          font-style: italic;
      }
      .tok-fn {
          color: #900;
          font-weight: bold;
      }
      .tok-null {
          color: #008080;
      }
      .tok-number {
          color: #008080;
      }
      .tok-type {
          color: #458;
          font-weight: bold;
      }

      @media (prefers-color-scheme: dark) {
        body {
          background-color: #111;
          color: #bbb;
        }
        pre {
          background-color: #222;
          color: #ccc;
        }
        a {
          color: #88f;
        }
        code a {
          color: #ccc;
        }
        .fieldDocs {
          border-color:#2A2A2A;
        }
        #listNav {
          background-color: #333;
        }
        #listNav li a {
          color: #fff;
        }
        #listNav li a:hover {
          background-color: #555;
          color: #fff;
        }
        #listNav li a.active {
          background-color: #FFBB4D;
          color: #000;
        }
        .listSearchResults li.selected {
          background-color: #000;
        }
        .listSearchResults li.selected a {
          color: #fff;
        }
        #errors {
          background-color: #800;
          color: #fff;
        }
        #errors pre {
          background-color: #a00;
          color: #fff;
        }
        dl > div {
          border-color: #373737;
        }
        .tok-kw {
            color: #eee;
        }
        .tok-str {
            color: #2e5;
        }
        .tok-builtin {
            color: #ff894c;
        }
        .tok-comment {
            color: #aa7;
        }
        .tok-fn {
            color: #B1A0F8;
        }
        .tok-null {
            color: #ff8080;
        }
        .tok-number {
            color: #ff8080;
        }
        .tok-type {
            color: #68f;
        }
      }
    </style>
  </head>
  <body>
    <nav>
      <a class="logo" href="#">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 140">
        <g fill="#F7A41D">
          <g>
            <polygon points="46,22 28,44 19,30"/>
            <polygon points="46,22 33,33 28,44 22,44 22,95 31,95 20,100 12,117 0,117 0,22" shape-rendering="crispEdges"/>
            <polygon points="31,95 12,117 4,106"/>
          </g>
          <g>
            <polygon points="56,22 62,36 37,44"/>
            <polygon points="56,22 111,22 111,44 37,44 56,32" shape-rendering="crispEdges"/>
            <polygon points="116,95 97,117 90,104"/>
            <polygon points="116,95 100,104 97,117 42,117 42,95" shape-rendering="crispEdges"/>
            <polygon points="150,0 52,117 3,140 101,22"/>
          </g>
          <g>
            <polygon points="141,22 140,40 122,45"/>
            <polygon points="153,22 153,117 106,117 120,105 125,95 131,95 131,45 122,45 132,36 141,22" shape-rendering="crispEdges"/>
            <polygon points="125,95 130,110 106,117"/>
          </g>
        </g>
        <style>
        #text { fill: #121212 }
        @media (prefers-color-scheme: dark) { #text { fill: #f2f2f2 } }
        </style>
        <g id="text">
          <g>
            <polygon points="260,22 260,37 229,40 177,40 177,22" shape-rendering="crispEdges"/>
            <polygon points="260,37 207,99 207,103 176,103 229,40 229,37"/>
            <polygon points="261,99 261,117 176,117 176,103 206,99" shape-rendering="crispEdges"/>
          </g>
          <rect x="272" y="22" shape-rendering="crispEdges" width="22" height="95"/>
          <g>
            <polygon points="394,67 394,106 376,106 376,81 360,70 346,67" shape-rendering="crispEdges"/>
            <polygon points="360,68 376,81 346,67"/>
            <path d="M394,106c-10.2,7.3-24,12-37.7,12c-29,0-51.1-20.8-51.1-48.3c0-27.3,22.5-48.1,52-48.1    c14.3,0,29.2,5.5,38.9,14l-13,15c-7.1-6.3-16.8-10-25.9-10c-17,0-30.2,12.9-30.2,29.5c0,16.8,13.3,29.6,30.3,29.6    c5.7,0,12.8-2.3,19-5.5L394,106z"/>
          </g>
        </g>
        </svg>
      </a>
    </nav>
    <div id="navWrap">
      <input disabled type="search" id="search" autocomplete="off" spellcheck="false" placeholder="`s` to search, `?` to see more options">
      <div id="sectNav"><ul id="listNav"><li><a href="#" class="">std</a></li><li><a href="std.fmt.html" class="active">fmt</a></li></ul></div>
    </div>
    <section><div class="decl"><h1 id="std.fmt" class="declHeader"><span class="declHeaderCategory">struct</span><span class="declHeaderIdentifier">std.fmt</span><a href="#src.zig-std.fmt">[src]</a></h1><div class="tldDocs"><p>String formatting and parsing.</p>
</div><div class="sectNamespaces"><h2 class="sectionHeader">Namespaces</h2><ul class="listNamespaces columns"><li><a href="std.fmt.format_float.html">std.fmt.format_float</a></li></ul></div><div class="sectContainers"><h2 class="sectionHeader">Container Types</h2><ul class="listContainers columns"><li><a href="std.fmt.Alignment.html">std.fmt.Alignment</a></li><li><a href="std.fmt.FormatOptions.html">std.fmt.FormatOptions</a></li><li><a href="std.fmt.Placeholder.html">std.fmt.Placeholder</a></li><li><a href="std.fmt.Specifier.html">std.fmt.Specifier</a></li><li><a href="std.fmt.Parser.html">std.fmt.Parser</a></li><li><a href="std.fmt.ArgState.html">std.fmt.ArgState</a></li><li><a href="std.fmt.Case.html">std.fmt.Case</a></li></ul></div><div class="sectTypes"><h2 class="sectionHeader">Types</h2><div class="listTypes"><div class="decl"><h2 id="std.fmt.ArgSetType" class="declHeader"><span class="declHeaderCategory">Type</span><span class="declHeaderIdentifier">ArgSetType</span><a href="#src.zig-std.fmt.ArgSetType">[src]</a></h2><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.ArgSetType">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ArgSetType = <span class="tok-type">u32</span></code></pre></details></div></div><div class="decl"><h2 id="std.fmt.Formatter" class="declHeader"><span class="declHeaderCategory">Type Function</span><span class="declHeaderIdentifier">Formatter</span><a href="#src.zig-std.fmt.Formatter">[src]</a></h2><div class="tldDocs"><p>Creates a Formatter type from a format function. Wrapping data in Formatter(func) causes
the data to be formatted using the given function <code>func</code>.  <code>func</code> must be of the following
form:</p>
<p>fn formatExample(
data: T,
comptime fmt: []const u8,
options: std.fmt.FormatOptions,
writer: anytype,
) !void;</p>
</div><div class="sectFields"><h3 class="sectionHeader">Fields</h3><div class="listFields"><div><pre><code>data: Data</code></pre></div></div></div><div class="sectFns"><h3 class="sectionHeader">Functions</h3><div class="listFns"><div class="decl"><h3 id="std.fmt.Formatter.format" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">format</span><a href="#src.zig-std.fmt.Formatter.format">[src]</a></h3><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>( self: <span class="tok-builtin">@This</span>(), <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h4 class="sectionHeader">Parameters</h4><div class="listParams"><div><pre><code>self: <span class="tok-builtin">@This</span>()</code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h4 class="sectionHeader" id="src.zig-std.fmt.Formatter.format">Source Code</h4><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
    self: <span class="tok-builtin">@This</span>(),
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
    <span class="tok-kw">try</span> formatFn(self.data, fmt, options, writer);
}</code></pre></details></div></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.Formatter">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Formatter</span>(<span class="tok-kw">comptime</span> formatFn: <span class="tok-kw">anytype</span>) <span class="tok-type">type</span> {
    <span class="tok-kw">const</span> Data = <span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(formatFn)).@&quot;fn&quot;.params[<span class="tok-number">0</span>].<span class="tok-type">type</span>.?;
    <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {
        data: Data,
        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            self: <span class="tok-builtin">@This</span>(),
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
            <span class="tok-kw">try</span> formatFn(self.data, fmt, options, writer);
        }
    };
}</code></pre></details></div></div></div></div><div class="sectValues"><h2 class="sectionHeader">Values</h2><div class="listValues"><div class="decl"><h2 id="std.fmt.default_max_depth" class="declHeader"><span class="declHeaderCategory">Constant</span><span class="declHeaderIdentifier">default_max_depth</span><a href="#src.zig-std.fmt.default_max_depth">[src]</a></h2><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.default_max_depth">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> default_max_depth = <span class="tok-number">3</span></code></pre></details></div></div><div class="decl"><h2 id="std.fmt.hex_charset" class="declHeader"><span class="declHeaderCategory">Constant</span><span class="declHeaderIdentifier">hex_charset</span><a href="#src.zig-std.fmt.hex_charset">[src]</a></h2><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.hex_charset">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> hex_charset = <span class="tok-str">&quot;0123456789abcdef&quot;</span></code></pre></details></div></div></div></div><div class="sectErrSets"><h2 class="sectionHeader">Error Sets</h2><div class="listErrSets"><div class="decl"><h2 id="std.fmt.format_float.FormatError" class="declHeader"><span class="declHeaderCategory">Error Set</span><span class="declHeaderIdentifier">FormatError</span><a href="#src.zig-std.fmt.format_float.FormatError">[src]</a></h2><div class="sectFnErrors"><h3 class="sectionHeader">Errors</h3><div class="fnErrorsAnyError"><p><span class="tok-type">anyerror</span> means the error set is known only at runtime.</p></div><div class="tableFnErrors"><dl class="listFnErrors"><div><dt>BufferTooSmall</dt></div></dl></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format_float.FormatError">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> FormatError = <span class="tok-kw">error</span>{
    BufferTooSmall,
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.ParseIntError" class="declHeader"><span class="declHeaderCategory">Error Set</span><span class="declHeaderIdentifier">ParseIntError</span><a href="#src.zig-std.fmt.ParseIntError">[src]</a></h2><div class="sectFnErrors"><h3 class="sectionHeader">Errors</h3><div class="fnErrorsAnyError"><p><span class="tok-type">anyerror</span> means the error set is known only at runtime.</p></div><div class="tableFnErrors"><dl class="listFnErrors"><div><dt>InvalidCharacter</dt><dd><p>The input was empty or contained an invalid character</p>
</dd></div><div><dt>Overflow</dt><dd><p>The result cannot fit in the type specified</p>
</dd></div></dl></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.ParseIntError">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ParseIntError = <span class="tok-kw">error</span>{
    <span class="tok-comment">/// The result cannot fit in the type specified</span>
    Overflow,

    <span class="tok-comment">/// The input was empty or contained an invalid character</span>
    InvalidCharacter,
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.parse_float.ParseFloatError" class="declHeader"><span class="declHeaderCategory">Error Set</span><span class="declHeaderIdentifier">ParseFloatError</span><a href="#src.zig-std.fmt.parse_float.ParseFloatError">[src]</a></h2><div class="sectFnErrors"><h3 class="sectionHeader">Errors</h3><div class="fnErrorsAnyError"><p><span class="tok-type">anyerror</span> means the error set is known only at runtime.</p></div><div class="tableFnErrors"><dl class="listFnErrors"><div><dt>InvalidCharacter</dt></div></dl></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.parse_float.ParseFloatError">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> ParseFloatError = <span class="tok-kw">error</span>{
    InvalidCharacter,
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.BufPrintError" class="declHeader"><span class="declHeaderCategory">Error Set</span><span class="declHeaderIdentifier">BufPrintError</span><a href="#src.zig-std.fmt.BufPrintError">[src]</a></h2><div class="sectFnErrors"><h3 class="sectionHeader">Errors</h3><div class="fnErrorsAnyError"><p><span class="tok-type">anyerror</span> means the error set is known only at runtime.</p></div><div class="tableFnErrors"><dl class="listFnErrors"><div><dt>NoSpaceLeft</dt><dd><p>As much as possible was written to the buffer, but it was too small to fit all the printed bytes.</p>
</dd></div></dl></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.BufPrintError">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> BufPrintError = <span class="tok-kw">error</span>{
    <span class="tok-comment">/// As much as possible was written to the buffer, but it was too small to fit all the printed bytes.</span>
    NoSpaceLeft,
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.AllocPrintError" class="declHeader"><span class="declHeaderCategory">Error Set</span><span class="declHeaderIdentifier">AllocPrintError</span><a href="#src.zig-std.fmt.AllocPrintError">[src]</a></h2><div class="sectFnErrors"><h3 class="sectionHeader">Errors</h3><div class="fnErrorsAnyError"><p><span class="tok-type">anyerror</span> means the error set is known only at runtime.</p></div><div class="tableFnErrors"><dl class="listFnErrors"><div><dt>OutOfMemory</dt></div></dl></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.AllocPrintError">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">const</span> AllocPrintError = <span class="tok-kw">error</span>{OutOfMemory}</code></pre></details></div></div></div></div><div class="sectFns"><h2 class="sectionHeader">Functions</h2><div class="listFns"><div class="decl"><h2 id="std.fmt.format" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">format</span><a href="#src.zig-std.fmt.format">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>( writer: <span class="tok-kw">anytype</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="tldDocs"><p>Renders fmt string with args, calling <code>writer</code> with slices of bytes.
If <code>writer</code> returns an error, the error is returned from <code><a href="std.fmt.html#std.fmt.format">format</a></code> and
<code>writer</code> is not called again.</p>
<p>The format string must be comptime-known and may contain placeholders following
this format:
<code>{[argument][specifier]:[fill][alignment][width].[precision]}</code></p>
<p>Above, each word including its surrounding [ and ] is a parameter which you have to replace with something:</p>
<ul>
<li><em>argument</em> is either the numeric index or the field name of the argument that should be inserted<ul>
<li>when using a field name, you are required to enclose the field name (an identifier) in square
brackets, e.g. {[score]...} as opposed to the numeric index form which can be written e.g. {2...}</li>
</ul>
</li>
<li><em>specifier</em> is a type-dependent formatting option that determines how a type should formatted (see below)</li>
<li><em>fill</em> is a single unicode codepoint which is used to pad the formatted text</li>
<li><em>alignment</em> is one of the three bytes '&lt;', '^', or '&gt;' to make the text left-, center-, or right-aligned, respectively</li>
<li><em>width</em> is the total width of the field in unicode codepoints</li>
<li><em>precision</em> specifies how many decimals a formatted number should have</li>
</ul>
<p>Note that most of the parameters are optional and may be omitted. Also you can leave out separators like <code>:</code> and <code>.</code> when
all parameters after the separator are omitted.
Only exception is the <em>fill</em> parameter. If a non-zero <em>fill</em> character is required at the same time as <em>width</em> is specified,
one has to specify <em>alignment</em> as well, as otherwise the digit following <code>:</code> is interpreted as <em>width</em>, not <em>fill</em>.</p>
<p>The <em>specifier</em> has several options for types:</p>
<ul>
<li><code>x</code> and <code>X</code>: output numeric value in hexadecimal notation</li>
<li><code>s</code>:<ul>
<li>for pointer-to-many and C pointers of u8, print as a C-string using zero-termination</li>
<li>for slices of u8, print the entire slice as a string without zero-termination</li>
</ul>
</li>
<li><code>e</code>: output floating point value in scientific notation</li>
<li><code>d</code>: output numeric value in decimal notation</li>
<li><code>b</code>: output integer value in binary notation</li>
<li><code>o</code>: output integer value in octal notation</li>
<li><code>c</code>: output integer as an ASCII character. Integer type must have 8 bits at max.</li>
<li><code>u</code>: output integer as an UTF-8 sequence. Integer type must have 21 bits at max.</li>
<li><code>?</code>: output optional value as either the unwrapped value, or <code>null</code>; may be followed by a format specifier for the underlying value.</li>
<li><code>!</code>: output error union value as either the unwrapped value, or the formatted error value; may be followed by a format specifier for the underlying value.</li>
<li><code>*</code>: output the address of the value instead of the value itself.</li>
<li><code>any</code>: output a value of any type using its default format.</li>
</ul>
<p>If a formatted user type contains a function of the type</p>
<pre><code>pub fn format(value: ?, comptime fmt: []const u8, options: std.fmt.FormatOptions, writer: anytype) !void
</code></pre>
<p>with <code>?</code> being the type formatted, this function will be called instead of the default implementation.
This allows user types to be formatted in a logical manner instead of dumping all fields of the type.</p>
<p>A user type may be a <code>struct</code>, <code>vector</code>, <code>union</code> or <code>enum</code> type.</p>
<p>To print literal curly braces, escape them by writing them twice, e.g. <code>{{</code> or <code>}}</code>.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
    writer: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    args: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">const</span> ArgsType = <span class="tok-builtin">@TypeOf</span>(args);
    <span class="tok-kw">const</span> args_type_info = <span class="tok-builtin">@typeInfo</span>(ArgsType);
    <span class="tok-kw">if</span> (args_type_info != .@&quot;struct&quot;) {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;expected tuple or struct argument, found &quot;</span> ++ <span class="tok-builtin">@typeName</span>(ArgsType));
    }

    <span class="tok-kw">const</span> fields_info = args_type_info.@&quot;struct&quot;.fields;
    <span class="tok-kw">if</span> (fields_info.len &gt; <a href="std.fmt.html#std.fmt.max_format_args">max_format_args</a>) {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;32 arguments max are supported per format call&quot;</span>);
    }

    <span class="tok-builtin">@setEvalBranchQuota</span>(<span class="tok-number">2000000</span>);
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> arg_state: <a href="std.fmt.ArgState.html">ArgState</a> = .{ .args_len = fields_info.len };
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> i = <span class="tok-number">0</span>;
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> literal: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;&quot;</span>;
    <span class="tok-kw">inline</span> <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {
        <span class="tok-kw">const</span> start_index = i;

        <span class="tok-kw">inline</span> <span class="tok-kw">while</span> (i &lt; fmt.len) : (i += <span class="tok-number">1</span>) {
            <span class="tok-kw">switch</span> (fmt[i]) {
                <span class="tok-str">'{'</span>, <span class="tok-str">'}'</span> =&gt; <span class="tok-kw">break</span>,
                <span class="tok-kw">else</span> =&gt; {},
            }
        }

        <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> end_index = i;
        <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> unescape_brace = <span class="tok-null">false</span>;<span class="tok-comment">

        // Handle {{ and }}, those are un-escaped as single braces
        </span><span class="tok-kw">if</span> (i + <span class="tok-number">1</span> &lt; fmt.len <span class="tok-kw">and</span> fmt[i + <span class="tok-number">1</span>] == fmt[i]) {
            unescape_brace = <span class="tok-null">true</span>;<span class="tok-comment">
            // Make the first brace part of the literal...
            </span>end_index += <span class="tok-number">1</span>;<span class="tok-comment">
            // ...and skip both
            </span>i += <span class="tok-number">2</span>;
        }

        literal = literal ++ fmt[start_index..end_index];<span class="tok-comment">

        // We've already skipped the other brace, restart the loop
        </span><span class="tok-kw">if</span> (unescape_brace) <span class="tok-kw">continue</span>;<span class="tok-comment">

        // Write out the literal
        </span><span class="tok-kw">if</span> (literal.len != <span class="tok-number">0</span>) {
            <span class="tok-kw">try</span> writer.writeAll(literal);
            literal = <span class="tok-str">&quot;&quot;</span>;
        }

        <span class="tok-kw">if</span> (i &gt;= fmt.len) <span class="tok-kw">break</span>;

        <span class="tok-kw">if</span> (fmt[i] == <span class="tok-str">'}'</span>) {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;missing opening {&quot;</span>);
        }<span class="tok-comment">

        // Get past the {
        </span><span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(fmt[i] == <span class="tok-str">'{'</span>);
        i += <span class="tok-number">1</span>;

        <span class="tok-kw">const</span> fmt_begin = i;<span class="tok-comment">
        // Find the closing brace
        </span><span class="tok-kw">inline</span> <span class="tok-kw">while</span> (i &lt; fmt.len <span class="tok-kw">and</span> fmt[i] != <span class="tok-str">'}'</span>) : (i += <span class="tok-number">1</span>) {}
        <span class="tok-kw">const</span> fmt_end = i;

        <span class="tok-kw">if</span> (i &gt;= fmt.len) {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;missing closing }&quot;</span>);
        }<span class="tok-comment">

        // Get past the }
        </span><span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(fmt[i] == <span class="tok-str">'}'</span>);
        i += <span class="tok-number">1</span>;

        <span class="tok-kw">const</span> placeholder = <span class="tok-kw">comptime</span> <a href="std.fmt.Placeholder.html">Placeholder</a>.<a href="std.fmt.Placeholder.html#std.fmt.Placeholder.parse">parse</a>(fmt[fmt_begin..fmt_end].*);
        <span class="tok-kw">const</span> arg_pos = <span class="tok-kw">comptime</span> <span class="tok-kw">switch</span> (placeholder.arg) {
            .none =&gt; <span class="tok-null">null</span>,
            .number =&gt; |pos| pos,
            .named =&gt; |arg_name| <a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.fieldIndex">fieldIndex</a>(ArgsType, arg_name) <span class="tok-kw">orelse</span>
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;no argument with name '&quot;</span> ++ arg_name ++ <span class="tok-str">&quot;'&quot;</span>),
        };

        <span class="tok-kw">const</span> width = <span class="tok-kw">switch</span> (placeholder.width) {
            .none =&gt; <span class="tok-null">null</span>,
            .number =&gt; |v| v,
            .named =&gt; |arg_name| blk: {
                <span class="tok-kw">const</span> arg_i = <span class="tok-kw">comptime</span> <a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.fieldIndex">fieldIndex</a>(ArgsType, arg_name) <span class="tok-kw">orelse</span>
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;no argument with name '&quot;</span> ++ arg_name ++ <span class="tok-str">&quot;'&quot;</span>);
                _ = <span class="tok-kw">comptime</span> arg_state.nextArg(arg_i) <span class="tok-kw">orelse</span> <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;too few arguments&quot;</span>);
                <span class="tok-kw">break</span> :blk <span class="tok-builtin">@field</span>(args, arg_name);
            },
        };

        <span class="tok-kw">const</span> precision = <span class="tok-kw">switch</span> (placeholder.precision) {
            .none =&gt; <span class="tok-null">null</span>,
            .number =&gt; |v| v,
            .named =&gt; |arg_name| blk: {
                <span class="tok-kw">const</span> arg_i = <span class="tok-kw">comptime</span> <a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.fieldIndex">fieldIndex</a>(ArgsType, arg_name) <span class="tok-kw">orelse</span>
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;no argument with name '&quot;</span> ++ arg_name ++ <span class="tok-str">&quot;'&quot;</span>);
                _ = <span class="tok-kw">comptime</span> arg_state.nextArg(arg_i) <span class="tok-kw">orelse</span> <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;too few arguments&quot;</span>);
                <span class="tok-kw">break</span> :blk <span class="tok-builtin">@field</span>(args, arg_name);
            },
        };

        <span class="tok-kw">const</span> arg_to_print = <span class="tok-kw">comptime</span> arg_state.nextArg(arg_pos) <span class="tok-kw">orelse</span>
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;too few arguments&quot;</span>);

        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(
            <span class="tok-builtin">@field</span>(args, fields_info[arg_to_print].name),
            placeholder.specifier_arg,
            <a href="std.fmt.FormatOptions.html">FormatOptions</a>{
                .fill = placeholder.fill,
                .alignment = placeholder.alignment,
                .width = width,
                .precision = precision,
            },
            writer,
            <a href="std.html">std</a>.<a href="std.html#std.options">options</a>.<a href="#">fmt_max_depth</a>,
        );
    }

    <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> arg_state.hasUnusedArgs()) {
        <span class="tok-kw">const</span> missing_count = arg_state.args_len - <span class="tok-builtin">@popCount</span>(arg_state.used_args);
        <span class="tok-kw">switch</span> (missing_count) {
            <span class="tok-number">0</span> =&gt; <span class="tok-kw">unreachable</span>,
            <span class="tok-number">1</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unused argument in '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>),
            <span class="tok-kw">else</span> =&gt; <span class="tok-builtin">@compileError</span>(<a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d}&quot;</span>, .{missing_count}) ++ <span class="tok-str">&quot; unused arguments in '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>),
        }
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatAddress" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatAddress</span><a href="#src.zig-std.fmt.formatAddress">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatAddress</span>(value: <span class="tok-kw">anytype</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatAddress">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatAddress</span>(value: <span class="tok-kw">anytype</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
    _ = options;
    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);

    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .pointer =&gt; |info| {
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(info.child) ++ <span class="tok-str">&quot;@&quot;</span>);
            <span class="tok-kw">if</span> (info.size == .slice)
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(<span class="tok-builtin">@intFromPtr</span>(value.ptr), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, writer)
            <span class="tok-kw">else</span>
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(<span class="tok-builtin">@intFromPtr</span>(value), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, writer);
            <span class="tok-kw">return</span>;
        },
        .optional =&gt; |info| {
            <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(info.child) == .pointer) {
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(info.child) ++ <span class="tok-str">&quot;@&quot;</span>);
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(<span class="tok-builtin">@intFromPtr</span>(value), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, writer);
                <span class="tok-kw">return</span>;
            }
        },
        <span class="tok-kw">else</span> =&gt; {},
    }

    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format non-pointer type &quot;</span> ++ <span class="tok-builtin">@typeName</span>(T) ++ <span class="tok-str">&quot; with * specifier&quot;</span>);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.defaultSpec" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">defaultSpec</span><a href="#src.zig-std.fmt.defaultSpec">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">defaultSpec</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>) [:<span class="tok-number">0</span>]<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>T: <span class="tok-type">type</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.defaultSpec">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">defaultSpec</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>) [:<span class="tok-number">0</span>]<span class="tok-kw">const</span> <span class="tok-type">u8</span> {
    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .array, .vector =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.ANY">ANY</a>,
        .pointer =&gt; |ptr_info| <span class="tok-kw">switch</span> (ptr_info.size) {
            .one =&gt; <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(ptr_info.child)) {
                .array =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.ANY">ANY</a>,
                <span class="tok-kw">else</span> =&gt; {},
            },
            .many, .c =&gt; <span class="tok-kw">return</span> <span class="tok-str">&quot;*&quot;</span>,
            .slice =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.ANY">ANY</a>,
        },
        .optional =&gt; |info| <span class="tok-kw">return</span> <span class="tok-str">&quot;?&quot;</span> ++ <a href="std.fmt.html#std.fmt.defaultSpec">defaultSpec</a>(info.child),
        .error_union =&gt; |info| <span class="tok-kw">return</span> <span class="tok-str">&quot;!&quot;</span> ++ <a href="std.fmt.html#std.fmt.defaultSpec">defaultSpec</a>(info.payload),
        <span class="tok-kw">else</span> =&gt; {},
    }
    <span class="tok-kw">return</span> <span class="tok-str">&quot;&quot;</span>;
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.invalidFmtError" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">invalidFmtError</span><a href="#src.zig-std.fmt.invalidFmtError">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">invalidFmtError</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>) <span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.invalidFmtError">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">invalidFmtError</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>) <span class="tok-type">void</span> {
    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;invalid format string '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;' for type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(<span class="tok-builtin">@TypeOf</span>(value)) ++ <span class="tok-str">&quot;'&quot;</span>);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatType" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatType</span><a href="#src.zig-std.fmt.formatType">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatType</span>( value: <span class="tok-kw">anytype</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, max_depth: <span class="tok-type">usize</span>, ) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div><div><pre><code>max_depth: <span class="tok-type">usize</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatType">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatType</span>(
    value: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
    max_depth: <span class="tok-type">usize</span>,
) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);
    <span class="tok-kw">const</span> actual_fmt = <span class="tok-kw">comptime</span> <span class="tok-kw">if</span> (<a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <a href="std.fmt.html#std.fmt.ANY">ANY</a>))
        <a href="std.fmt.html#std.fmt.defaultSpec">defaultSpec</a>(T)
    <span class="tok-kw">else</span> <span class="tok-kw">if</span> (fmt.len != <span class="tok-number">0</span> <span class="tok-kw">and</span> (fmt[<span class="tok-number">0</span>] == <span class="tok-str">'?'</span> <span class="tok-kw">or</span> fmt[<span class="tok-number">0</span>] == <span class="tok-str">'!'</span>)) <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .optional, .error_union =&gt; fmt,
        <span class="tok-kw">else</span> =&gt; <a href="std.fmt.html#std.fmt.stripOptionalOrErrorUnionSpec">stripOptionalOrErrorUnionSpec</a>(fmt),
    } <span class="tok-kw">else</span> fmt;

    <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, actual_fmt, <span class="tok-str">&quot;*&quot;</span>)) {
        <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatAddress">formatAddress</a>(value, options, writer);
    }

    <span class="tok-kw">if</span> (<a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.hasMethod">hasMethod</a>(T, <span class="tok-str">&quot;format&quot;</span>)) {
        <span class="tok-kw">return</span> <span class="tok-kw">try</span> value.format(actual_fmt, options, writer);
    }

    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .<span class="tok-type">comptime_int</span>, .int, .<span class="tok-type">comptime_float</span>, .float =&gt; {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatValue">formatValue</a>(value, actual_fmt, options, writer);
        },
        .<span class="tok-type">void</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;void&quot;</span>, options, writer);
        },
        .<span class="tok-type">bool</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-kw">if</span> (value) <span class="tok-str">&quot;true&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;false&quot;</span>, options, writer);
        },
        .optional =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> actual_fmt[<span class="tok-number">0</span>] != <span class="tok-str">'?'</span>)
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format optional without a specifier (i.e. {?} or {any})&quot;</span>);
            <span class="tok-kw">const</span> remaining_fmt = <span class="tok-kw">comptime</span> <a href="std.fmt.html#std.fmt.stripOptionalOrErrorUnionSpec">stripOptionalOrErrorUnionSpec</a>(actual_fmt);
            <span class="tok-kw">if</span> (value) |payload| {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(payload, remaining_fmt, options, writer, max_depth);
            } <span class="tok-kw">else</span> {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;null&quot;</span>, options, writer);
            }
        },
        .error_union =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> actual_fmt[<span class="tok-number">0</span>] != <span class="tok-str">'!'</span>)
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format error union without a specifier (i.e. {!} or {any})&quot;</span>);
            <span class="tok-kw">const</span> remaining_fmt = <span class="tok-kw">comptime</span> <a href="std.fmt.html#std.fmt.stripOptionalOrErrorUnionSpec">stripOptionalOrErrorUnionSpec</a>(actual_fmt);
            <span class="tok-kw">if</span> (value) |payload| {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(payload, remaining_fmt, options, writer, max_depth);
            } <span class="tok-kw">else</span> |err| {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(err, <span class="tok-str">&quot;&quot;</span>, options, writer, max_depth);
            }
        },
        .error_set =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;error.&quot;</span>);
            <span class="tok-kw">return</span> writer.writeAll(<span class="tok-builtin">@errorName</span>(value));
        },
        .@&quot;enum&quot; =&gt; |enumInfo| {
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(T));
            <span class="tok-kw">if</span> (enumInfo.is_exhaustive) {
                <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@tagName</span>(value));
                <span class="tok-kw">return</span>;
            }<span class="tok-comment">

            // Use @tagName only if value is one of known fields
            </span><span class="tok-builtin">@setEvalBranchQuota</span>(<span class="tok-number">3</span> * enumInfo.fields.len);
            <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (enumInfo.fields) |enumField| {
                <span class="tok-kw">if</span> (<span class="tok-builtin">@intFromEnum</span>(value) == enumField.value) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@tagName</span>(value));
                    <span class="tok-kw">return</span>;
                }
            }

            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;(&quot;</span>);
            <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@intFromEnum</span>(value), actual_fmt, options, writer, max_depth);
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;)&quot;</span>);
        },
        .@&quot;union&quot; =&gt; |info| {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(T));
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">if</span> (info.tag_type) |UnionTagType| {
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ .&quot;</span>);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@tagName</span>(<span class="tok-builtin">@as</span>(UnionTagType, value)));
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; = &quot;</span>);
                <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (info.fields) |u_field| {
                    <span class="tok-kw">if</span> (value == <span class="tok-builtin">@field</span>(UnionTagType, u_field.name)) {
                        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@field</span>(value, u_field.name), <a href="std.fmt.html#std.fmt.ANY">ANY</a>, options, writer, max_depth - <span class="tok-number">1</span>);
                    }
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
            } <span class="tok-kw">else</span> {
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;@{x}&quot;</span>, .{<span class="tok-builtin">@intFromPtr</span>(&amp;value)});
            }
        },
        .@&quot;struct&quot; =&gt; |info| {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">if</span> (info.is_tuple) {<span class="tok-comment">
                // Skip the type and field names when formatting tuples.
                </span><span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                    <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{&quot;</span>);
                <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (info.fields, <span class="tok-number">0</span>..) |f, i| {
                    <span class="tok-kw">if</span> (i == <span class="tok-number">0</span>) {
                        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; &quot;</span>);
                    } <span class="tok-kw">else</span> {
                        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                    }
                    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@field</span>(value, f.name), <a href="std.fmt.html#std.fmt.ANY">ANY</a>, options, writer, max_depth - <span class="tok-number">1</span>);
                }
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(T));
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{&quot;</span>);
            <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (info.fields, <span class="tok-number">0</span>..) |f, i| {
                <span class="tok-kw">if</span> (i == <span class="tok-number">0</span>) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; .&quot;</span>);
                } <span class="tok-kw">else</span> {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, .&quot;</span>);
                }
                <span class="tok-kw">try</span> writer.writeAll(f.name);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; = &quot;</span>);
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@field</span>(value, f.name), <a href="std.fmt.html#std.fmt.ANY">ANY</a>, options, writer, max_depth - <span class="tok-number">1</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
        },
        .pointer =&gt; |ptr_info| <span class="tok-kw">switch</span> (ptr_info.size) {
            .one =&gt; <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(ptr_info.child)) {
                .array, .@&quot;enum&quot;, .@&quot;union&quot;, .@&quot;struct&quot; =&gt; {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(value.*, actual_fmt, options, writer, max_depth);
                },
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;{s}@{x}&quot;</span>, .{ <span class="tok-builtin">@typeName</span>(ptr_info.child), <span class="tok-builtin">@intFromPtr</span>(value) }),
            },
            .many, .c =&gt; {
                <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span>)
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format pointer without a specifier (i.e. {s} or {*})&quot;</span>);
                <span class="tok-kw">if</span> (ptr_info.sentinel() != <span class="tok-null">null</span>) {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.span">span</a>(value), actual_fmt, options, writer, max_depth);
                }
                <span class="tok-kw">if</span> (actual_fmt[<span class="tok-number">0</span>] == <span class="tok-str">'s'</span> <span class="tok-kw">and</span> ptr_info.child == <span class="tok-type">u8</span>) {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.span">span</a>(value), options, writer);
                }
                <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            },
            .slice =&gt; {
                <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span>)
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format slice without a specifier (i.e. {s} or {any})&quot;</span>);
                <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                    <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
                }
                <span class="tok-kw">if</span> (actual_fmt[<span class="tok-number">0</span>] == <span class="tok-str">'s'</span> <span class="tok-kw">and</span> ptr_info.child == <span class="tok-type">u8</span>) {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(value, options, writer);
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ &quot;</span>);
                <span class="tok-kw">for</span> (value, <span class="tok-number">0</span>..) |elem, i| {
                    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(elem, actual_fmt, options, writer, max_depth - <span class="tok-number">1</span>);
                    <span class="tok-kw">if</span> (i != value.len - <span class="tok-number">1</span>) {
                        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                    }
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
            },
        },
        .array =&gt; |info| {
            <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span>)
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format array without a specifier (i.e. {s} or {any})&quot;</span>);
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">if</span> (actual_fmt[<span class="tok-number">0</span>] == <span class="tok-str">'s'</span> <span class="tok-kw">and</span> info.child == <span class="tok-type">u8</span>) {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(&amp;value, options, writer);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ &quot;</span>);
            <span class="tok-kw">for</span> (value, <span class="tok-number">0</span>..) |elem, i| {
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(elem, actual_fmt, options, writer, max_depth - <span class="tok-number">1</span>);
                <span class="tok-kw">if</span> (i &lt; value.len - <span class="tok-number">1</span>) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                }
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
        },
        .vector =&gt; |info| {
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ &quot;</span>);
            <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
            <span class="tok-kw">while</span> (i &lt; info.len) : (i += <span class="tok-number">1</span>) {
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(value[i], actual_fmt, options, writer, max_depth - <span class="tok-number">1</span>);
                <span class="tok-kw">if</span> (i &lt; info.len - <span class="tok-number">1</span>) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                }
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
        },
        .@&quot;fn&quot; =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unable to format function body type, use '*const &quot;</span> ++ <span class="tok-builtin">@typeName</span>(T) ++ <span class="tok-str">&quot;' for a function pointer type&quot;</span>),
        .<span class="tok-type">type</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-builtin">@typeName</span>(value), options, writer);
        },
        .enum_literal =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">const</span> buffer = [_]<span class="tok-type">u8</span>{<span class="tok-str">'.'</span>} ++ <span class="tok-builtin">@tagName</span>(value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buffer, options, writer);
        },
        .<span class="tok-null">null</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;null&quot;</span>, options, writer);
        },
        <span class="tok-kw">else</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unable to format type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(T) ++ <span class="tok-str">&quot;'&quot;</span>),
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatIntValue" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatIntValue</span><a href="#src.zig-std.fmt.formatIntValue">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatIntValue</span>( value: <span class="tok-kw">anytype</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatIntValue">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatIntValue</span>(
    value: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> base = <span class="tok-number">10</span>;
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> case: <a href="std.fmt.Case.html">Case</a> = .lower;

    <span class="tok-kw">const</span> int_value = <span class="tok-kw">if</span> (<span class="tok-builtin">@TypeOf</span>(value) == <span class="tok-type">comptime_int</span>) blk: {
        <span class="tok-kw">const</span> Int = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.IntFittingRange">IntFittingRange</a>(value, value);
        <span class="tok-kw">break</span> :blk <span class="tok-builtin">@as</span>(Int, value);
    } <span class="tok-kw">else</span> value;

    <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> <span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;d&quot;</span>)) {
        base = <span class="tok-number">10</span>;
        case = .lower;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;c&quot;</span>)) {
        <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(int_value)).int.bits &lt;= <span class="tok-number">8</span>) {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatAsciiChar">formatAsciiChar</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, int_value), options, writer);
        } <span class="tok-kw">else</span> {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot print integer that is larger than 8 bits as an ASCII character&quot;</span>);
        }
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;u&quot;</span>)) {
        <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(int_value)).int.bits &lt;= <span class="tok-number">21</span>) {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatUnicodeCodepoint">formatUnicodeCodepoint</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u21</span>, int_value), options, writer);
        } <span class="tok-kw">else</span> {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot print integer that is larger than 21 bits as an UTF-8 sequence&quot;</span>);
        }
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;b&quot;</span>)) {
        base = <span class="tok-number">2</span>;
        case = .lower;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;x&quot;</span>)) {
        base = <span class="tok-number">16</span>;
        case = .lower;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;X&quot;</span>)) {
        base = <span class="tok-number">16</span>;
        case = .upper;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;o&quot;</span>)) {
        base = <span class="tok-number">8</span>;
        case = .lower;
    } <span class="tok-kw">else</span> {
        <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
    }

    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(int_value, base, case, options, writer);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.format_float.formatFloat" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatFloat</span><a href="#src.zig-std.fmt.format_float.formatFloat">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatFloat</span>(buf: []<span class="tok-type">u8</span>, v_: <span class="tok-kw">anytype</span>, options: <a href="std.fmt.format_float.FormatOptions.html">FormatOptions</a>) <a href="std.fmt.format_float.html#std.fmt.format_float.FormatError">FormatError</a>![]<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div class="tldDocs"><p>Format a floating-point value and write it to buffer. Returns a slice to the buffer containing
the string representation.</p>
<p>Full precision is the default. Any full precision float can be reparsed with std.fmt.parseFloat
unambiguously.</p>
<p>Scientific mode is recommended generally as the output is more compact and any type can be
written in full precision using a buffer of only <code><a href="std.fmt.format_float.html#std.fmt.format_float.min_buffer_size">min_buffer_size</a></code>.</p>
<p>When printing full precision decimals, use <code><a href="std.fmt.format_float.html#std.fmt.format_float.bufferSize">bufferSize</a></code> to get the required space. It is
recommended to bound decimal output with a fixed precision to reduce the required buffer size.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>buf: []<span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.format_float.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format_float.formatFloat">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatFloat</span>(buf: []<span class="tok-type">u8</span>, v_: <span class="tok-kw">anytype</span>, options: <a href="std.fmt.format_float.FormatOptions.html">FormatOptions</a>) <a href="std.fmt.format_float.html#std.fmt.format_float.FormatError">FormatError</a>![]<span class="tok-kw">const</span> <span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> v = <span class="tok-kw">switch</span> (<span class="tok-builtin">@TypeOf</span>(v_)) {<span class="tok-comment">
        // comptime_float internally is a f128; this preserves precision.
        </span><span class="tok-type">comptime_float</span> =&gt; <span class="tok-builtin">@as</span>(<span class="tok-type">f128</span>, v_),
        <span class="tok-kw">else</span> =&gt; v_,
    };

    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(v);
    <span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.debug.html">debug</a>.<a href="std.debug.html#std.debug.assert">assert</a>(<span class="tok-builtin">@typeInfo</span>(T) == .float);
    <span class="tok-kw">const</span> I = <span class="tok-builtin">@Type</span>(.{ .int = .{ .signedness = .unsigned, .bits = <span class="tok-builtin">@bitSizeOf</span>(T) } });

    <span class="tok-kw">const</span> DT = <span class="tok-kw">if</span> (<span class="tok-builtin">@bitSizeOf</span>(T) &lt;= <span class="tok-number">64</span>) <span class="tok-type">u64</span> <span class="tok-kw">else</span> <span class="tok-type">u128</span>;
    <span class="tok-kw">const</span> tables = <span class="tok-kw">switch</span> (DT) {
        <span class="tok-type">u64</span> =&gt; <span class="tok-kw">if</span> (<span class="tok-builtin">@import</span>(<span class="tok-str">&quot;builtin&quot;</span>).mode == .ReleaseSmall) &amp;<a href="std.fmt.format_float.Backend64_TablesSmall.html">Backend64_TablesSmall</a> <span class="tok-kw">else</span> &amp;<a href="std.fmt.format_float.Backend64_TablesFull.html">Backend64_TablesFull</a>,
        <span class="tok-type">u128</span> =&gt; &amp;<a href="std.fmt.format_float.Backend128_Tables.html">Backend128_Tables</a>,
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
    };

    <span class="tok-kw">const</span> has_explicit_leading_bit = <a href="std.html">std</a>.<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMantissaBits">floatMantissaBits</a>(T) - <a href="std.html">std</a>.<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatFractionalBits">floatFractionalBits</a>(T) != <span class="tok-number">0</span>;
    <span class="tok-kw">const</span> d = <a href="std.fmt.format_float.html#std.fmt.format_float.binaryToDecimal">binaryToDecimal</a>(DT, <span class="tok-builtin">@as</span>(I, <span class="tok-builtin">@bitCast</span>(v)), <a href="std.html">std</a>.<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMantissaBits">floatMantissaBits</a>(T), <a href="std.html">std</a>.<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatExponentBits">floatExponentBits</a>(T), has_explicit_leading_bit, tables);

    <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (options.mode) {
        .scientific =&gt; <a href="std.fmt.format_float.html#std.fmt.format_float.formatScientific">formatScientific</a>(DT, buf, d, options.precision),
        .decimal =&gt; <a href="std.fmt.format_float.html#std.fmt.format_float.formatDecimal">formatDecimal</a>(DT, buf, d, options.precision),
    };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtSliceHexLower" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtSliceHexLower</span><a href="#src.zig-std.fmt.fmtSliceHexLower">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceHexLower</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceHexLower">formatSliceHexLower</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for a []const u8 where every byte is formatted as a pair
of lowercase hexadecimal digits.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtSliceHexLower">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceHexLower</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceHexLower">formatSliceHexLower</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtSliceHexUpper" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtSliceHexUpper</span><a href="#src.zig-std.fmt.fmtSliceHexUpper">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceHexUpper</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceHexUpper">formatSliceHexUpper</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for a []const u8 where every byte is formatted as pair
of uppercase hexadecimal digits.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtSliceHexUpper">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceHexUpper</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceHexUpper">formatSliceHexUpper</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtSliceEscapeLower" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtSliceEscapeLower</span><a href="#src.zig-std.fmt.fmtSliceEscapeLower">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceEscapeLower</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceEscapeLower">formatSliceEscapeLower</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for a []const u8 where every non-printable ASCII
character is escaped as \xNN, where NN is the character in lowercase
hexadecimal notation.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtSliceEscapeLower">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceEscapeLower</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceEscapeLower">formatSliceEscapeLower</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtSliceEscapeUpper" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtSliceEscapeUpper</span><a href="#src.zig-std.fmt.fmtSliceEscapeUpper">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceEscapeUpper</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceEscapeUpper">formatSliceEscapeUpper</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for a []const u8 where every non-printable ASCII
character is escaped as \xNN, where NN is the character in uppercase
hexadecimal notation.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtSliceEscapeUpper">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceEscapeUpper</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceEscapeUpper">formatSliceEscapeUpper</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtIntSizeDec" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtIntSizeDec</span><a href="#src.zig-std.fmt.fmtIntSizeDec">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtIntSizeDec</span>(value: <span class="tok-type">u64</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSizeDec">formatSizeDec</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for a u64 value representing a file size.
This formatter represents the number as multiple of 1000 and uses the SI
measurement units (kB, MB, GB, ...).
Format option <code>precision</code> is ignored when <code>value</code> is less than 1kB</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>value: <span class="tok-type">u64</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtIntSizeDec">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtIntSizeDec</span>(value: <span class="tok-type">u64</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSizeDec">formatSizeDec</a>) {
    <span class="tok-kw">return</span> .{ .data = value };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtIntSizeBin" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtIntSizeBin</span><a href="#src.zig-std.fmt.fmtIntSizeBin">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtIntSizeBin</span>(value: <span class="tok-type">u64</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSizeBin">formatSizeBin</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for a u64 value representing a file size.
This formatter represents the number as multiple of 1024 and uses the IEC
measurement units (KiB, MiB, GiB, ...).
Format option <code>precision</code> is ignored when <code>value</code> is less than 1KiB</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>value: <span class="tok-type">u64</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtIntSizeBin">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtIntSizeBin</span>(value: <span class="tok-type">u64</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSizeBin">formatSizeBin</a>) {
    <span class="tok-kw">return</span> .{ .data = value };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatText" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatText</span><a href="#src.zig-std.fmt.formatText">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatText</span>( bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatText">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatText</span>(
    bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">comptime</span> <a href="std.fmt.html#std.fmt.checkTextFmt">checkTextFmt</a>(fmt);
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(bytes, options, writer);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatAsciiChar" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatAsciiChar</span><a href="#src.zig-std.fmt.formatAsciiChar">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatAsciiChar</span>( c: <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>c: <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatAsciiChar">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatAsciiChar</span>(
    c: <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-builtin">@as</span>(*<span class="tok-kw">const</span> [<span class="tok-number">1</span>]<span class="tok-type">u8</span>, &amp;c), options, writer);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatUnicodeCodepoint" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatUnicodeCodepoint</span><a href="#src.zig-std.fmt.formatUnicodeCodepoint">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatUnicodeCodepoint</span>( c: <span class="tok-type">u21</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>c: <span class="tok-type">u21</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatUnicodeCodepoint">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatUnicodeCodepoint</span>(
    c: <span class="tok-type">u21</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">4</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">const</span> len = <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8Encode">utf8Encode</a>(c, &amp;buf) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.Utf8CannotEncodeSurrogateHalf, <span class="tok-kw">error</span>.CodepointTooLarge =&gt; {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(&amp;<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.replacement_character">replacement_character</a>), options, writer);
        },
    };
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buf[<span class="tok-number">0</span>..len], options, writer);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatBuf" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatBuf</span><a href="#src.zig-std.fmt.formatBuf">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatBuf</span>( buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatBuf">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatBuf</span>(
    buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">if</span> (options.width) |min_width| {<span class="tok-comment">
        // In case of error assume the buffer content is ASCII-encoded
        </span><span class="tok-kw">const</span> width = <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8CountCodepoints">utf8CountCodepoints</a>(buf) <span class="tok-kw">catch</span> buf.len;
        <span class="tok-kw">const</span> padding = <span class="tok-kw">if</span> (width &lt; min_width) min_width - width <span class="tok-kw">else</span> <span class="tok-number">0</span>;

        <span class="tok-kw">if</span> (padding == <span class="tok-number">0</span>)
            <span class="tok-kw">return</span> writer.writeAll(buf);

        <span class="tok-kw">var</span> fill_buffer: [<span class="tok-number">4</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
        <span class="tok-kw">const</span> fill_utf8 = <span class="tok-kw">if</span> (<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8Encode">utf8Encode</a>(options.fill, &amp;fill_buffer)) |len|
            fill_buffer[<span class="tok-number">0</span>..len]
        <span class="tok-kw">else</span> |err| <span class="tok-kw">switch</span> (err) {
            <span class="tok-kw">error</span>.Utf8CannotEncodeSurrogateHalf,
            <span class="tok-kw">error</span>.CodepointTooLarge,
            =&gt; &amp;<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.replacement_character">replacement_character</a>),
        };
        <span class="tok-kw">switch</span> (options.alignment) {
            .left =&gt; {
                <span class="tok-kw">try</span> writer.writeAll(buf);
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, padding);
            },
            .center =&gt; {
                <span class="tok-kw">const</span> left_padding = padding / <span class="tok-number">2</span>;
                <span class="tok-kw">const</span> right_padding = (padding + <span class="tok-number">1</span>) / <span class="tok-number">2</span>;
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, left_padding);
                <span class="tok-kw">try</span> writer.writeAll(buf);
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, right_padding);
            },
            .right =&gt; {
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, padding);
                <span class="tok-kw">try</span> writer.writeAll(buf);
            },
        }
    } <span class="tok-kw">else</span> {<span class="tok-comment">
        // Fast path, avoid counting the number of codepoints
        </span><span class="tok-kw">try</span> writer.writeAll(buf);
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatFloatHexadecimal" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatFloatHexadecimal</span><a href="#src.zig-std.fmt.formatFloatHexadecimal">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatFloatHexadecimal</span>( value: <span class="tok-kw">anytype</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatFloatHexadecimal">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatFloatHexadecimal</span>(
    value: <span class="tok-kw">anytype</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.signbit.html#std.math.signbit.signbit">signbit</a>(value)) {
        <span class="tok-kw">try</span> writer.writeByte(<span class="tok-str">'-'</span>);
    }
    <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.isnan.html#std.math.isnan.isNan">isNan</a>(value)) {
        <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;nan&quot;</span>);
    }
    <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.isinf.html#std.math.isinf.isInf">isInf</a>(value)) {
        <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;inf&quot;</span>);
    }

    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);
    <span class="tok-kw">const</span> TU = <a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.Int">Int</a>(.unsigned, <span class="tok-builtin">@bitSizeOf</span>(T));

    <span class="tok-kw">const</span> mantissa_bits = <a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMantissaBits">floatMantissaBits</a>(T);
    <span class="tok-kw">const</span> fractional_bits = <a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatFractionalBits">floatFractionalBits</a>(T);
    <span class="tok-kw">const</span> exponent_bits = <a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatExponentBits">floatExponentBits</a>(T);
    <span class="tok-kw">const</span> mantissa_mask = (<span class="tok-number">1</span> &lt;&lt; mantissa_bits) - <span class="tok-number">1</span>;
    <span class="tok-kw">const</span> exponent_mask = (<span class="tok-number">1</span> &lt;&lt; exponent_bits) - <span class="tok-number">1</span>;
    <span class="tok-kw">const</span> exponent_bias = (<span class="tok-number">1</span> &lt;&lt; (exponent_bits - <span class="tok-number">1</span>)) - <span class="tok-number">1</span>;

    <span class="tok-kw">const</span> as_bits = <span class="tok-builtin">@as</span>(TU, <span class="tok-builtin">@bitCast</span>(value));
    <span class="tok-kw">var</span> mantissa = as_bits &amp; mantissa_mask;
    <span class="tok-kw">var</span> exponent: <span class="tok-type">i32</span> = <span class="tok-builtin">@as</span>(<span class="tok-type">u16</span>, <span class="tok-builtin">@truncate</span>((as_bits &gt;&gt; mantissa_bits) &amp; exponent_mask));

    <span class="tok-kw">const</span> is_denormal = exponent == <span class="tok-number">0</span> <span class="tok-kw">and</span> mantissa != <span class="tok-number">0</span>;
    <span class="tok-kw">const</span> is_zero = exponent == <span class="tok-number">0</span> <span class="tok-kw">and</span> mantissa == <span class="tok-number">0</span>;

    <span class="tok-kw">if</span> (is_zero) {<span class="tok-comment">
        // Handle this case here to simplify the logic below.
        </span><span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;0x0&quot;</span>);
        <span class="tok-kw">if</span> (options.precision) |precision| {
            <span class="tok-kw">if</span> (precision &gt; <span class="tok-number">0</span>) {
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
                <span class="tok-kw">try</span> writer.writeByteNTimes(<span class="tok-str">'0'</span>, precision);
            }
        } <span class="tok-kw">else</span> {
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.0&quot;</span>);
        }
        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;p0&quot;</span>);
        <span class="tok-kw">return</span>;
    }

    <span class="tok-kw">if</span> (is_denormal) {<span class="tok-comment">
        // Adjust the exponent for printing.
        </span>exponent += <span class="tok-number">1</span>;
    } <span class="tok-kw">else</span> {
        <span class="tok-kw">if</span> (fractional_bits == mantissa_bits)
            mantissa |= <span class="tok-number">1</span> &lt;&lt; fractional_bits;<span class="tok-comment"> // Add the implicit integer bit.
    </span>}

    <span class="tok-kw">const</span> mantissa_digits = (fractional_bits + <span class="tok-number">3</span>) / <span class="tok-number">4</span>;<span class="tok-comment">
    // Fill in zeroes to round the fraction width to a multiple of 4.
    </span>mantissa &lt;&lt;= mantissa_digits * <span class="tok-number">4</span> - fractional_bits;

    <span class="tok-kw">if</span> (options.precision) |precision| {<span class="tok-comment">
        // Round if needed.
        </span><span class="tok-kw">if</span> (precision &lt; mantissa_digits) {<span class="tok-comment">
            // We always have at least 4 extra bits.
            </span><span class="tok-kw">var</span> extra_bits = (mantissa_digits - precision) * <span class="tok-number">4</span>;<span class="tok-comment">
            // The result LSB is the Guard bit, we need two more (Round and
            // Sticky) to round the value.
            </span><span class="tok-kw">while</span> (extra_bits &gt; <span class="tok-number">2</span>) {
                mantissa = (mantissa &gt;&gt; <span class="tok-number">1</span>) | (mantissa &amp; <span class="tok-number">1</span>);
                extra_bits -= <span class="tok-number">1</span>;
            }<span class="tok-comment">
            // Round to nearest, tie to even.
            </span>mantissa |= <span class="tok-builtin">@intFromBool</span>(mantissa &amp; <span class="tok-number">0b100</span> != <span class="tok-number">0</span>);
            mantissa += <span class="tok-number">1</span>;<span class="tok-comment">
            // Drop the excess bits.
            </span>mantissa &gt;&gt;= <span class="tok-number">2</span>;<span class="tok-comment">
            // Restore the alignment.
            </span>mantissa &lt;&lt;= <span class="tok-builtin">@as</span>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.Log2Int">Log2Int</a>(TU), <span class="tok-builtin">@intCast</span>((mantissa_digits - precision) * <span class="tok-number">4</span>));

            <span class="tok-kw">const</span> overflow = mantissa &amp; (<span class="tok-number">1</span> &lt;&lt; <span class="tok-number">1</span> + mantissa_digits * <span class="tok-number">4</span>) != <span class="tok-number">0</span>;<span class="tok-comment">
            // Prefer a normalized result in case of overflow.
            </span><span class="tok-kw">if</span> (overflow) {
                mantissa &gt;&gt;= <span class="tok-number">1</span>;
                exponent += <span class="tok-number">1</span>;
            }
        }
    }<span class="tok-comment">

    // +1 for the decimal part.
    </span><span class="tok-kw">var</span> buf: [<span class="tok-number">1</span> + mantissa_digits]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    _ = <a href="std.fmt.html#std.fmt.formatIntBuf">formatIntBuf</a>(&amp;buf, mantissa, <span class="tok-number">16</span>, .lower, .{ .fill = <span class="tok-str">'0'</span>, .width = <span class="tok-number">1</span> + mantissa_digits });

    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;0x&quot;</span>);
    <span class="tok-kw">try</span> writer.writeByte(buf[<span class="tok-number">0</span>]);
    <span class="tok-kw">const</span> trimmed = <a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.trimRight">trimRight</a>(<span class="tok-type">u8</span>, buf[<span class="tok-number">1</span>..], <span class="tok-str">&quot;0&quot;</span>);
    <span class="tok-kw">if</span> (options.precision) |precision| {
        <span class="tok-kw">if</span> (precision &gt; <span class="tok-number">0</span>) <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (trimmed.len &gt; <span class="tok-number">0</span>) {
        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
    }
    <span class="tok-kw">try</span> writer.writeAll(trimmed);<span class="tok-comment">
    // Add trailing zeros if explicitly requested.
    </span><span class="tok-kw">if</span> (options.precision) |precision| <span class="tok-kw">if</span> (precision &gt; <span class="tok-number">0</span>) {
        <span class="tok-kw">if</span> (precision &gt; trimmed.len)
            <span class="tok-kw">try</span> writer.writeByteNTimes(<span class="tok-str">'0'</span>, precision - trimmed.len);
    };
    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;p&quot;</span>);
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(exponent - exponent_bias, <span class="tok-number">10</span>, .lower, .{}, writer);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatInt" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatInt</span><a href="#src.zig-std.fmt.formatInt">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatInt</span>( value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div><div><pre><code>case: <a href="std.fmt.Case.html">Case</a></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatInt">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatInt</span>(
    value: <span class="tok-kw">anytype</span>,
    base: <span class="tok-type">u8</span>,
    case: <a href="std.fmt.Case.html">Case</a>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <a href="std.debug.html#std.debug.assert">assert</a>(base &gt;= <span class="tok-number">2</span>);

    <span class="tok-kw">const</span> int_value = <span class="tok-kw">if</span> (<span class="tok-builtin">@TypeOf</span>(value) == <span class="tok-type">comptime_int</span>) blk: {
        <span class="tok-kw">const</span> Int = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.IntFittingRange">IntFittingRange</a>(value, value);
        <span class="tok-kw">break</span> :blk <span class="tok-builtin">@as</span>(Int, value);
    } <span class="tok-kw">else</span> value;

    <span class="tok-kw">const</span> value_info = <span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(int_value)).int;<span class="tok-comment">

    // The type must have the same size as `base` or be wider in order for the
    // division to work
    </span><span class="tok-kw">const</span> min_int_bits = <span class="tok-kw">comptime</span> <span class="tok-builtin">@max</span>(value_info.bits, <span class="tok-number">8</span>);
    <span class="tok-kw">const</span> MinInt = <a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.Int">Int</a>(.unsigned, min_int_bits);

    <span class="tok-kw">const</span> abs_value = <span class="tok-builtin">@abs</span>(int_value);<span class="tok-comment">
    // The worst case in terms of space needed is base 2, plus 1 for the sign
    </span><span class="tok-kw">var</span> buf: [<span class="tok-number">1</span> + <span class="tok-builtin">@max</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">comptime_int</span>, value_info.bits), <span class="tok-number">1</span>)]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;

    <span class="tok-kw">var</span> a: MinInt = abs_value;
    <span class="tok-kw">var</span> index: <span class="tok-type">usize</span> = buf.len;

    <span class="tok-kw">if</span> (base == <span class="tok-number">10</span>) {
        <span class="tok-kw">while</span> (a &gt;= <span class="tok-number">100</span>) : (a = <span class="tok-builtin">@divTrunc</span>(a, <span class="tok-number">100</span>)) {
            index -= <span class="tok-number">2</span>;
            buf[index..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].* = <a href="std.fmt.html#std.fmt.digits2">digits2</a>(<span class="tok-builtin">@intCast</span>(a % <span class="tok-number">100</span>));
        }

        <span class="tok-kw">if</span> (a &lt; <span class="tok-number">10</span>) {
            index -= <span class="tok-number">1</span>;
            buf[index] = <span class="tok-str">'0'</span> + <span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-builtin">@intCast</span>(a));
        } <span class="tok-kw">else</span> {
            index -= <span class="tok-number">2</span>;
            buf[index..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].* = <a href="std.fmt.html#std.fmt.digits2">digits2</a>(<span class="tok-builtin">@intCast</span>(a));
        }
    } <span class="tok-kw">else</span> {
        <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {
            <span class="tok-kw">const</span> digit = a % base;
            index -= <span class="tok-number">1</span>;
            buf[index] = <a href="std.fmt.html#std.fmt.digitToChar">digitToChar</a>(<span class="tok-builtin">@intCast</span>(digit), case);
            a /= base;
            <span class="tok-kw">if</span> (a == <span class="tok-number">0</span>) <span class="tok-kw">break</span>;
        }
    }

    <span class="tok-kw">if</span> (value_info.signedness == .signed) {
        <span class="tok-kw">if</span> (value &lt; <span class="tok-number">0</span>) {<span class="tok-comment">
            // Negative integer
            </span>index -= <span class="tok-number">1</span>;
            buf[index] = <span class="tok-str">'-'</span>;
        } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (options.width == <span class="tok-null">null</span> <span class="tok-kw">or</span> options.width.? == <span class="tok-number">0</span>) {<span class="tok-comment">
            // Positive integer, omit the plus sign
        </span>} <span class="tok-kw">else</span> {<span class="tok-comment">
            // Positive integer
            </span>index -= <span class="tok-number">1</span>;
            buf[index] = <span class="tok-str">'+'</span>;
        }
    }

    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buf[index..], options, writer);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.formatIntBuf" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">formatIntBuf</span><a href="#src.zig-std.fmt.formatIntBuf">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatIntBuf</span>(out_buf: []<span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>) <span class="tok-type">usize</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>out_buf: []<span class="tok-type">u8</span></code></pre></div><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div><div><pre><code>case: <a href="std.fmt.Case.html">Case</a></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.formatIntBuf">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatIntBuf</span>(out_buf: []<span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>) <span class="tok-type">usize</span> {
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(out_buf);
    <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(value, base, case, options, fbs.writer()) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    <span class="tok-kw">return</span> fbs.pos;
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.digits2" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">digits2</span><a href="#src.zig-std.fmt.digits2">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">digits2</span>(value: <span class="tok-type">u8</span>) [<span class="tok-number">2</span>]<span class="tok-type">u8</span></code></pre></div><div class="tldDocs"><p>Converts values in the range [0, 100) to a base 10 string.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>value: <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.digits2">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">digits2</span>(value: <span class="tok-type">u8</span>) [<span class="tok-number">2</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">if</span> (<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.mode">mode</a> == .ReleaseSmall) {
        <span class="tok-kw">return</span> .{ <span class="tok-builtin">@intCast</span>(<span class="tok-str">'0'</span> + value / <span class="tok-number">10</span>), <span class="tok-builtin">@intCast</span>(<span class="tok-str">'0'</span> + value % <span class="tok-number">10</span>) };
    } <span class="tok-kw">else</span> {
        <span class="tok-kw">return</span> <span class="tok-str">&quot;00010203040506070809101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899&quot;</span>[value * <span class="tok-number">2</span> ..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].*;
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtDuration" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtDuration</span><a href="#src.zig-std.fmt.fmtDuration">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtDuration</span>(ns: <span class="tok-type">u64</span>) <a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatDuration">formatDuration</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for number of nanoseconds according to its magnitude:
[#y][#w][#d][#h][#m]#[.###][n|u|m]s</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>ns: <span class="tok-type">u64</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> fmtDuration {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">24</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;0ns&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;999ns&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;1.45us&quot;</span>, .d = <span class="tok-number">1450</span> },
        .{ .s = <span class="tok-str">&quot;1.5us&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;14.5us&quot;</span>, .d = <span class="tok-number">14500</span> },
        .{ .s = <span class="tok-str">&quot;145us&quot;</span>, .d = <span class="tok-number">145000</span> },
        .{ .s = <span class="tok-str">&quot;999.999us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1.5ms&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;1.11ms&quot;</span>, .d = <span class="tok-number">1110000</span> },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111000</span> },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111100</span> },
        .{ .s = <span class="tok-str">&quot;999.999ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> },
        .{ .s = <span class="tok-str">&quot;59.999s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1m&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> },
        .{ .s = <span class="tok-str">&quot;1h&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> },
        .{ .s = <span class="tok-str">&quot;1d&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;1w&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a> },
        .{ .s = <span class="tok-str">&quot;1y&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;1y52w23h59m59.999s&quot;</span>, .d = <span class="tok-number">730</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> - <span class="tok-number">1</span> },<span class="tok-comment"> // 365d = 52w1d
        </span>.{ .s = <span class="tok-str">&quot;1y1h1.001s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;1y1h1s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <span class="tok-number">999</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;1y1h999.999us&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1y1m999ns&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> + <span class="tok-number">999</span> },
        .{ .s = <span class="tok-str">&quot;584y49w23h34m33.709s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.maxInt">maxInt</a>(<span class="tok-type">u64</span>) },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, <span class="tok-str">&quot;{}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtDuration">fmtDuration</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }

    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;=======0ns&quot;</span>, .f = <span class="tok-str">&quot;{s:=&gt;10}&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns=======&quot;</span>, .f = <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;  999ns   &quot;</span>, .f = <span class="tok-str">&quot;{s:^10}&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span> },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, tc.f, .{<a href="std.fmt.html#std.fmt.fmtDuration">fmtDuration</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtDuration">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtDuration</span>(ns: <span class="tok-type">u64</span>) <a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatDuration">formatDuration</a>) {
    <span class="tok-kw">const</span> data = <a href="std.fmt.FormatDurationData.html">FormatDurationData</a>{ .ns = ns };
    <span class="tok-kw">return</span> .{ .data = data };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.fmtDurationSigned" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">fmtDurationSigned</span><a href="#src.zig-std.fmt.fmtDurationSigned">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtDurationSigned</span>(ns: <span class="tok-type">i64</span>) <a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatDurationSigned">formatDurationSigned</a>)</code></pre></div><div class="tldDocs"><p>Return a Formatter for number of nanoseconds according to its signed magnitude:
[#y][#w][#d][#h][#m]#[.###][n|u|m]s</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>ns: <span class="tok-type">i64</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> fmtDurationSigned {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">24</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;0ns&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1ns&quot;</span>, .d = -(<span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;999ns&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-999ns&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;-1us&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a>) },
        .{ .s = <span class="tok-str">&quot;1.45us&quot;</span>, .d = <span class="tok-number">1450</span> },
        .{ .s = <span class="tok-str">&quot;-1.45us&quot;</span>, .d = -(<span class="tok-number">1450</span>) },
        .{ .s = <span class="tok-str">&quot;1.5us&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;-1.5us&quot;</span>, .d = -(<span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> / <span class="tok-number">2</span>) },
        .{ .s = <span class="tok-str">&quot;14.5us&quot;</span>, .d = <span class="tok-number">14500</span> },
        .{ .s = <span class="tok-str">&quot;-14.5us&quot;</span>, .d = -(<span class="tok-number">14500</span>) },
        .{ .s = <span class="tok-str">&quot;145us&quot;</span>, .d = <span class="tok-number">145000</span> },
        .{ .s = <span class="tok-str">&quot;-145us&quot;</span>, .d = -(<span class="tok-number">145000</span>) },
        .{ .s = <span class="tok-str">&quot;999.999us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-999.999us&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1ms&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1.5ms&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;-1.5ms&quot;</span>, .d = -(<span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> / <span class="tok-number">2</span>) },
        .{ .s = <span class="tok-str">&quot;1.11ms&quot;</span>, .d = <span class="tok-number">1110000</span> },
        .{ .s = <span class="tok-str">&quot;-1.11ms&quot;</span>, .d = -(<span class="tok-number">1110000</span>) },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111000</span> },
        .{ .s = <span class="tok-str">&quot;-1.111ms&quot;</span>, .d = -(<span class="tok-number">1111000</span>) },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111100</span> },
        .{ .s = <span class="tok-str">&quot;-1.111ms&quot;</span>, .d = -(<span class="tok-number">1111100</span>) },
        .{ .s = <span class="tok-str">&quot;999.999ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-999.999ms&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> },
        .{ .s = <span class="tok-str">&quot;-1s&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a>) },
        .{ .s = <span class="tok-str">&quot;59.999s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-59.999s&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1m&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> },
        .{ .s = <span class="tok-str">&quot;-1m&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a>) },
        .{ .s = <span class="tok-str">&quot;1h&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> },
        .{ .s = <span class="tok-str">&quot;-1h&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a>) },
        .{ .s = <span class="tok-str">&quot;1d&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;-1d&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a>) },
        .{ .s = <span class="tok-str">&quot;1w&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a> },
        .{ .s = <span class="tok-str">&quot;-1w&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a>) },
        .{ .s = <span class="tok-str">&quot;1y&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;-1y&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a>) },
        .{ .s = <span class="tok-str">&quot;1y52w23h59m59.999s&quot;</span>, .d = <span class="tok-number">730</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> - <span class="tok-number">1</span> },<span class="tok-comment"> // 365d = 52w1d
        </span>.{ .s = <span class="tok-str">&quot;-1y52w23h59m59.999s&quot;</span>, .d = -(<span class="tok-number">730</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> - <span class="tok-number">1</span>) },<span class="tok-comment"> // 365d = 52w1d
        </span>.{ .s = <span class="tok-str">&quot;1y1h1.001s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;-1y1h1.001s&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a>) },
        .{ .s = <span class="tok-str">&quot;1y1h1s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <span class="tok-number">999</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;-1y1h1s&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <span class="tok-number">999</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a>) },
        .{ .s = <span class="tok-str">&quot;1y1h999.999us&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1y1h999.999us&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;-1y1h1ms&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a>) },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1y1h1ms&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1y1m999ns&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> + <span class="tok-number">999</span> },
        .{ .s = <span class="tok-str">&quot;-1y1m999ns&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> + <span class="tok-number">999</span>) },
        .{ .s = <span class="tok-str">&quot;292y24w3d23h47m16.854s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.maxInt">maxInt</a>(<span class="tok-type">i64</span>) },
        .{ .s = <span class="tok-str">&quot;-292y24w3d23h47m16.854s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i64</span>) + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-292y24w3d23h47m16.854s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i64</span>) },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, <span class="tok-str">&quot;{}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtDurationSigned">fmtDurationSigned</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }

    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;=======0ns&quot;</span>, .f = <span class="tok-str">&quot;{s:=&gt;10}&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns=======&quot;</span>, .f = <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1ns======&quot;</span>, .f = <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .d = -(<span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;  -999ns  &quot;</span>, .f = <span class="tok-str">&quot;{s:^10}&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span>) },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, tc.f, .{<a href="std.fmt.html#std.fmt.fmtDurationSigned">fmtDurationSigned</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.fmtDurationSigned">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtDurationSigned</span>(ns: <span class="tok-type">i64</span>) <a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatDurationSigned">formatDurationSigned</a>) {
    <span class="tok-kw">return</span> .{ .data = ns };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.parseInt" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">parseInt</span><a href="#src.zig-std.fmt.parseInt">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseInt</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!T</code></pre></div><div class="tldDocs"><p>Parses the string <code>buf</code> as signed or unsigned representation in the
specified base of an integral value of type <code>T</code>.</p>
<p>When <code>base</code> is zero the string prefix is examined to detect the true base:</p>
<ul>
<li>A prefix of &quot;0b&quot; implies base=2,</li>
<li>A prefix of &quot;0o&quot; implies base=8,</li>
<li>A prefix of &quot;0x&quot; implies base=16,</li>
<li>Otherwise base=10 is assumed.</li>
</ul>
<p>Ignores '_' character in <code>buf</code>.
See also <code><a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a></code>.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>T: <span class="tok-type">type</span></code></pre></div><div><pre><code>buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> parseInt {
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">10</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">10</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">10</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;+10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot; 10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;10 &quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;_10_&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x_10_&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x10_&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x_10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">255</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;255&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;256&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // +0 and -0 should work for unsigned
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-0&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;+0&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // ensure minInt is parsed correctly
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i1</span>), <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i1</span>, <span class="tok-str">&quot;-1&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i8</span>), <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i8</span>, <span class="tok-str">&quot;-128&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i43</span>), <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i43</span>, <span class="tok-str">&quot;-4398046511104&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // empty string or bare +- is invalid
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;+&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;-&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // autodectect the base
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">111</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">111</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;1_1_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">111</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;1_1_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0b111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0B111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0b1_11&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0o111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0O111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0o11_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0x111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0b111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0b11_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0o111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0x111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0X111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0x1_11&quot;</span>, <span class="tok-number">0</span>));<span class="tok-comment">

    // bare binary/octal/decimal prefix is invalid
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0b&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0o&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x&quot;</span>, <span class="tok-number">0</span>));<span class="tok-comment">

    // edge cases which previously errored due to base overflowing T
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">i2</span>, -<span class="tok-number">2</span>), <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i2</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">2</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">i4</span>, -<span class="tok-number">8</span>), <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i4</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">8</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">i5</span>, -<span class="tok-number">16</span>), <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i5</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">16</span>));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.parseInt">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseInt</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!T {
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithGenericCharacter">parseIntWithGenericCharacter</a>(T, <span class="tok-type">u8</span>, buf, base);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.parseIntWithGenericCharacter" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">parseIntWithGenericCharacter</span><a href="#src.zig-std.fmt.parseIntWithGenericCharacter">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseIntWithGenericCharacter</span>( <span class="tok-kw">comptime</span> Result: <span class="tok-type">type</span>, <span class="tok-kw">comptime</span> Character: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> Character, base: <span class="tok-type">u8</span>, ) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!Result</code></pre></div><div class="tldDocs"><p>Like <code><a href="std.fmt.html#std.fmt.parseInt">parseInt</a></code>, but with a generic <code>Character</code> type.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>Result: <span class="tok-type">type</span></code></pre></div><div><pre><code>Character: <span class="tok-type">type</span></code></pre></div><div><pre><code>buf: []<span class="tok-kw">const</span> Character</code></pre></div><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.parseIntWithGenericCharacter">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseIntWithGenericCharacter</span>(
    <span class="tok-kw">comptime</span> Result: <span class="tok-type">type</span>,
    <span class="tok-kw">comptime</span> Character: <span class="tok-type">type</span>,
    buf: []<span class="tok-kw">const</span> Character,
    base: <span class="tok-type">u8</span>,
) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!Result {
    <span class="tok-kw">if</span> (buf.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    <span class="tok-kw">if</span> (buf[<span class="tok-number">0</span>] == <span class="tok-str">'+'</span>) <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(Result, Character, buf[<span class="tok-number">1</span>..], base, .pos);
    <span class="tok-kw">if</span> (buf[<span class="tok-number">0</span>] == <span class="tok-str">'-'</span>) <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(Result, Character, buf[<span class="tok-number">1</span>..], base, .neg);
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(Result, Character, buf, base, .pos);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.parseUnsigned" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">parseUnsigned</span><a href="#src.zig-std.fmt.parseUnsigned">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseUnsigned</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!T</code></pre></div><div class="tldDocs"><p>Parses the string <code>buf</code> as unsigned representation in the specified base
of an integral value of type <code>T</code>.</p>
<p>When <code>base</code> is zero the string prefix is examined to detect the true base:</p>
<ul>
<li>A prefix of &quot;0b&quot; implies base=2,</li>
<li>A prefix of &quot;0o&quot; implies base=8,</li>
<li>A prefix of &quot;0x&quot; implies base=16,</li>
<li>Otherwise base=10 is assumed.</li>
</ul>
<p>Ignores '_' character in <code>buf</code>.
See also <code><a href="std.fmt.html#std.fmt.parseInt">parseInt</a></code>.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>T: <span class="tok-type">type</span></code></pre></div><div><pre><code>buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> parseUnsigned {
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">50124</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;050124&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">65535</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;65535&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">65535</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;65_535&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;65536&quot;</span>, <span class="tok-number">10</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0xffffffffffffffff</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;0ffffffffffffffff&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0xffffffffffffffff</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;0f_fff_fff_fff_fff_fff&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;10000000000000000&quot;</span>, <span class="tok-number">16</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0xDEADBEEF</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;DeadBeef&quot;</span>, <span class="tok-number">16</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u7</span>, <span class="tok-str">&quot;1&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">8</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u7</span>, <span class="tok-str">&quot;1000&quot;</span>, <span class="tok-number">2</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;f&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;109&quot;</span>, <span class="tok-number">8</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1442151747</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;NUMBER&quot;</span>, <span class="tok-number">36</span>));<span class="tok-comment">

    // these numbers should fit even though the base itself doesn't fit in the destination type
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;0&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;1&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;2&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;001&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">3</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u2</span>, <span class="tok-str">&quot;3&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u2</span>, <span class="tok-str">&quot;4&quot;</span>, <span class="tok-number">16</span>));<span class="tok-comment">

    // parseUnsigned does not expect a sign
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;+0&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-0&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // test empty string error
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.parseUnsigned">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseUnsigned</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!T {
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(T, <span class="tok-type">u8</span>, buf, base, .pos);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.parseIntSizeSuffix" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">parseIntSizeSuffix</span><a href="#src.zig-std.fmt.parseIntSizeSuffix">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseIntSizeSuffix</span>(buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, digit_base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!<span class="tok-type">usize</span></code></pre></div><div class="tldDocs"><p>Parses a number like '2G', '2Gi', or '2GiB'.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>digit_base: <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> parseIntSizeSuffix {
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2B&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2000</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2kB&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2000</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2k&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2048</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2KiB&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2048</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2Ki&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">10240</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;aKiB&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2iB&quot;</span>, <span class="tok-number">10</span>));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.parseIntSizeSuffix">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseIntSizeSuffix</span>(buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, digit_base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!<span class="tok-type">usize</span> {
    <span class="tok-kw">var</span> without_B = buf;
    <span class="tok-kw">if</span> (<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.endsWith">endsWith</a>(<span class="tok-type">u8</span>, buf, <span class="tok-str">&quot;B&quot;</span>)) without_B.len -= <span class="tok-number">1</span>;
    <span class="tok-kw">var</span> without_i = without_B;
    <span class="tok-kw">var</span> magnitude_base: <span class="tok-type">usize</span> = <span class="tok-number">1000</span>;
    <span class="tok-kw">if</span> (<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.endsWith">endsWith</a>(<span class="tok-type">u8</span>, without_B, <span class="tok-str">&quot;i&quot;</span>)) {
        without_i.len -= <span class="tok-number">1</span>;
        magnitude_base = <span class="tok-number">1024</span>;
    }
    <span class="tok-kw">if</span> (without_i.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    <span class="tok-kw">const</span> orders_of_magnitude: <span class="tok-type">usize</span> = <span class="tok-kw">switch</span> (without_i[without_i.len - <span class="tok-number">1</span>]) {
        <span class="tok-str">'k'</span>, <span class="tok-str">'K'</span> =&gt; <span class="tok-number">1</span>,
        <span class="tok-str">'M'</span> =&gt; <span class="tok-number">2</span>,
        <span class="tok-str">'G'</span> =&gt; <span class="tok-number">3</span>,
        <span class="tok-str">'T'</span> =&gt; <span class="tok-number">4</span>,
        <span class="tok-str">'P'</span> =&gt; <span class="tok-number">5</span>,
        <span class="tok-str">'E'</span> =&gt; <span class="tok-number">6</span>,
        <span class="tok-str">'Z'</span> =&gt; <span class="tok-number">7</span>,
        <span class="tok-str">'Y'</span> =&gt; <span class="tok-number">8</span>,
        <span class="tok-str">'R'</span> =&gt; <span class="tok-number">9</span>,
        <span class="tok-str">'Q'</span> =&gt; <span class="tok-number">10</span>,
        <span class="tok-kw">else</span> =&gt; <span class="tok-number">0</span>,
    };
    <span class="tok-kw">var</span> without_suffix = without_i;
    <span class="tok-kw">if</span> (orders_of_magnitude &gt; <span class="tok-number">0</span>) {
        without_suffix.len -= <span class="tok-number">1</span>;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (without_i.len != without_B.len) {
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    }
    <span class="tok-kw">const</span> multiplier = <a href="std.math.html">math</a>.<a href="std.math.powi.html#std.math.powi.powi">powi</a>(<span class="tok-type">usize</span>, magnitude_base, orders_of_magnitude) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.Underflow =&gt; <span class="tok-kw">unreachable</span>,
        <span class="tok-kw">error</span>.Overflow =&gt; <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Overflow,
    };
    <span class="tok-kw">const</span> number = <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">usize</span>, without_suffix, digit_base);
    <span class="tok-kw">return</span> <a href="std.math.html">math</a>.<a href="std.math.html#std.math.mul">mul</a>(<span class="tok-type">usize</span>, number, multiplier);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.parse_float.parseFloat" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">parseFloat</span><a href="#src.zig-std.fmt.parse_float.parseFloat">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseFloat</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, s: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.fmt.parse_float.html#std.fmt.parse_float.ParseFloatError">ParseFloatError</a>!T</code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>T: <span class="tok-type">type</span></code></pre></div><div><pre><code>s: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> parseFloat {
    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> ([_]<span class="tok-type">type</span>{ <span class="tok-type">f16</span>, <span class="tok-type">f32</span>, <span class="tok-type">f64</span>, <span class="tok-type">f80</span>, <span class="tok-type">f128</span> }) |T| {
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;&quot;</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;   1&quot;</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1abc&quot;</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;+&quot;</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;-&quot;</span>));

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0&quot;</span>), <span class="tok-number">0.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0&quot;</span>), <span class="tok-number">0.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;+0&quot;</span>), <span class="tok-number">0.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;-0&quot;</span>), <span class="tok-number">0.0</span>);

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0e0&quot;</span>), <span class="tok-number">0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;2e3&quot;</span>), <span class="tok-number">2000.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1e0&quot;</span>), <span class="tok-number">1.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;-2e3&quot;</span>), -<span class="tok-number">2000.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;-1e0&quot;</span>), -<span class="tok-number">1.0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1.234e3&quot;</span>), <span class="tok-number">1234</span>);

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;3.141&quot;</span>), <span class="tok-number">3.141</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;-3.141&quot;</span>), -<span class="tok-number">3.141</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1e-5000&quot;</span>), <span class="tok-number">0</span>);
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1e+5000&quot;</span>), <a href="std.html">std</a>.<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.inf">inf</a>(T));

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0.4e0066999999999999999999999999999999999999999999999999999&quot;</span>), <a href="std.html">std</a>.<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.inf">inf</a>(T));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0_1_2_3_4_5_6.7_8_9_0_0_0e0_0_1_0&quot;</span>), <span class="tok-builtin">@as</span>(T, <span class="tok-number">123456.789000e10</span>), <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));<span class="tok-comment">

        // underscore rule is simple and reduces to &quot;can only occur between two digits&quot; and multiple are not supported.
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0123456.789000e_0010&quot;</span>));<span class="tok-comment"> // cannot occur immediately after exponent
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;_0123456.789000e0010&quot;</span>));<span class="tok-comment"> // cannot occur before any digits
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0__123456.789000e_0010&quot;</span>));<span class="tok-comment"> // cannot occur twice in a row
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0123456_.789000e0010&quot;</span>));<span class="tok-comment"> // cannot occur before decimal point
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0123456.789000e0010_&quot;</span>));<span class="tok-comment"> // cannot occur at end of number

        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1e-2&quot;</span>), <span class="tok-number">0.01</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1234e-2&quot;</span>), <span class="tok-number">12.34</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;1.&quot;</span>), <span class="tok-number">1</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0.&quot;</span>), <span class="tok-number">0</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;.1&quot;</span>), <span class="tok-number">0.1</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;.0&quot;</span>), <span class="tok-number">0</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;.1e-1&quot;</span>), <span class="tok-number">0.01</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));

        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;.&quot;</span>));<span class="tok-comment"> // At least one digit is required.
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;.e1&quot;</span>));<span class="tok-comment"> // At least one digit is required.
        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0.e&quot;</span>));<span class="tok-comment"> // At least one digit is required.

        </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;123142.1&quot;</span>), <span class="tok-number">123142.1</span>, <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;-123142.1124&quot;</span>), <span class="tok-builtin">@as</span>(T, -<span class="tok-number">123142.1124</span>), <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;0.7062146892655368&quot;</span>), <span class="tok-builtin">@as</span>(T, <span class="tok-number">0.7062146892655368</span>), <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expect">expect</a>(<a href="std.math.html#std.math.approxEqAbs">approxEqAbs</a>(T, <span class="tok-kw">try</span> <a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>(T, <span class="tok-str">&quot;2.71828182845904523536&quot;</span>), <span class="tok-builtin">@as</span>(T, <span class="tok-number">2.718281828459045</span>), <a href="std.fmt.parse_float.html#std.fmt.parse_float.epsilon">epsilon</a>));
    }
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.parse_float.parseFloat">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseFloat</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, s: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.fmt.parse_float.html#std.fmt.parse_float.ParseFloatError">ParseFloatError</a>!T {
    <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(T) != .float) {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;Cannot parse a float into a non-floating point type.&quot;</span>);
    }

    <span class="tok-kw">if</span> (s.len == <span class="tok-number">0</span>) {
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    }

    <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
    <span class="tok-kw">const</span> negative = s[i] == <span class="tok-str">'-'</span>;
    <span class="tok-kw">if</span> (s[i] == <span class="tok-str">'-'</span> <span class="tok-kw">or</span> s[i] == <span class="tok-str">'+'</span>) {
        i += <span class="tok-number">1</span>;
    }
    <span class="tok-kw">if</span> (s.len == i) {
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    }

    <span class="tok-kw">const</span> n = <a href="std.fmt.parse_float.parse.html">parse</a>.<a href="std.fmt.parse_float.parse.html#std.fmt.parse_float.parse.parseNumber">parseNumber</a>(T, s[i..], negative) <span class="tok-kw">orelse</span> {
        <span class="tok-kw">return</span> <a href="std.fmt.parse_float.parse.html">parse</a>.<a href="std.fmt.parse_float.parse.html#std.fmt.parse_float.parse.parseInfOrNan">parseInfOrNan</a>(T, s[i..], negative) <span class="tok-kw">orelse</span> <span class="tok-kw">error</span>.InvalidCharacter;
    };

    <span class="tok-kw">if</span> (n.hex) {
        <span class="tok-kw">return</span> <a href="std.fmt.parse_float.convert_hex.html#std.fmt.parse_float.convert_hex.convertHex">convertHex</a>(T, n);
    }

    <span class="tok-kw">if</span> (<a href="std.fmt.parse_float.convert_fast.html#std.fmt.parse_float.convert_fast.convertFast">convertFast</a>(T, n)) |f| {
        <span class="tok-kw">return</span> f;
    }

    <span class="tok-kw">if</span> (T == <span class="tok-type">f16</span> <span class="tok-kw">or</span> T == <span class="tok-type">f32</span> <span class="tok-kw">or</span> T == <span class="tok-type">f64</span>) {<span class="tok-comment">
        // If significant digits were truncated, then we can have rounding error
        // only if `mantissa + 1` produces a different result. We also avoid
        // redundantly using the Eisel-Lemire algorithm if it was unable to
        // correctly round on the first pass.
        </span><span class="tok-kw">if</span> (<a href="std.fmt.parse_float.convert_eisel_lemire.html#std.fmt.parse_float.convert_eisel_lemire.convertEiselLemire">convertEiselLemire</a>(T, n.exponent, n.mantissa)) |bf| {
            <span class="tok-kw">if</span> (!n.many_digits) {
                <span class="tok-kw">return</span> bf.toFloat(T, n.negative);
            }
            <span class="tok-kw">if</span> (<a href="std.fmt.parse_float.convert_eisel_lemire.html#std.fmt.parse_float.convert_eisel_lemire.convertEiselLemire">convertEiselLemire</a>(T, n.exponent, n.mantissa + <span class="tok-number">1</span>)) |bf2| {
                <span class="tok-kw">if</span> (bf.eql(bf2)) {
                    <span class="tok-kw">return</span> bf.toFloat(T, n.negative);
                }
            }
        }
    }<span class="tok-comment">

    // Unable to correctly round the float using the Eisel-Lemire algorithm.
    // Fallback to a slower, but always correct algorithm.
    </span><span class="tok-kw">return</span> <a href="std.fmt.parse_float.convert_slow.html#std.fmt.parse_float.convert_slow.convertSlow">convertSlow</a>(T, s[i..]).toFloat(T, negative);
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.charToDigit" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">charToDigit</span><a href="#src.zig-std.fmt.charToDigit">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">charToDigit</span>(c: <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) (<span class="tok-kw">error</span>{InvalidCharacter}!<span class="tok-type">u8</span>)</code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>c: <span class="tok-type">u8</span></code></pre></div><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.charToDigit">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">charToDigit</span>(c: <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) (<span class="tok-kw">error</span>{InvalidCharacter}!<span class="tok-type">u8</span>) {
    <span class="tok-kw">const</span> value = <span class="tok-kw">switch</span> (c) {
        <span class="tok-str">'0'</span>...<span class="tok-str">'9'</span> =&gt; c - <span class="tok-str">'0'</span>,
        <span class="tok-str">'A'</span>...<span class="tok-str">'Z'</span> =&gt; c - <span class="tok-str">'A'</span> + <span class="tok-number">10</span>,
        <span class="tok-str">'a'</span>...<span class="tok-str">'z'</span> =&gt; c - <span class="tok-str">'a'</span> + <span class="tok-number">10</span>,
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter,
    };

    <span class="tok-kw">if</span> (value &gt;= base) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;

    <span class="tok-kw">return</span> value;
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.digitToChar" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">digitToChar</span><a href="#src.zig-std.fmt.digitToChar">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">digitToChar</span>(digit: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>) <span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>digit: <span class="tok-type">u8</span></code></pre></div><div><pre><code>case: <a href="std.fmt.Case.html">Case</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.digitToChar">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">digitToChar</span>(digit: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>) <span class="tok-type">u8</span> {
    <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (digit) {
        <span class="tok-number">0</span>...<span class="tok-number">9</span> =&gt; digit + <span class="tok-str">'0'</span>,
        <span class="tok-number">10</span>...<span class="tok-number">35</span> =&gt; digit + ((<span class="tok-kw">if</span> (case == .upper) <span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-str">'A'</span>) <span class="tok-kw">else</span> <span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-str">'a'</span>)) - <span class="tok-number">10</span>),
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
    };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.bufPrint" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">bufPrint</span><a href="#src.zig-std.fmt.bufPrint">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrint</span>(buf: []<span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.BufPrintError">BufPrintError</a>![]<span class="tok-type">u8</span></code></pre></div><div class="tldDocs"><p>Print a Formatter string into <code>buf</code>. Actually just a thin wrapper around <code><a href="std.fmt.html#std.fmt.format">format</a></code> and <code>fixedBufferStream</code>.
Returns a slice of the bytes printed to.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>buf: []<span class="tok-type">u8</span></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.bufPrint">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrint</span>(buf: []<span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.BufPrintError">BufPrintError</a>![]<span class="tok-type">u8</span> {
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(buf);
    <a href="std.fmt.html#std.fmt.format">format</a>(fbs.writer().any(), fmt, args) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.NoSpaceLeft =&gt; <span class="tok-kw">return</span> <span class="tok-kw">error</span>.NoSpaceLeft,
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
    };
    <span class="tok-kw">return</span> fbs.getWritten();
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.bufPrintZ" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">bufPrintZ</span><a href="#src.zig-std.fmt.bufPrintZ">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrintZ</span>(buf: []<span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.BufPrintError">BufPrintError</a>![:<span class="tok-number">0</span>]<span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>buf: []<span class="tok-type">u8</span></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.bufPrintZ">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrintZ</span>(buf: []<span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.BufPrintError">BufPrintError</a>![:<span class="tok-number">0</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf, fmt ++ <span class="tok-str">&quot;\x00&quot;</span>, args);
    <span class="tok-kw">return</span> result[<span class="tok-number">0</span> .. result.len - <span class="tok-number">1</span> :<span class="tok-number">0</span>];
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.count" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">count</span><a href="#src.zig-std.fmt.count">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">count</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <span class="tok-type">u64</span></code></pre></div><div class="tldDocs"><p>Count the characters needed for format. Useful for preallocating memory</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.count">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">count</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <span class="tok-type">u64</span> {
    <span class="tok-kw">var</span> counting_writer = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.counting_writer.html#std.io.counting_writer.countingWriter">countingWriter</a>(<a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.html#std.io.null_writer">null_writer</a>);
    <a href="std.fmt.html#std.fmt.format">format</a>(counting_writer.writer().any(), fmt, args) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    <span class="tok-kw">return</span> counting_writer.bytes_written;
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.allocPrint" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">allocPrint</span><a href="#src.zig-std.fmt.allocPrint">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">allocPrint</span>(allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.AllocPrintError">AllocPrintError</a>![]<span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.allocPrint">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">allocPrint</span>(allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.AllocPrintError">AllocPrintError</a>![]<span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> size = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(<span class="tok-type">usize</span>, <a href="std.fmt.html#std.fmt.count">count</a>(fmt, args)) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.OutOfMemory;
    <span class="tok-kw">const</span> buf = <span class="tok-kw">try</span> allocator.alloc(<span class="tok-type">u8</span>, size);
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf, fmt, args) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.NoSpaceLeft =&gt; <span class="tok-kw">unreachable</span>,<span class="tok-comment"> // we just counted the size above
    </span>};
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.allocPrintZ" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">allocPrintZ</span><a href="#src.zig-std.fmt.allocPrintZ">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">allocPrintZ</span>(allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.AllocPrintError">AllocPrintError</a>![:<span class="tok-number">0</span>]<span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.allocPrintZ">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">allocPrintZ</span>(allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.AllocPrintError">AllocPrintError</a>![:<span class="tok-number">0</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.allocPrint">allocPrint</a>(allocator, fmt ++ <span class="tok-str">&quot;\x00&quot;</span>, args);
    <span class="tok-kw">return</span> result[<span class="tok-number">0</span> .. result.len - <span class="tok-number">1</span> :<span class="tok-number">0</span>];
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.bufPrintIntToSlice" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">bufPrintIntToSlice</span><a href="#src.zig-std.fmt.bufPrintIntToSlice">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrintIntToSlice</span>(buf: []<span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>) []<span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>buf: []<span class="tok-type">u8</span></code></pre></div><div><pre><code>base: <span class="tok-type">u8</span></code></pre></div><div><pre><code>case: <a href="std.fmt.Case.html">Case</a></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> bufPrintIntToSlice {
    <span class="tok-kw">var</span> buffer: [<span class="tok-number">100</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">const</span> buf = buffer[<span class="tok-number">0</span>..];

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-1&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i1</span>, -<span class="tok-number">1</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-101111000110000101001110&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">2</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-12345678&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-bc614e&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-BC614E&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">16</span>, .upper, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;12345678&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">12345678</span>), <span class="tok-number">10</span>, .upper, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;   666&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">666</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">6</span> }));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;  1234&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">0x1234</span>), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">6</span> }));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;1234&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">0x1234</span>), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">1</span> }));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;+42&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, <span class="tok-number">42</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">3</span> }));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-42&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">42</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">3</span> }));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.bufPrintIntToSlice">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrintIntToSlice</span>(buf: []<span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>) []<span class="tok-type">u8</span> {
    <span class="tok-kw">return</span> buf[<span class="tok-number">0</span>..<a href="std.fmt.html#std.fmt.formatIntBuf">formatIntBuf</a>(buf, value, base, case, options)];
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.comptimePrint" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">comptimePrint</span><a href="#src.zig-std.fmt.comptimePrint">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">inline</span> <span class="tok-kw">fn</span> <span class="tok-fn">comptimePrint</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) *<span class="tok-kw">const</span> [<a href="std.fmt.html#std.fmt.count">count</a>(fmt, args):<span class="tok-number">0</span>]<span class="tok-type">u8</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> comptimePrint {
    <span class="tok-builtin">@setEvalBranchQuota</span>(<span class="tok-number">2000</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(*<span class="tok-kw">const</span> [<span class="tok-number">3</span>:<span class="tok-number">0</span>]<span class="tok-type">u8</span>, <span class="tok-builtin">@TypeOf</span>(<a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{}&quot;</span>, .{<span class="tok-number">100</span>})));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;100&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{}&quot;</span>, .{<span class="tok-number">100</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;30&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d}&quot;</span>, .{<span class="tok-number">30.0</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;30.0&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d:3.1}&quot;</span>, .{<span class="tok-number">30.0</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;0.05&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d}&quot;</span>, .{<span class="tok-number">0.05</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;5e-2&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{e}&quot;</span>, .{<span class="tok-number">0.05</span>}));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.comptimePrint">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">inline</span> <span class="tok-kw">fn</span> <span class="tok-fn">comptimePrint</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) *<span class="tok-kw">const</span> [<a href="std.fmt.html#std.fmt.count">count</a>(fmt, args):<span class="tok-number">0</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">comptime</span> {
        <span class="tok-kw">var</span> buf: [<a href="std.fmt.html#std.fmt.count">count</a>(fmt, args):<span class="tok-number">0</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
        _ = <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, fmt, args) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
        buf[buf.len] = <span class="tok-number">0</span>;
        <span class="tok-kw">const</span> final = buf;
        <span class="tok-kw">return</span> &amp;final;
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.format" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">format</span><a href="#src.zig-std.fmt.format">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(s: <span class="tok-builtin">@This</span>(), <span class="tok-kw">comptime</span> _: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, _: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>s: <span class="tok-builtin">@This</span>()</code></pre></div><div><pre><code>_: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>_: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(s: <span class="tok-builtin">@This</span>(), <span class="tok-kw">comptime</span> _: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, _: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
    <span class="tok-kw">try</span> writer.print(<span class="tok-str">&quot;S2({})&quot;</span>, .{s.x});
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.format" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">format</span><a href="#src.zig-std.fmt.format">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>( self: <a href="std.fmt.html">SelfType</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>self: <a href="std.fmt.html">SelfType</a></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
    self: <a href="std.fmt.html">SelfType</a>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    _ = options;
    <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> <span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;p&quot;</span>)) {
        <span class="tok-kw">return</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;({d:.3},{d:.3})&quot;</span>, .{ self.x, self.y });
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;d&quot;</span>)) {
        <span class="tok-kw">return</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;{d:.3}x{d:.3}&quot;</span>, .{ self.x, self.y });
    } <span class="tok-kw">else</span> {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unknown format character: '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>);
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.bytesToHex" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">bytesToHex</span><a href="#src.zig-std.fmt.bytesToHex">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bytesToHex</span>(input: <span class="tok-kw">anytype</span>, case: <a href="std.fmt.Case.html">Case</a>) [input.len * <span class="tok-number">2</span>]<span class="tok-type">u8</span></code></pre></div><div class="tldDocs"><p>Encodes a sequence of bytes as hexadecimal digits.
Returns an array containing the encoded bytes.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>case: <a href="std.fmt.Case.html">Case</a></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> bytesToHex {
    <span class="tok-kw">const</span> input = <span class="tok-str">&quot;input slice&quot;</span>;
    <span class="tok-kw">const</span> encoded = <a href="std.fmt.html#std.fmt.bytesToHex">bytesToHex</a>(input, .lower);
    <span class="tok-kw">var</span> decoded: [input.len]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, input, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;decoded, &amp;encoded));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.bytesToHex">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bytesToHex</span>(input: <span class="tok-kw">anytype</span>, case: <a href="std.fmt.Case.html">Case</a>) [input.len * <span class="tok-number">2</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">if</span> (input.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> [_]<span class="tok-type">u8</span>{};
    <span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(<span class="tok-builtin">@TypeOf</span>(input[<span class="tok-number">0</span>]) == <span class="tok-type">u8</span>);<span class="tok-comment"> // elements to encode must be unsigned bytes

    </span><span class="tok-kw">const</span> charset = <span class="tok-str">&quot;0123456789&quot;</span> ++ <span class="tok-kw">if</span> (case == .upper) <span class="tok-str">&quot;ABCDEF&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;abcdef&quot;</span>;
    <span class="tok-kw">var</span> result: [input.len * <span class="tok-number">2</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">for</span> (input, <span class="tok-number">0</span>..) |b, i| {
        result[i * <span class="tok-number">2</span> + <span class="tok-number">0</span>] = charset[b &gt;&gt; <span class="tok-number">4</span>];
        result[i * <span class="tok-number">2</span> + <span class="tok-number">1</span>] = charset[b &amp; <span class="tok-number">15</span>];
    }
    <span class="tok-kw">return</span> result;
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.hexToBytes" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">hexToBytes</span><a href="#src.zig-std.fmt.hexToBytes">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hexToBytes</span>(out: []<span class="tok-type">u8</span>, input: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) ![]<span class="tok-type">u8</span></code></pre></div><div class="tldDocs"><p>Decodes the sequence of bytes represented by the specified string of
hexadecimal characters.
Returns a slice of the output buffer containing the decoded bytes.</p>
</div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>out: []<span class="tok-type">u8</span></code></pre></div><div><pre><code>input: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div></div></div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> hexToBytes {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">32</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;90&quot;</span> ** <span class="tok-number">32</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;90&quot;</span> ** <span class="tok-number">32</span>))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;ABCD&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;ABCD&quot;</span>))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;&quot;</span>))});
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;012Z&quot;</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidLength, <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;AAA&quot;</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.NoSpaceLeft, <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(buf[<span class="tok-number">0</span>..<span class="tok-number">1</span>], <span class="tok-str">&quot;ABAB&quot;</span>));
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.hexToBytes">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hexToBytes</span>(out: []<span class="tok-type">u8</span>, input: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) ![]<span class="tok-type">u8</span> {<span class="tok-comment">
    // Expect 0 or n pairs of hexadecimal digits.
    </span><span class="tok-kw">if</span> (input.len &amp; <span class="tok-number">1</span> != <span class="tok-number">0</span>)
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidLength;
    <span class="tok-kw">if</span> (out.len * <span class="tok-number">2</span> &lt; input.len)
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.NoSpaceLeft;

    <span class="tok-kw">var</span> in_i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
    <span class="tok-kw">while</span> (in_i &lt; input.len) : (in_i += <span class="tok-number">2</span>) {
        <span class="tok-kw">const</span> hi = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.charToDigit">charToDigit</a>(input[in_i], <span class="tok-number">16</span>);
        <span class="tok-kw">const</span> lo = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.charToDigit">charToDigit</a>(input[in_i + <span class="tok-number">1</span>], <span class="tok-number">16</span>);
        out[in_i / <span class="tok-number">2</span>] = (hi &lt;&lt; <span class="tok-number">4</span>) | lo;
    }

    <span class="tok-kw">return</span> out[<span class="tok-number">0</span> .. in_i / <span class="tok-number">2</span>];
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.format" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">format</span><a href="#src.zig-std.fmt.format">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>( self: <a href="std.fmt.html">SelfType</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>, ) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>self: <a href="std.fmt.html">SelfType</a></code></pre></div><div><pre><code>fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>options: <a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
    self: <a href="std.fmt.html">SelfType</a>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    _ = options;
    <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span>) {
        <span class="tok-kw">return</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;({d:.3},{d:.3})&quot;</span>, .{ self.x, self.y });
    } <span class="tok-kw">else</span> {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unknown format string: '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>);
    }
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.format" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">format</span><a href="#src.zig-std.fmt.format">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(self: <a href="std.fmt.html">R</a>, <span class="tok-kw">comptime</span> _: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, _: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span></code></pre></div><div class="sectParams"><h3 class="sectionHeader">Parameters</h3><div class="listParams"><div><pre><code>self: <a href="std.fmt.html">R</a></code></pre></div><div><pre><code>_: []<span class="tok-kw">const</span> <span class="tok-type">u8</span></code></pre></div><div><pre><code>_: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a></code></pre></div></div></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.format">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(self: <a href="std.fmt.html">R</a>, <span class="tok-kw">comptime</span> _: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, _: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
    <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (self) {
        .Leaf =&gt; |n| <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;Leaf({})&quot;</span>, .{n}),
        .Branch =&gt; |b| <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;Branch({}, {})&quot;</span>, .{ b.left, b.right }),
    };
}</code></pre></details></div></div><div class="decl"><h2 id="std.fmt.hex" class="declHeader"><span class="declHeaderCategory">Function</span><span class="declHeaderIdentifier">hex</span><a href="#src.zig-std.fmt.hex">[src]</a></h2><div class="fnProto"><pre><code class="fnProtoCode"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hex</span>(x: <span class="tok-kw">anytype</span>) [<span class="tok-builtin">@sizeOf</span>(<span class="tok-builtin">@TypeOf</span>(x)) * <span class="tok-number">2</span>]<span class="tok-type">u8</span></code></pre></div><div class="tldDocs"><p>Converts an unsigned integer of any multiple of u8 to an array of lowercase
hex bytes, little endian.</p>
</div><div class="sectDocTests"><h3 class="sectionHeader">Example Usage</h3><pre><code class="docTestsCode"><span class="tok-kw">test</span> hex {
    {
        <span class="tok-kw">const</span> x = <a href="std.fmt.html#std.fmt.hex">hex</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">0xdeadbeef</span>));
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(x.len == <span class="tok-number">8</span>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;efbeadde&quot;</span>, &amp;x);
    }
    {
        <span class="tok-kw">const</span> s = <span class="tok-str">&quot;[&quot;</span> ++ <a href="std.fmt.html#std.fmt.hex">hex</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u64</span>, <span class="tok-number">0x12345678_abcdef00</span>)) ++ <span class="tok-str">&quot;]&quot;</span>;
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(s.len == <span class="tok-number">18</span>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;[00efcdab78563412]&quot;</span>, s);
    }
}</code></pre></div><div class="sectSource"><h3 class="sectionHeader" id="src.zig-std.fmt.hex">Source Code</h3><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hex</span>(x: <span class="tok-kw">anytype</span>) [<span class="tok-builtin">@sizeOf</span>(<span class="tok-builtin">@TypeOf</span>(x)) * <span class="tok-number">2</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(<span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(x)).int.signedness == .unsigned);
    <span class="tok-kw">var</span> result: [<span class="tok-builtin">@sizeOf</span>(<span class="tok-builtin">@TypeOf</span>(x)) * <span class="tok-number">2</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
    <span class="tok-kw">while</span> (i &lt; result.len / <span class="tok-number">2</span>) : (i += <span class="tok-number">1</span>) {
        <span class="tok-kw">const</span> byte: <span class="tok-type">u8</span> = <span class="tok-builtin">@truncate</span>(x &gt;&gt; <span class="tok-builtin">@intCast</span>(<span class="tok-number">8</span> * i));
        result[i * <span class="tok-number">2</span> + <span class="tok-number">0</span>] = <a href="std.fmt.html#std.fmt.hex_charset">hex_charset</a>[byte &gt;&gt; <span class="tok-number">4</span>];
        result[i * <span class="tok-number">2</span> + <span class="tok-number">1</span>] = <a href="std.fmt.html#std.fmt.hex_charset">hex_charset</a>[byte &amp; <span class="tok-number">15</span>];
    }
    <span class="tok-kw">return</span> result;
}</code></pre></details></div></div></div></div><div class="sectSource"><h2 class="sectionHeader" id="src.zig-std.fmt">Source Code</h2><details><summary>Source code</summary><pre><code class="sourceText"><span class="tok-comment">//! String formatting and parsing.</span>

<span class="tok-kw">const</span> std = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;std.zig&quot;</span>);
<span class="tok-kw">const</span> builtin = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;builtin&quot;</span>);

<span class="tok-kw">const</span> io = <a href="std.html">std</a>.<a href="std.io.html">io</a>;
<span class="tok-kw">const</span> math = <a href="std.html">std</a>.<a href="std.math.html">math</a>;
<span class="tok-kw">const</span> assert = <a href="std.html">std</a>.<a href="std.debug.html">debug</a>.<a href="std.debug.html#std.debug.assert">assert</a>;
<span class="tok-kw">const</span> mem = <a href="std.html">std</a>.<a href="std.mem.html">mem</a>;
<span class="tok-kw">const</span> unicode = <a href="std.html">std</a>.<a href="std.unicode.html">unicode</a>;
<span class="tok-kw">const</span> meta = <a href="std.html">std</a>.<a href="std.meta.html">meta</a>;
<span class="tok-kw">const</span> lossyCast = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.lossyCast">lossyCast</a>;
<span class="tok-kw">const</span> expectFmt = <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectFmt">expectFmt</a>;
<span class="tok-kw">const</span> testing = <a href="std.html">std</a>.<a href="std.testing.html">testing</a>;

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> default_max_depth = <span class="tok-number">3</span>;

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> Alignment = <span class="tok-kw">enum</span> {
    left,
    center,
    right,
};

<span class="tok-kw">const</span> default_alignment = .right;
<span class="tok-kw">const</span> default_fill_char = <span class="tok-str">' '</span>;

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> FormatOptions = <span class="tok-kw">struct</span> {
    precision: ?<span class="tok-type">usize</span> = <span class="tok-null">null</span>,
    width: ?<span class="tok-type">usize</span> = <span class="tok-null">null</span>,
    alignment: <a href="std.fmt.Alignment.html">Alignment</a> = <a href="std.fmt.html#std.fmt.default_alignment">default_alignment</a>,
    fill: <span class="tok-type">u21</span> = <a href="std.fmt.html#std.fmt.default_fill_char">default_fill_char</a>,
};

<span class="tok-comment">/// Renders fmt string with args, calling `writer` with slices of bytes.</span>
<span class="tok-comment">/// If `writer` returns an error, the error is returned from `format` and</span>
<span class="tok-comment">/// `writer` is not called again.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// The format string must be comptime-known and may contain placeholders following</span>
<span class="tok-comment">/// this format:</span>
<span class="tok-comment">/// `{[argument][specifier]:[fill][alignment][width].[precision]}`</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// Above, each word including its surrounding [ and ] is a parameter which you have to replace with something:</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// - *argument* is either the numeric index or the field name of the argument that should be inserted</span>
<span class="tok-comment">///   - when using a field name, you are required to enclose the field name (an identifier) in square</span>
<span class="tok-comment">///     brackets, e.g. {[score]...} as opposed to the numeric index form which can be written e.g. {2...}</span>
<span class="tok-comment">/// - *specifier* is a type-dependent formatting option that determines how a type should formatted (see below)</span>
<span class="tok-comment">/// - *fill* is a single unicode codepoint which is used to pad the formatted text</span>
<span class="tok-comment">/// - *alignment* is one of the three bytes '&lt;', '^', or '&gt;' to make the text left-, center-, or right-aligned, respectively</span>
<span class="tok-comment">/// - *width* is the total width of the field in unicode codepoints</span>
<span class="tok-comment">/// - *precision* specifies how many decimals a formatted number should have</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// Note that most of the parameters are optional and may be omitted. Also you can leave out separators like `:` and `.` when</span>
<span class="tok-comment">/// all parameters after the separator are omitted.</span>
<span class="tok-comment">/// Only exception is the *fill* parameter. If a non-zero *fill* character is required at the same time as *width* is specified,</span>
<span class="tok-comment">/// one has to specify *alignment* as well, as otherwise the digit following `:` is interpreted as *width*, not *fill*.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// The *specifier* has several options for types:</span>
<span class="tok-comment">/// - `x` and `X`: output numeric value in hexadecimal notation</span>
<span class="tok-comment">/// - `s`:</span>
<span class="tok-comment">///   - for pointer-to-many and C pointers of u8, print as a C-string using zero-termination</span>
<span class="tok-comment">///   - for slices of u8, print the entire slice as a string without zero-termination</span>
<span class="tok-comment">/// - `e`: output floating point value in scientific notation</span>
<span class="tok-comment">/// - `d`: output numeric value in decimal notation</span>
<span class="tok-comment">/// - `b`: output integer value in binary notation</span>
<span class="tok-comment">/// - `o`: output integer value in octal notation</span>
<span class="tok-comment">/// - `c`: output integer as an ASCII character. Integer type must have 8 bits at max.</span>
<span class="tok-comment">/// - `u`: output integer as an UTF-8 sequence. Integer type must have 21 bits at max.</span>
<span class="tok-comment">/// - `?`: output optional value as either the unwrapped value, or `null`; may be followed by a format specifier for the underlying value.</span>
<span class="tok-comment">/// - `!`: output error union value as either the unwrapped value, or the formatted error value; may be followed by a format specifier for the underlying value.</span>
<span class="tok-comment">/// - `*`: output the address of the value instead of the value itself.</span>
<span class="tok-comment">/// - `any`: output a value of any type using its default format.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// If a formatted user type contains a function of the type</span>
<span class="tok-comment">/// ```</span>
<span class="tok-comment">/// pub fn format(value: ?, comptime fmt: []const u8, options: std.fmt.FormatOptions, writer: anytype) !void</span>
<span class="tok-comment">/// ```</span>
<span class="tok-comment">/// with `?` being the type formatted, this function will be called instead of the default implementation.</span>
<span class="tok-comment">/// This allows user types to be formatted in a logical manner instead of dumping all fields of the type.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// A user type may be a `struct`, `vector`, `union` or `enum` type.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// To print literal curly braces, escape them by writing them twice, e.g. `{{` or `}}`.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
    writer: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    args: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">const</span> ArgsType = <span class="tok-builtin">@TypeOf</span>(args);
    <span class="tok-kw">const</span> args_type_info = <span class="tok-builtin">@typeInfo</span>(ArgsType);
    <span class="tok-kw">if</span> (args_type_info != .@&quot;struct&quot;) {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;expected tuple or struct argument, found &quot;</span> ++ <span class="tok-builtin">@typeName</span>(ArgsType));
    }

    <span class="tok-kw">const</span> fields_info = args_type_info.@&quot;struct&quot;.fields;
    <span class="tok-kw">if</span> (fields_info.len &gt; <a href="std.fmt.html#std.fmt.max_format_args">max_format_args</a>) {
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;32 arguments max are supported per format call&quot;</span>);
    }

    <span class="tok-builtin">@setEvalBranchQuota</span>(<span class="tok-number">2000000</span>);
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> arg_state: <a href="std.fmt.ArgState.html">ArgState</a> = .{ .args_len = fields_info.len };
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> i = <span class="tok-number">0</span>;
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> literal: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;&quot;</span>;
    <span class="tok-kw">inline</span> <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {
        <span class="tok-kw">const</span> start_index = i;

        <span class="tok-kw">inline</span> <span class="tok-kw">while</span> (i &lt; fmt.len) : (i += <span class="tok-number">1</span>) {
            <span class="tok-kw">switch</span> (fmt[i]) {
                <span class="tok-str">'{'</span>, <span class="tok-str">'}'</span> =&gt; <span class="tok-kw">break</span>,
                <span class="tok-kw">else</span> =&gt; {},
            }
        }

        <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> end_index = i;
        <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> unescape_brace = <span class="tok-null">false</span>;<span class="tok-comment">

        // Handle {{ and }}, those are un-escaped as single braces
        </span><span class="tok-kw">if</span> (i + <span class="tok-number">1</span> &lt; fmt.len <span class="tok-kw">and</span> fmt[i + <span class="tok-number">1</span>] == fmt[i]) {
            unescape_brace = <span class="tok-null">true</span>;<span class="tok-comment">
            // Make the first brace part of the literal...
            </span>end_index += <span class="tok-number">1</span>;<span class="tok-comment">
            // ...and skip both
            </span>i += <span class="tok-number">2</span>;
        }

        literal = literal ++ fmt[start_index..end_index];<span class="tok-comment">

        // We've already skipped the other brace, restart the loop
        </span><span class="tok-kw">if</span> (unescape_brace) <span class="tok-kw">continue</span>;<span class="tok-comment">

        // Write out the literal
        </span><span class="tok-kw">if</span> (literal.len != <span class="tok-number">0</span>) {
            <span class="tok-kw">try</span> writer.writeAll(literal);
            literal = <span class="tok-str">&quot;&quot;</span>;
        }

        <span class="tok-kw">if</span> (i &gt;= fmt.len) <span class="tok-kw">break</span>;

        <span class="tok-kw">if</span> (fmt[i] == <span class="tok-str">'}'</span>) {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;missing opening {&quot;</span>);
        }<span class="tok-comment">

        // Get past the {
        </span><span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(fmt[i] == <span class="tok-str">'{'</span>);
        i += <span class="tok-number">1</span>;

        <span class="tok-kw">const</span> fmt_begin = i;<span class="tok-comment">
        // Find the closing brace
        </span><span class="tok-kw">inline</span> <span class="tok-kw">while</span> (i &lt; fmt.len <span class="tok-kw">and</span> fmt[i] != <span class="tok-str">'}'</span>) : (i += <span class="tok-number">1</span>) {}
        <span class="tok-kw">const</span> fmt_end = i;

        <span class="tok-kw">if</span> (i &gt;= fmt.len) {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;missing closing }&quot;</span>);
        }<span class="tok-comment">

        // Get past the }
        </span><span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(fmt[i] == <span class="tok-str">'}'</span>);
        i += <span class="tok-number">1</span>;

        <span class="tok-kw">const</span> placeholder = <span class="tok-kw">comptime</span> <a href="std.fmt.Placeholder.html">Placeholder</a>.<a href="std.fmt.Placeholder.html#std.fmt.Placeholder.parse">parse</a>(fmt[fmt_begin..fmt_end].*);
        <span class="tok-kw">const</span> arg_pos = <span class="tok-kw">comptime</span> <span class="tok-kw">switch</span> (placeholder.arg) {
            .none =&gt; <span class="tok-null">null</span>,
            .number =&gt; |pos| pos,
            .named =&gt; |arg_name| <a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.fieldIndex">fieldIndex</a>(ArgsType, arg_name) <span class="tok-kw">orelse</span>
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;no argument with name '&quot;</span> ++ arg_name ++ <span class="tok-str">&quot;'&quot;</span>),
        };

        <span class="tok-kw">const</span> width = <span class="tok-kw">switch</span> (placeholder.width) {
            .none =&gt; <span class="tok-null">null</span>,
            .number =&gt; |v| v,
            .named =&gt; |arg_name| blk: {
                <span class="tok-kw">const</span> arg_i = <span class="tok-kw">comptime</span> <a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.fieldIndex">fieldIndex</a>(ArgsType, arg_name) <span class="tok-kw">orelse</span>
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;no argument with name '&quot;</span> ++ arg_name ++ <span class="tok-str">&quot;'&quot;</span>);
                _ = <span class="tok-kw">comptime</span> arg_state.nextArg(arg_i) <span class="tok-kw">orelse</span> <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;too few arguments&quot;</span>);
                <span class="tok-kw">break</span> :blk <span class="tok-builtin">@field</span>(args, arg_name);
            },
        };

        <span class="tok-kw">const</span> precision = <span class="tok-kw">switch</span> (placeholder.precision) {
            .none =&gt; <span class="tok-null">null</span>,
            .number =&gt; |v| v,
            .named =&gt; |arg_name| blk: {
                <span class="tok-kw">const</span> arg_i = <span class="tok-kw">comptime</span> <a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.fieldIndex">fieldIndex</a>(ArgsType, arg_name) <span class="tok-kw">orelse</span>
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;no argument with name '&quot;</span> ++ arg_name ++ <span class="tok-str">&quot;'&quot;</span>);
                _ = <span class="tok-kw">comptime</span> arg_state.nextArg(arg_i) <span class="tok-kw">orelse</span> <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;too few arguments&quot;</span>);
                <span class="tok-kw">break</span> :blk <span class="tok-builtin">@field</span>(args, arg_name);
            },
        };

        <span class="tok-kw">const</span> arg_to_print = <span class="tok-kw">comptime</span> arg_state.nextArg(arg_pos) <span class="tok-kw">orelse</span>
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;too few arguments&quot;</span>);

        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(
            <span class="tok-builtin">@field</span>(args, fields_info[arg_to_print].name),
            placeholder.specifier_arg,
            <a href="std.fmt.FormatOptions.html">FormatOptions</a>{
                .fill = placeholder.fill,
                .alignment = placeholder.alignment,
                .width = width,
                .precision = precision,
            },
            writer,
            <a href="std.html">std</a>.<a href="std.html#std.options">options</a>.<a href="#">fmt_max_depth</a>,
        );
    }

    <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> arg_state.hasUnusedArgs()) {
        <span class="tok-kw">const</span> missing_count = arg_state.args_len - <span class="tok-builtin">@popCount</span>(arg_state.used_args);
        <span class="tok-kw">switch</span> (missing_count) {
            <span class="tok-number">0</span> =&gt; <span class="tok-kw">unreachable</span>,
            <span class="tok-number">1</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unused argument in '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>),
            <span class="tok-kw">else</span> =&gt; <span class="tok-builtin">@compileError</span>(<a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d}&quot;</span>, .{missing_count}) ++ <span class="tok-str">&quot; unused arguments in '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>),
        }
    }
}

<span class="tok-kw">fn</span> <span class="tok-fn">cacheString</span>(str: <span class="tok-kw">anytype</span>) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {
    <span class="tok-kw">return</span> &amp;str;
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> Placeholder = <span class="tok-kw">struct</span> {
    specifier_arg: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    fill: <span class="tok-type">u21</span>,
    alignment: <a href="std.fmt.Alignment.html">Alignment</a>,
    arg: <a href="std.fmt.Specifier.html">Specifier</a>,
    width: <a href="std.fmt.Specifier.html">Specifier</a>,
    precision: <a href="std.fmt.Specifier.html">Specifier</a>,

    <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parse</span>(<span class="tok-kw">comptime</span> str: <span class="tok-kw">anytype</span>) <a href="std.fmt.Placeholder.html">Placeholder</a> {
        <span class="tok-kw">const</span> view = <a href="std.html">std</a>.<a href="std.unicode.html">unicode</a>.<a href="std.unicode.Utf8View.html">Utf8View</a>.<a href="std.unicode.Utf8View.html#std.unicode.Utf8View.initComptime">initComptime</a>(&amp;str);
        <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> parser = <a href="std.fmt.Parser.html">Parser</a>{
            .iter = view.iterator(),
        };<span class="tok-comment">

        // Parse the positional argument number
        </span><span class="tok-kw">const</span> arg = <span class="tok-kw">comptime</span> parser.specifier() <span class="tok-kw">catch</span> |err|
            <span class="tok-builtin">@compileError</span>(<span class="tok-builtin">@errorName</span>(err));<span class="tok-comment">

        // Parse the format specifier
        </span><span class="tok-kw">const</span> specifier_arg = <span class="tok-kw">comptime</span> parser.until(<span class="tok-str">':'</span>);<span class="tok-comment">

        // Skip the colon, if present
        </span><span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> parser.char()) |ch| {
            <span class="tok-kw">if</span> (ch != <span class="tok-str">':'</span>) {
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;expected : or }, found '&quot;</span> ++ <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(ch) ++ <span class="tok-str">&quot;'&quot;</span>);
            }
        }<span class="tok-comment">

        // Parse the fill character, if present.
        // When the width field is also specified, the fill character must
        // be followed by an alignment specifier, unless it's '0' (zero)
        // (in which case it's handled as part of the width specifier)
        </span><span class="tok-kw">var</span> fill: ?<span class="tok-type">u21</span> = <span class="tok-kw">comptime</span> <span class="tok-kw">if</span> (parser.peek(<span class="tok-number">1</span>)) |ch|
            <span class="tok-kw">switch</span> (ch) {
                <span class="tok-str">'&lt;'</span>, <span class="tok-str">'^'</span>, <span class="tok-str">'&gt;'</span> =&gt; parser.char(),
                <span class="tok-kw">else</span> =&gt; <span class="tok-null">null</span>,
            }
        <span class="tok-kw">else</span>
            <span class="tok-null">null</span>;<span class="tok-comment">

        // Parse the alignment parameter
        </span><span class="tok-kw">const</span> alignment: ?<a href="std.fmt.Alignment.html">Alignment</a> = <span class="tok-kw">comptime</span> <span class="tok-kw">if</span> (parser.peek(<span class="tok-number">0</span>)) |ch| init: {
            <span class="tok-kw">switch</span> (ch) {
                <span class="tok-str">'&lt;'</span>, <span class="tok-str">'^'</span>, <span class="tok-str">'&gt;'</span> =&gt; {<span class="tok-comment">
                    // consume the character
                    </span><span class="tok-kw">break</span> :init <span class="tok-kw">switch</span> (parser.char().?) {
                        <span class="tok-str">'&lt;'</span> =&gt; .left,
                        <span class="tok-str">'^'</span> =&gt; .center,
                        <span class="tok-kw">else</span> =&gt; .right,
                    };
                },
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">break</span> :init <span class="tok-null">null</span>,
            }
        } <span class="tok-kw">else</span> <span class="tok-null">null</span>;<span class="tok-comment">

        // When none of the fill character and the alignment specifier have
        // been provided, check whether the width starts with a zero.
        </span><span class="tok-kw">if</span> (fill == <span class="tok-null">null</span> <span class="tok-kw">and</span> alignment == <span class="tok-null">null</span>) {
            fill = <span class="tok-kw">comptime</span> <span class="tok-kw">if</span> (parser.peek(<span class="tok-number">0</span>) == <span class="tok-str">'0'</span>) <span class="tok-str">'0'</span> <span class="tok-kw">else</span> <span class="tok-null">null</span>;
        }<span class="tok-comment">

        // Parse the width parameter
        </span><span class="tok-kw">const</span> width = <span class="tok-kw">comptime</span> parser.specifier() <span class="tok-kw">catch</span> |err|
            <span class="tok-builtin">@compileError</span>(<span class="tok-builtin">@errorName</span>(err));<span class="tok-comment">

        // Skip the dot, if present
        </span><span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> parser.char()) |ch| {
            <span class="tok-kw">if</span> (ch != <span class="tok-str">'.'</span>) {
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;expected . or }, found '&quot;</span> ++ <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(ch) ++ <span class="tok-str">&quot;'&quot;</span>);
            }
        }<span class="tok-comment">

        // Parse the precision parameter
        </span><span class="tok-kw">const</span> precision = <span class="tok-kw">comptime</span> parser.specifier() <span class="tok-kw">catch</span> |err|
            <span class="tok-builtin">@compileError</span>(<span class="tok-builtin">@errorName</span>(err));

        <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> parser.char()) |ch| {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;extraneous trailing character '&quot;</span> ++ <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(ch) ++ <span class="tok-str">&quot;'&quot;</span>);
        }

        <span class="tok-kw">return</span> <a href="std.fmt.Placeholder.html">Placeholder</a>{
            .specifier_arg = <a href="std.fmt.html#std.fmt.cacheString">cacheString</a>(specifier_arg[<span class="tok-number">0</span>..specifier_arg.len].*),
            .fill = fill <span class="tok-kw">orelse</span> <a href="std.fmt.html#std.fmt.default_fill_char">default_fill_char</a>,
            .alignment = alignment <span class="tok-kw">orelse</span> <a href="std.fmt.html#std.fmt.default_alignment">default_alignment</a>,
            .arg = arg,
            .width = width,
            .precision = precision,
        };
    }
};

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> Specifier = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>) {
    none,
    number: <span class="tok-type">usize</span>,
    named: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
};

<span class="tok-comment">/// A stream based parser for format strings.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// Allows to implement formatters compatible with std.fmt without replicating</span>
<span class="tok-comment">/// the standard library behavior.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">const</span> Parser = <span class="tok-kw">struct</span> {
    iter: <a href="std.html">std</a>.<a href="std.unicode.html">unicode</a>.<a href="std.unicode.Utf8Iterator.html">Utf8Iterator</a>,<span class="tok-comment">

    // Returns a decimal number or null if the current character is not a
    // digit
    </span><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">number</span>(self: *<span class="tok-builtin">@This</span>()) ?<span class="tok-type">usize</span> {
        <span class="tok-kw">var</span> r: ?<span class="tok-type">usize</span> = <span class="tok-null">null</span>;

        <span class="tok-kw">while</span> (self.peek(<span class="tok-number">0</span>)) |code_point| {
            <span class="tok-kw">switch</span> (code_point) {
                <span class="tok-str">'0'</span>...<span class="tok-str">'9'</span> =&gt; {
                    <span class="tok-kw">if</span> (r == <span class="tok-null">null</span>) r = <span class="tok-number">0</span>;
                    r.? *= <span class="tok-number">10</span>;
                    r.? += code_point - <span class="tok-str">'0'</span>;
                },
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">break</span>,
            }
            _ = self.iter.nextCodepoint();
        }

        <span class="tok-kw">return</span> r;
    }<span class="tok-comment">

    // Returns a substring of the input starting from the current position
    // and ending where `ch` is found or until the end if not found
    </span><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">until</span>(self: *<span class="tok-builtin">@This</span>(), ch: <span class="tok-type">u21</span>) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {
        <span class="tok-kw">const</span> start = self.iter.i;
        <span class="tok-kw">while</span> (self.peek(<span class="tok-number">0</span>)) |code_point| {
            <span class="tok-kw">if</span> (code_point == ch)
                <span class="tok-kw">break</span>;
            _ = self.iter.nextCodepoint();
        }
        <span class="tok-kw">return</span> self.iter.bytes[start..self.iter.i];
    }<span class="tok-comment">

    // Returns the character pointed to by the iterator if available, or
    // null otherwise
    </span><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">char</span>(self: *<span class="tok-builtin">@This</span>()) ?<span class="tok-type">u21</span> {
        <span class="tok-kw">if</span> (self.iter.nextCodepoint()) |code_point| {
            <span class="tok-kw">return</span> code_point;
        }
        <span class="tok-kw">return</span> <span class="tok-null">null</span>;
    }<span class="tok-comment">

    // Returns true if the iterator points to an existing character and
    // false otherwise
    </span><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">maybe</span>(self: *<span class="tok-builtin">@This</span>(), val: <span class="tok-type">u21</span>) <span class="tok-type">bool</span> {
        <span class="tok-kw">if</span> (self.peek(<span class="tok-number">0</span>) == val) {
            _ = self.iter.nextCodepoint();
            <span class="tok-kw">return</span> <span class="tok-null">true</span>;
        }
        <span class="tok-kw">return</span> <span class="tok-null">false</span>;
    }<span class="tok-comment">

    // Returns a decimal number or null if the current character is not a
    // digit
    </span><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">specifier</span>(self: *<span class="tok-builtin">@This</span>()) !<a href="std.fmt.Specifier.html">Specifier</a> {
        <span class="tok-kw">if</span> (self.maybe(<span class="tok-str">'['</span>)) {
            <span class="tok-kw">const</span> arg_name = self.until(<span class="tok-str">']'</span>);

            <span class="tok-kw">if</span> (!self.maybe(<span class="tok-str">']'</span>))
                <span class="tok-kw">return</span> <span class="tok-builtin">@field</span>(<span class="tok-type">anyerror</span>, <span class="tok-str">&quot;Expected closing ]&quot;</span>);

            <span class="tok-kw">return</span> <a href="std.fmt.Specifier.html">Specifier</a>{ .named = arg_name };
        }
        <span class="tok-kw">if</span> (self.number()) |i|
            <span class="tok-kw">return</span> <a href="std.fmt.Specifier.html">Specifier</a>{ .number = i };

        <span class="tok-kw">return</span> <a href="std.fmt.Specifier.html">Specifier</a>{ .none = {} };
    }<span class="tok-comment">

    // Returns the n-th next character or null if that's past the end
    </span><span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">peek</span>(self: *<span class="tok-builtin">@This</span>(), n: <span class="tok-type">usize</span>) ?<span class="tok-type">u21</span> {
        <span class="tok-kw">const</span> original_i = self.iter.i;
        <span class="tok-kw">defer</span> self.iter.i = original_i;

        <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
        <span class="tok-kw">var</span> code_point: ?<span class="tok-type">u21</span> = <span class="tok-null">null</span>;
        <span class="tok-kw">while</span> (i &lt;= n) : (i += <span class="tok-number">1</span>) {
            code_point = self.iter.nextCodepoint();
            <span class="tok-kw">if</span> (code_point == <span class="tok-null">null</span>) <span class="tok-kw">return</span> <span class="tok-null">null</span>;
        }
        <span class="tok-kw">return</span> code_point;
    }
};

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> ArgSetType = <span class="tok-type">u32</span>;
<span class="tok-kw">const</span> max_format_args = <span class="tok-builtin">@typeInfo</span>(<a href="std.fmt.html#std.fmt.ArgSetType">ArgSetType</a>).int.bits;

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> ArgState = <span class="tok-kw">struct</span> {
    next_arg: <span class="tok-type">usize</span> = <span class="tok-number">0</span>,
    used_args: <a href="std.fmt.html#std.fmt.ArgSetType">ArgSetType</a> = <span class="tok-number">0</span>,
    args_len: <span class="tok-type">usize</span>,

    <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hasUnusedArgs</span>(self: *<span class="tok-builtin">@This</span>()) <span class="tok-type">bool</span> {
        <span class="tok-kw">return</span> <span class="tok-builtin">@popCount</span>(self.used_args) != self.args_len;
    }

    <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">nextArg</span>(self: *<span class="tok-builtin">@This</span>(), arg_index: ?<span class="tok-type">usize</span>) ?<span class="tok-type">usize</span> {
        <span class="tok-kw">const</span> next_index = arg_index <span class="tok-kw">orelse</span> init: {
            <span class="tok-kw">const</span> arg = self.next_arg;
            self.next_arg += <span class="tok-number">1</span>;
            <span class="tok-kw">break</span> :init arg;
        };

        <span class="tok-kw">if</span> (next_index &gt;= self.args_len) {
            <span class="tok-kw">return</span> <span class="tok-null">null</span>;
        }<span class="tok-comment">

        // Mark this argument as used
        </span>self.used_args |= <span class="tok-builtin">@as</span>(<a href="std.fmt.html#std.fmt.ArgSetType">ArgSetType</a>, <span class="tok-number">1</span>) &lt;&lt; <span class="tok-builtin">@as</span>(<span class="tok-type">u5</span>, <span class="tok-builtin">@intCast</span>(next_index));
        <span class="tok-kw">return</span> next_index;
    }
};

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatAddress</span>(value: <span class="tok-kw">anytype</span>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
    _ = options;
    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);

    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .pointer =&gt; |info| {
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(info.child) ++ <span class="tok-str">&quot;@&quot;</span>);
            <span class="tok-kw">if</span> (info.size == .slice)
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(<span class="tok-builtin">@intFromPtr</span>(value.ptr), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, writer)
            <span class="tok-kw">else</span>
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(<span class="tok-builtin">@intFromPtr</span>(value), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, writer);
            <span class="tok-kw">return</span>;
        },
        .optional =&gt; |info| {
            <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(info.child) == .pointer) {
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(info.child) ++ <span class="tok-str">&quot;@&quot;</span>);
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(<span class="tok-builtin">@intFromPtr</span>(value), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, writer);
                <span class="tok-kw">return</span>;
            }
        },
        <span class="tok-kw">else</span> =&gt; {},
    }

    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format non-pointer type &quot;</span> ++ <span class="tok-builtin">@typeName</span>(T) ++ <span class="tok-str">&quot; with * specifier&quot;</span>);
}<span class="tok-comment">

// This ANY const is a workaround for: https://github.com/ziglang/zig/issues/7948
</span><span class="tok-kw">const</span> ANY = <span class="tok-str">&quot;any&quot;</span>;

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">defaultSpec</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>) [:<span class="tok-number">0</span>]<span class="tok-kw">const</span> <span class="tok-type">u8</span> {
    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .array, .vector =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.ANY">ANY</a>,
        .pointer =&gt; |ptr_info| <span class="tok-kw">switch</span> (ptr_info.size) {
            .one =&gt; <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(ptr_info.child)) {
                .array =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.ANY">ANY</a>,
                <span class="tok-kw">else</span> =&gt; {},
            },
            .many, .c =&gt; <span class="tok-kw">return</span> <span class="tok-str">&quot;*&quot;</span>,
            .slice =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.ANY">ANY</a>,
        },
        .optional =&gt; |info| <span class="tok-kw">return</span> <span class="tok-str">&quot;?&quot;</span> ++ <a href="std.fmt.html#std.fmt.defaultSpec">defaultSpec</a>(info.child),
        .error_union =&gt; |info| <span class="tok-kw">return</span> <span class="tok-str">&quot;!&quot;</span> ++ <a href="std.fmt.html#std.fmt.defaultSpec">defaultSpec</a>(info.payload),
        <span class="tok-kw">else</span> =&gt; {},
    }
    <span class="tok-kw">return</span> <span class="tok-str">&quot;&quot;</span>;
}

<span class="tok-kw">fn</span> <span class="tok-fn">stripOptionalOrErrorUnionSpec</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) []<span class="tok-kw">const</span> <span class="tok-type">u8</span> {
    <span class="tok-kw">return</span> <span class="tok-kw">if</span> (<a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt[<span class="tok-number">1</span>..], <a href="std.fmt.html#std.fmt.ANY">ANY</a>))
        <a href="std.fmt.html#std.fmt.ANY">ANY</a>
    <span class="tok-kw">else</span>
        fmt[<span class="tok-number">1</span>..];
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">invalidFmtError</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>) <span class="tok-type">void</span> {
    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;invalid format string '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;' for type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(<span class="tok-builtin">@TypeOf</span>(value)) ++ <span class="tok-str">&quot;'&quot;</span>);
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatType</span>(
    value: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
    max_depth: <span class="tok-type">usize</span>,
) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);
    <span class="tok-kw">const</span> actual_fmt = <span class="tok-kw">comptime</span> <span class="tok-kw">if</span> (<a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <a href="std.fmt.html#std.fmt.ANY">ANY</a>))
        <a href="std.fmt.html#std.fmt.defaultSpec">defaultSpec</a>(T)
    <span class="tok-kw">else</span> <span class="tok-kw">if</span> (fmt.len != <span class="tok-number">0</span> <span class="tok-kw">and</span> (fmt[<span class="tok-number">0</span>] == <span class="tok-str">'?'</span> <span class="tok-kw">or</span> fmt[<span class="tok-number">0</span>] == <span class="tok-str">'!'</span>)) <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .optional, .error_union =&gt; fmt,
        <span class="tok-kw">else</span> =&gt; <a href="std.fmt.html#std.fmt.stripOptionalOrErrorUnionSpec">stripOptionalOrErrorUnionSpec</a>(fmt),
    } <span class="tok-kw">else</span> fmt;

    <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, actual_fmt, <span class="tok-str">&quot;*&quot;</span>)) {
        <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatAddress">formatAddress</a>(value, options, writer);
    }

    <span class="tok-kw">if</span> (<a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.hasMethod">hasMethod</a>(T, <span class="tok-str">&quot;format&quot;</span>)) {
        <span class="tok-kw">return</span> <span class="tok-kw">try</span> value.format(actual_fmt, options, writer);
    }

    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .<span class="tok-type">comptime_int</span>, .int, .<span class="tok-type">comptime_float</span>, .float =&gt; {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatValue">formatValue</a>(value, actual_fmt, options, writer);
        },
        .<span class="tok-type">void</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;void&quot;</span>, options, writer);
        },
        .<span class="tok-type">bool</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-kw">if</span> (value) <span class="tok-str">&quot;true&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;false&quot;</span>, options, writer);
        },
        .optional =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> actual_fmt[<span class="tok-number">0</span>] != <span class="tok-str">'?'</span>)
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format optional without a specifier (i.e. {?} or {any})&quot;</span>);
            <span class="tok-kw">const</span> remaining_fmt = <span class="tok-kw">comptime</span> <a href="std.fmt.html#std.fmt.stripOptionalOrErrorUnionSpec">stripOptionalOrErrorUnionSpec</a>(actual_fmt);
            <span class="tok-kw">if</span> (value) |payload| {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(payload, remaining_fmt, options, writer, max_depth);
            } <span class="tok-kw">else</span> {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;null&quot;</span>, options, writer);
            }
        },
        .error_union =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> actual_fmt[<span class="tok-number">0</span>] != <span class="tok-str">'!'</span>)
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format error union without a specifier (i.e. {!} or {any})&quot;</span>);
            <span class="tok-kw">const</span> remaining_fmt = <span class="tok-kw">comptime</span> <a href="std.fmt.html#std.fmt.stripOptionalOrErrorUnionSpec">stripOptionalOrErrorUnionSpec</a>(actual_fmt);
            <span class="tok-kw">if</span> (value) |payload| {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(payload, remaining_fmt, options, writer, max_depth);
            } <span class="tok-kw">else</span> |err| {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(err, <span class="tok-str">&quot;&quot;</span>, options, writer, max_depth);
            }
        },
        .error_set =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;error.&quot;</span>);
            <span class="tok-kw">return</span> writer.writeAll(<span class="tok-builtin">@errorName</span>(value));
        },
        .@&quot;enum&quot; =&gt; |enumInfo| {
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(T));
            <span class="tok-kw">if</span> (enumInfo.is_exhaustive) {
                <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@tagName</span>(value));
                <span class="tok-kw">return</span>;
            }<span class="tok-comment">

            // Use @tagName only if value is one of known fields
            </span><span class="tok-builtin">@setEvalBranchQuota</span>(<span class="tok-number">3</span> * enumInfo.fields.len);
            <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (enumInfo.fields) |enumField| {
                <span class="tok-kw">if</span> (<span class="tok-builtin">@intFromEnum</span>(value) == enumField.value) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@tagName</span>(value));
                    <span class="tok-kw">return</span>;
                }
            }

            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;(&quot;</span>);
            <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@intFromEnum</span>(value), actual_fmt, options, writer, max_depth);
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;)&quot;</span>);
        },
        .@&quot;union&quot; =&gt; |info| {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(T));
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">if</span> (info.tag_type) |UnionTagType| {
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ .&quot;</span>);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@tagName</span>(<span class="tok-builtin">@as</span>(UnionTagType, value)));
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; = &quot;</span>);
                <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (info.fields) |u_field| {
                    <span class="tok-kw">if</span> (value == <span class="tok-builtin">@field</span>(UnionTagType, u_field.name)) {
                        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@field</span>(value, u_field.name), <a href="std.fmt.html#std.fmt.ANY">ANY</a>, options, writer, max_depth - <span class="tok-number">1</span>);
                    }
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
            } <span class="tok-kw">else</span> {
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;@{x}&quot;</span>, .{<span class="tok-builtin">@intFromPtr</span>(&amp;value)});
            }
        },
        .@&quot;struct&quot; =&gt; |info| {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">if</span> (info.is_tuple) {<span class="tok-comment">
                // Skip the type and field names when formatting tuples.
                </span><span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                    <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{&quot;</span>);
                <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (info.fields, <span class="tok-number">0</span>..) |f, i| {
                    <span class="tok-kw">if</span> (i == <span class="tok-number">0</span>) {
                        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; &quot;</span>);
                    } <span class="tok-kw">else</span> {
                        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                    }
                    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@field</span>(value, f.name), <a href="std.fmt.html#std.fmt.ANY">ANY</a>, options, writer, max_depth - <span class="tok-number">1</span>);
                }
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-builtin">@typeName</span>(T));
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{&quot;</span>);
            <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (info.fields, <span class="tok-number">0</span>..) |f, i| {
                <span class="tok-kw">if</span> (i == <span class="tok-number">0</span>) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; .&quot;</span>);
                } <span class="tok-kw">else</span> {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, .&quot;</span>);
                }
                <span class="tok-kw">try</span> writer.writeAll(f.name);
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; = &quot;</span>);
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-builtin">@field</span>(value, f.name), <a href="std.fmt.html#std.fmt.ANY">ANY</a>, options, writer, max_depth - <span class="tok-number">1</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
        },
        .pointer =&gt; |ptr_info| <span class="tok-kw">switch</span> (ptr_info.size) {
            .one =&gt; <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(ptr_info.child)) {
                .array, .@&quot;enum&quot;, .@&quot;union&quot;, .@&quot;struct&quot; =&gt; {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(value.*, actual_fmt, options, writer, max_depth);
                },
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;{s}@{x}&quot;</span>, .{ <span class="tok-builtin">@typeName</span>(ptr_info.child), <span class="tok-builtin">@intFromPtr</span>(value) }),
            },
            .many, .c =&gt; {
                <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span>)
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format pointer without a specifier (i.e. {s} or {*})&quot;</span>);
                <span class="tok-kw">if</span> (ptr_info.sentinel() != <span class="tok-null">null</span>) {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.span">span</a>(value), actual_fmt, options, writer, max_depth);
                }
                <span class="tok-kw">if</span> (actual_fmt[<span class="tok-number">0</span>] == <span class="tok-str">'s'</span> <span class="tok-kw">and</span> ptr_info.child == <span class="tok-type">u8</span>) {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.span">span</a>(value), options, writer);
                }
                <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            },
            .slice =&gt; {
                <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span>)
                    <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format slice without a specifier (i.e. {s} or {any})&quot;</span>);
                <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                    <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
                }
                <span class="tok-kw">if</span> (actual_fmt[<span class="tok-number">0</span>] == <span class="tok-str">'s'</span> <span class="tok-kw">and</span> ptr_info.child == <span class="tok-type">u8</span>) {
                    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(value, options, writer);
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ &quot;</span>);
                <span class="tok-kw">for</span> (value, <span class="tok-number">0</span>..) |elem, i| {
                    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(elem, actual_fmt, options, writer, max_depth - <span class="tok-number">1</span>);
                    <span class="tok-kw">if</span> (i != value.len - <span class="tok-number">1</span>) {
                        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                    }
                }
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
            },
        },
        .array =&gt; |info| {
            <span class="tok-kw">if</span> (actual_fmt.len == <span class="tok-number">0</span>)
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot format array without a specifier (i.e. {s} or {any})&quot;</span>);
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">if</span> (actual_fmt[<span class="tok-number">0</span>] == <span class="tok-str">'s'</span> <span class="tok-kw">and</span> info.child == <span class="tok-type">u8</span>) {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(&amp;value, options, writer);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ &quot;</span>);
            <span class="tok-kw">for</span> (value, <span class="tok-number">0</span>..) |elem, i| {
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(elem, actual_fmt, options, writer, max_depth - <span class="tok-number">1</span>);
                <span class="tok-kw">if</span> (i &lt; value.len - <span class="tok-number">1</span>) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                }
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
        },
        .vector =&gt; |info| {
            <span class="tok-kw">if</span> (max_depth == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;{ ... }&quot;</span>);
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;{ &quot;</span>);
            <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
            <span class="tok-kw">while</span> (i &lt; info.len) : (i += <span class="tok-number">1</span>) {
                <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(value[i], actual_fmt, options, writer, max_depth - <span class="tok-number">1</span>);
                <span class="tok-kw">if</span> (i &lt; info.len - <span class="tok-number">1</span>) {
                    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;, &quot;</span>);
                }
            }
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot; }&quot;</span>);
        },
        .@&quot;fn&quot; =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unable to format function body type, use '*const &quot;</span> ++ <span class="tok-builtin">@typeName</span>(T) ++ <span class="tok-str">&quot;' for a function pointer type&quot;</span>),
        .<span class="tok-type">type</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-builtin">@typeName</span>(value), options, writer);
        },
        .enum_literal =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">const</span> buffer = [_]<span class="tok-type">u8</span>{<span class="tok-str">'.'</span>} ++ <span class="tok-builtin">@tagName</span>(value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buffer, options, writer);
        },
        .<span class="tok-null">null</span> =&gt; {
            <span class="tok-kw">if</span> (actual_fmt.len != <span class="tok-number">0</span>) <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;null&quot;</span>, options, writer);
        },
        <span class="tok-kw">else</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unable to format type '&quot;</span> ++ <span class="tok-builtin">@typeName</span>(T) ++ <span class="tok-str">&quot;'&quot;</span>),
    }
}

<span class="tok-kw">fn</span> <span class="tok-fn">formatValue</span>(
    value: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);
    <span class="tok-kw">switch</span> (<span class="tok-builtin">@typeInfo</span>(T)) {
        .float, .<span class="tok-type">comptime_float</span> =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatFloatValue">formatFloatValue</a>(value, fmt, options, writer),
        .int, .<span class="tok-type">comptime_int</span> =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatIntValue">formatIntValue</a>(value, fmt, options, writer),
        .<span class="tok-type">bool</span> =&gt; <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-kw">if</span> (value) <span class="tok-str">&quot;true&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;false&quot;</span>, options, writer),
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">comptime</span> <span class="tok-kw">unreachable</span>,
    }
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatIntValue</span>(
    value: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> base = <span class="tok-number">10</span>;
    <span class="tok-kw">comptime</span> <span class="tok-kw">var</span> case: <a href="std.fmt.Case.html">Case</a> = .lower;

    <span class="tok-kw">const</span> int_value = <span class="tok-kw">if</span> (<span class="tok-builtin">@TypeOf</span>(value) == <span class="tok-type">comptime_int</span>) blk: {
        <span class="tok-kw">const</span> Int = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.IntFittingRange">IntFittingRange</a>(value, value);
        <span class="tok-kw">break</span> :blk <span class="tok-builtin">@as</span>(Int, value);
    } <span class="tok-kw">else</span> value;

    <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> <span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;d&quot;</span>)) {
        base = <span class="tok-number">10</span>;
        case = .lower;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;c&quot;</span>)) {
        <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(int_value)).int.bits &lt;= <span class="tok-number">8</span>) {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatAsciiChar">formatAsciiChar</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, int_value), options, writer);
        } <span class="tok-kw">else</span> {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot print integer that is larger than 8 bits as an ASCII character&quot;</span>);
        }
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;u&quot;</span>)) {
        <span class="tok-kw">if</span> (<span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(int_value)).int.bits &lt;= <span class="tok-number">21</span>) {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatUnicodeCodepoint">formatUnicodeCodepoint</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u21</span>, int_value), options, writer);
        } <span class="tok-kw">else</span> {
            <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;cannot print integer that is larger than 21 bits as an UTF-8 sequence&quot;</span>);
        }
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;b&quot;</span>)) {
        base = <span class="tok-number">2</span>;
        case = .lower;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;x&quot;</span>)) {
        base = <span class="tok-number">16</span>;
        case = .lower;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;X&quot;</span>)) {
        base = <span class="tok-number">16</span>;
        case = .upper;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;o&quot;</span>)) {
        base = <span class="tok-number">8</span>;
        case = .lower;
    } <span class="tok-kw">else</span> {
        <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
    }

    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(int_value, base, case, options, writer);
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> format_float = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;fmt/format_float.zig&quot;</span>);
<span class="tok-kw">pub</span> <span class="tok-kw">const</span> formatFloat = <a href="std.fmt.format_float.html">format_float</a>.<a href="std.fmt.format_float.html#std.fmt.format_float.formatFloat">formatFloat</a>;
<span class="tok-kw">pub</span> <span class="tok-kw">const</span> FormatFloatError = <a href="std.fmt.format_float.html">format_float</a>.<a href="std.fmt.format_float.html#std.fmt.format_float.FormatError">FormatError</a>;

<span class="tok-kw">fn</span> <span class="tok-fn">formatFloatValue</span>(
    value: <span class="tok-kw">anytype</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">var</span> buf: [<a href="std.fmt.format_float.html">format_float</a>.<a href="std.fmt.format_float.html#std.fmt.format_float.bufferSize">bufferSize</a>(.decimal, <span class="tok-type">f64</span>)]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;

    <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> <span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;e&quot;</span>)) {
        <span class="tok-kw">const</span> s = <a href="std.fmt.format_float.html#std.fmt.format_float.formatFloat">formatFloat</a>(&amp;buf, value, .{ .mode = .scientific, .precision = options.precision }) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
            <span class="tok-kw">error</span>.BufferTooSmall =&gt; <span class="tok-str">&quot;(float)&quot;</span>,
        };
        <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(s, options, writer);
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;d&quot;</span>)) {
        <span class="tok-kw">const</span> s = <a href="std.fmt.format_float.html#std.fmt.format_float.formatFloat">formatFloat</a>(&amp;buf, value, .{ .mode = .decimal, .precision = options.precision }) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
            <span class="tok-kw">error</span>.BufferTooSmall =&gt; <span class="tok-str">&quot;(float)&quot;</span>,
        };
        <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(s, options, writer);
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;x&quot;</span>)) {
        <span class="tok-kw">var</span> buf_stream = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(&amp;buf);
        <a href="std.fmt.html#std.fmt.formatFloatHexadecimal">formatFloatHexadecimal</a>(value, options, buf_stream.writer()) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
            <span class="tok-kw">error</span>.NoSpaceLeft =&gt; <span class="tok-kw">unreachable</span>,
        };
        <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buf_stream.getWritten(), options, writer);
    } <span class="tok-kw">else</span> {
        <a href="std.fmt.html#std.fmt.invalidFmtError">invalidFmtError</a>(fmt, value);
    }
}

<span class="tok-kw">test</span> {
    _ = &amp;<a href="std.fmt.format_float.html">format_float</a>;
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> Case = <span class="tok-kw">enum</span> { lower, upper };

<span class="tok-kw">fn</span> <span class="tok-fn">SliceHex</span>(<span class="tok-kw">comptime</span> case: <a href="std.fmt.Case.html">Case</a>) <span class="tok-type">type</span> {
    <span class="tok-kw">const</span> charset = <span class="tok-str">&quot;0123456789&quot;</span> ++ <span class="tok-kw">if</span> (case == .upper) <span class="tok-str">&quot;ABCDEF&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;abcdef&quot;</span>;

    <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {
        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) !<span class="tok-type">void</span> {
            _ = fmt;
            _ = options;
            <span class="tok-kw">var</span> buf: [<span class="tok-number">2</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;

            <span class="tok-kw">for</span> (bytes) |c| {
                buf[<span class="tok-number">0</span>] = charset[c &gt;&gt; <span class="tok-number">4</span>];
                buf[<span class="tok-number">1</span>] = charset[c &amp; <span class="tok-number">15</span>];
                <span class="tok-kw">try</span> writer.writeAll(&amp;buf);
            }
        }
    };
}

<span class="tok-kw">const</span> formatSliceHexLower = <a href="std.fmt.html#std.fmt.SliceHex">SliceHex</a>(.lower).format;
<span class="tok-kw">const</span> formatSliceHexUpper = <a href="std.fmt.html#std.fmt.SliceHex">SliceHex</a>(.upper).format;

<span class="tok-comment">/// Return a Formatter for a []const u8 where every byte is formatted as a pair</span>
<span class="tok-comment">/// of lowercase hexadecimal digits.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceHexLower</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceHexLower">formatSliceHexLower</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}

<span class="tok-comment">/// Return a Formatter for a []const u8 where every byte is formatted as pair</span>
<span class="tok-comment">/// of uppercase hexadecimal digits.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceHexUpper</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceHexUpper">formatSliceHexUpper</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}

<span class="tok-kw">fn</span> <span class="tok-fn">SliceEscape</span>(<span class="tok-kw">comptime</span> case: <a href="std.fmt.Case.html">Case</a>) <span class="tok-type">type</span> {
    <span class="tok-kw">const</span> charset = <span class="tok-str">&quot;0123456789&quot;</span> ++ <span class="tok-kw">if</span> (case == .upper) <span class="tok-str">&quot;ABCDEF&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;abcdef&quot;</span>;

    <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {
        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) !<span class="tok-type">void</span> {
            _ = fmt;
            _ = options;
            <span class="tok-kw">var</span> buf: [<span class="tok-number">4</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;

            buf[<span class="tok-number">0</span>] = <span class="tok-str">'\\'</span>;
            buf[<span class="tok-number">1</span>] = <span class="tok-str">'x'</span>;

            <span class="tok-kw">for</span> (bytes) |c| {
                <span class="tok-kw">if</span> (<a href="std.html">std</a>.<a href="std.ascii.html">ascii</a>.<a href="std.ascii.html#std.ascii.isPrint">isPrint</a>(c)) {
                    <span class="tok-kw">try</span> writer.writeByte(c);
                } <span class="tok-kw">else</span> {
                    buf[<span class="tok-number">2</span>] = charset[c &gt;&gt; <span class="tok-number">4</span>];
                    buf[<span class="tok-number">3</span>] = charset[c &amp; <span class="tok-number">15</span>];
                    <span class="tok-kw">try</span> writer.writeAll(&amp;buf);
                }
            }
        }
    };
}

<span class="tok-kw">const</span> formatSliceEscapeLower = <a href="std.fmt.html#std.fmt.SliceEscape">SliceEscape</a>(.lower).format;
<span class="tok-kw">const</span> formatSliceEscapeUpper = <a href="std.fmt.html#std.fmt.SliceEscape">SliceEscape</a>(.upper).format;

<span class="tok-comment">/// Return a Formatter for a []const u8 where every non-printable ASCII</span>
<span class="tok-comment">/// character is escaped as \xNN, where NN is the character in lowercase</span>
<span class="tok-comment">/// hexadecimal notation.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceEscapeLower</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceEscapeLower">formatSliceEscapeLower</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}

<span class="tok-comment">/// Return a Formatter for a []const u8 where every non-printable ASCII</span>
<span class="tok-comment">/// character is escaped as \xNN, where NN is the character in uppercase</span>
<span class="tok-comment">/// hexadecimal notation.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtSliceEscapeUpper</span>(bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSliceEscapeUpper">formatSliceEscapeUpper</a>) {
    <span class="tok-kw">return</span> .{ .data = bytes };
}

<span class="tok-kw">fn</span> <span class="tok-fn">Size</span>(<span class="tok-kw">comptime</span> base: <span class="tok-type">comptime_int</span>) <span class="tok-type">type</span> {
    <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {
        <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            value: <span class="tok-type">u64</span>,
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) !<span class="tok-type">void</span> {
            _ = fmt;
            <span class="tok-kw">if</span> (value == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-str">&quot;0B&quot;</span>, options, writer);
            }<span class="tok-comment">
            // The worst case in terms of space needed is 32 bytes + 3 for the suffix.
            </span><span class="tok-kw">var</span> buf: [<a href="std.fmt.format_float.html">format_float</a>.<a href="std.fmt.format_float.html#std.fmt.format_float.min_buffer_size">min_buffer_size</a> + <span class="tok-number">3</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;

            <span class="tok-kw">const</span> mags_si = <span class="tok-str">&quot; kMGTPEZY&quot;</span>;
            <span class="tok-kw">const</span> mags_iec = <span class="tok-str">&quot; KMGTPEZY&quot;</span>;

            <span class="tok-kw">const</span> log2 = <a href="std.math.html">math</a>.<a href="std.math.log2.html#std.math.log2.log2">log2</a>(value);
            <span class="tok-kw">const</span> magnitude = <span class="tok-kw">switch</span> (base) {
                <span class="tok-number">1000</span> =&gt; <span class="tok-builtin">@min</span>(log2 / <span class="tok-kw">comptime</span> <a href="std.math.html">math</a>.<a href="std.math.log2.html#std.math.log2.log2">log2</a>(<span class="tok-number">1000</span>), mags_si.len - <span class="tok-number">1</span>),
                <span class="tok-number">1024</span> =&gt; <span class="tok-builtin">@min</span>(log2 / <span class="tok-number">10</span>, mags_iec.len - <span class="tok-number">1</span>),
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
            };
            <span class="tok-kw">const</span> new_value = <a href="std.math.html#std.math.lossyCast">lossyCast</a>(<span class="tok-type">f64</span>, value) / <a href="std.math.html">math</a>.<a href="std.math.pow.html#std.math.pow.pow">pow</a>(<span class="tok-type">f64</span>, <a href="std.math.html#std.math.lossyCast">lossyCast</a>(<span class="tok-type">f64</span>, base), <a href="std.math.html#std.math.lossyCast">lossyCast</a>(<span class="tok-type">f64</span>, magnitude));
            <span class="tok-kw">const</span> suffix = <span class="tok-kw">switch</span> (base) {
                <span class="tok-number">1000</span> =&gt; mags_si[magnitude],
                <span class="tok-number">1024</span> =&gt; mags_iec[magnitude],
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
            };

            <span class="tok-kw">const</span> s = <span class="tok-kw">switch</span> (magnitude) {
                <span class="tok-number">0</span> =&gt; buf[<span class="tok-number">0</span>..<a href="std.fmt.html#std.fmt.formatIntBuf">formatIntBuf</a>(&amp;buf, value, <span class="tok-number">10</span>, .lower, .{})],
                <span class="tok-kw">else</span> =&gt; <a href="std.fmt.format_float.html#std.fmt.format_float.formatFloat">formatFloat</a>(&amp;buf, new_value, .{ .mode = .decimal, .precision = options.precision }) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
                    <span class="tok-kw">error</span>.BufferTooSmall =&gt; <span class="tok-kw">unreachable</span>,
                },
            };

            <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = s.len;
            <span class="tok-kw">if</span> (suffix == <span class="tok-str">' '</span>) {
                buf[i] = <span class="tok-str">'B'</span>;
                i += <span class="tok-number">1</span>;
            } <span class="tok-kw">else</span> <span class="tok-kw">switch</span> (base) {
                <span class="tok-number">1000</span> =&gt; {
                    buf[i..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].* = [_]<span class="tok-type">u8</span>{ suffix, <span class="tok-str">'B'</span> };
                    i += <span class="tok-number">2</span>;
                },
                <span class="tok-number">1024</span> =&gt; {
                    buf[i..][<span class="tok-number">0</span>..<span class="tok-number">3</span>].* = [_]<span class="tok-type">u8</span>{ suffix, <span class="tok-str">'i'</span>, <span class="tok-str">'B'</span> };
                    i += <span class="tok-number">3</span>;
                },
                <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
            }

            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buf[<span class="tok-number">0</span>..i], options, writer);
        }
    };
}
<span class="tok-kw">const</span> formatSizeDec = <a href="std.fmt.html#std.fmt.Size">Size</a>(<span class="tok-number">1000</span>).format;
<span class="tok-kw">const</span> formatSizeBin = <a href="std.fmt.html#std.fmt.Size">Size</a>(<span class="tok-number">1024</span>).format;

<span class="tok-comment">/// Return a Formatter for a u64 value representing a file size.</span>
<span class="tok-comment">/// This formatter represents the number as multiple of 1000 and uses the SI</span>
<span class="tok-comment">/// measurement units (kB, MB, GB, ...).</span>
<span class="tok-comment">/// Format option `precision` is ignored when `value` is less than 1kB</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtIntSizeDec</span>(value: <span class="tok-type">u64</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSizeDec">formatSizeDec</a>) {
    <span class="tok-kw">return</span> .{ .data = value };
}

<span class="tok-comment">/// Return a Formatter for a u64 value representing a file size.</span>
<span class="tok-comment">/// This formatter represents the number as multiple of 1024 and uses the IEC</span>
<span class="tok-comment">/// measurement units (KiB, MiB, GiB, ...).</span>
<span class="tok-comment">/// Format option `precision` is ignored when `value` is less than 1KiB</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtIntSizeBin</span>(value: <span class="tok-type">u64</span>) <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatSizeBin">formatSizeBin</a>) {
    <span class="tok-kw">return</span> .{ .data = value };
}

<span class="tok-kw">fn</span> <span class="tok-fn">checkTextFmt</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) <span class="tok-type">void</span> {
    <span class="tok-kw">if</span> (fmt.len != <span class="tok-number">1</span>)
        <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unsupported format string '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;' when formatting text&quot;</span>);
    <span class="tok-kw">switch</span> (fmt[<span class="tok-number">0</span>]) {<span class="tok-comment">
        // Example of deprecation:
        // '[deprecated_specifier]' =&gt; @compileError(&quot;specifier '[deprecated_specifier]' has been deprecated, wrap your argument in `std.some_function` instead&quot;),
        </span><span class="tok-str">'x'</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;specifier 'x' has been deprecated, wrap your argument in std.fmt.fmtSliceHexLower instead&quot;</span>),
        <span class="tok-str">'X'</span> =&gt; <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;specifier 'X' has been deprecated, wrap your argument in std.fmt.fmtSliceHexUpper instead&quot;</span>),
        <span class="tok-kw">else</span> =&gt; {},
    }
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatText</span>(
    bytes: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">comptime</span> <a href="std.fmt.html#std.fmt.checkTextFmt">checkTextFmt</a>(fmt);
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(bytes, options, writer);
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatAsciiChar</span>(
    c: <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(<span class="tok-builtin">@as</span>(*<span class="tok-kw">const</span> [<span class="tok-number">1</span>]<span class="tok-type">u8</span>, &amp;c), options, writer);
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatUnicodeCodepoint</span>(
    c: <span class="tok-type">u21</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">4</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">const</span> len = <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8Encode">utf8Encode</a>(c, &amp;buf) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.Utf8CannotEncodeSurrogateHalf, <span class="tok-kw">error</span>.CodepointTooLarge =&gt; {
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(&amp;<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.replacement_character">replacement_character</a>), options, writer);
        },
    };
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buf[<span class="tok-number">0</span>..len], options, writer);
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatBuf</span>(
    buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">if</span> (options.width) |min_width| {<span class="tok-comment">
        // In case of error assume the buffer content is ASCII-encoded
        </span><span class="tok-kw">const</span> width = <a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8CountCodepoints">utf8CountCodepoints</a>(buf) <span class="tok-kw">catch</span> buf.len;
        <span class="tok-kw">const</span> padding = <span class="tok-kw">if</span> (width &lt; min_width) min_width - width <span class="tok-kw">else</span> <span class="tok-number">0</span>;

        <span class="tok-kw">if</span> (padding == <span class="tok-number">0</span>)
            <span class="tok-kw">return</span> writer.writeAll(buf);

        <span class="tok-kw">var</span> fill_buffer: [<span class="tok-number">4</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
        <span class="tok-kw">const</span> fill_utf8 = <span class="tok-kw">if</span> (<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8Encode">utf8Encode</a>(options.fill, &amp;fill_buffer)) |len|
            fill_buffer[<span class="tok-number">0</span>..len]
        <span class="tok-kw">else</span> |err| <span class="tok-kw">switch</span> (err) {
            <span class="tok-kw">error</span>.Utf8CannotEncodeSurrogateHalf,
            <span class="tok-kw">error</span>.CodepointTooLarge,
            =&gt; &amp;<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.utf8EncodeComptime">utf8EncodeComptime</a>(<a href="std.unicode.html">unicode</a>.<a href="std.unicode.html#std.unicode.replacement_character">replacement_character</a>),
        };
        <span class="tok-kw">switch</span> (options.alignment) {
            .left =&gt; {
                <span class="tok-kw">try</span> writer.writeAll(buf);
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, padding);
            },
            .center =&gt; {
                <span class="tok-kw">const</span> left_padding = padding / <span class="tok-number">2</span>;
                <span class="tok-kw">const</span> right_padding = (padding + <span class="tok-number">1</span>) / <span class="tok-number">2</span>;
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, left_padding);
                <span class="tok-kw">try</span> writer.writeAll(buf);
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, right_padding);
            },
            .right =&gt; {
                <span class="tok-kw">try</span> writer.writeBytesNTimes(fill_utf8, padding);
                <span class="tok-kw">try</span> writer.writeAll(buf);
            },
        }
    } <span class="tok-kw">else</span> {<span class="tok-comment">
        // Fast path, avoid counting the number of codepoints
        </span><span class="tok-kw">try</span> writer.writeAll(buf);
    }
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatFloatHexadecimal</span>(
    value: <span class="tok-kw">anytype</span>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.signbit.html#std.math.signbit.signbit">signbit</a>(value)) {
        <span class="tok-kw">try</span> writer.writeByte(<span class="tok-str">'-'</span>);
    }
    <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.isnan.html#std.math.isnan.isNan">isNan</a>(value)) {
        <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;nan&quot;</span>);
    }
    <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.isinf.html#std.math.isinf.isInf">isInf</a>(value)) {
        <span class="tok-kw">return</span> writer.writeAll(<span class="tok-str">&quot;inf&quot;</span>);
    }

    <span class="tok-kw">const</span> T = <span class="tok-builtin">@TypeOf</span>(value);
    <span class="tok-kw">const</span> TU = <a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.Int">Int</a>(.unsigned, <span class="tok-builtin">@bitSizeOf</span>(T));

    <span class="tok-kw">const</span> mantissa_bits = <a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMantissaBits">floatMantissaBits</a>(T);
    <span class="tok-kw">const</span> fractional_bits = <a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatFractionalBits">floatFractionalBits</a>(T);
    <span class="tok-kw">const</span> exponent_bits = <a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatExponentBits">floatExponentBits</a>(T);
    <span class="tok-kw">const</span> mantissa_mask = (<span class="tok-number">1</span> &lt;&lt; mantissa_bits) - <span class="tok-number">1</span>;
    <span class="tok-kw">const</span> exponent_mask = (<span class="tok-number">1</span> &lt;&lt; exponent_bits) - <span class="tok-number">1</span>;
    <span class="tok-kw">const</span> exponent_bias = (<span class="tok-number">1</span> &lt;&lt; (exponent_bits - <span class="tok-number">1</span>)) - <span class="tok-number">1</span>;

    <span class="tok-kw">const</span> as_bits = <span class="tok-builtin">@as</span>(TU, <span class="tok-builtin">@bitCast</span>(value));
    <span class="tok-kw">var</span> mantissa = as_bits &amp; mantissa_mask;
    <span class="tok-kw">var</span> exponent: <span class="tok-type">i32</span> = <span class="tok-builtin">@as</span>(<span class="tok-type">u16</span>, <span class="tok-builtin">@truncate</span>((as_bits &gt;&gt; mantissa_bits) &amp; exponent_mask));

    <span class="tok-kw">const</span> is_denormal = exponent == <span class="tok-number">0</span> <span class="tok-kw">and</span> mantissa != <span class="tok-number">0</span>;
    <span class="tok-kw">const</span> is_zero = exponent == <span class="tok-number">0</span> <span class="tok-kw">and</span> mantissa == <span class="tok-number">0</span>;

    <span class="tok-kw">if</span> (is_zero) {<span class="tok-comment">
        // Handle this case here to simplify the logic below.
        </span><span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;0x0&quot;</span>);
        <span class="tok-kw">if</span> (options.precision) |precision| {
            <span class="tok-kw">if</span> (precision &gt; <span class="tok-number">0</span>) {
                <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
                <span class="tok-kw">try</span> writer.writeByteNTimes(<span class="tok-str">'0'</span>, precision);
            }
        } <span class="tok-kw">else</span> {
            <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.0&quot;</span>);
        }
        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;p0&quot;</span>);
        <span class="tok-kw">return</span>;
    }

    <span class="tok-kw">if</span> (is_denormal) {<span class="tok-comment">
        // Adjust the exponent for printing.
        </span>exponent += <span class="tok-number">1</span>;
    } <span class="tok-kw">else</span> {
        <span class="tok-kw">if</span> (fractional_bits == mantissa_bits)
            mantissa |= <span class="tok-number">1</span> &lt;&lt; fractional_bits;<span class="tok-comment"> // Add the implicit integer bit.
    </span>}

    <span class="tok-kw">const</span> mantissa_digits = (fractional_bits + <span class="tok-number">3</span>) / <span class="tok-number">4</span>;<span class="tok-comment">
    // Fill in zeroes to round the fraction width to a multiple of 4.
    </span>mantissa &lt;&lt;= mantissa_digits * <span class="tok-number">4</span> - fractional_bits;

    <span class="tok-kw">if</span> (options.precision) |precision| {<span class="tok-comment">
        // Round if needed.
        </span><span class="tok-kw">if</span> (precision &lt; mantissa_digits) {<span class="tok-comment">
            // We always have at least 4 extra bits.
            </span><span class="tok-kw">var</span> extra_bits = (mantissa_digits - precision) * <span class="tok-number">4</span>;<span class="tok-comment">
            // The result LSB is the Guard bit, we need two more (Round and
            // Sticky) to round the value.
            </span><span class="tok-kw">while</span> (extra_bits &gt; <span class="tok-number">2</span>) {
                mantissa = (mantissa &gt;&gt; <span class="tok-number">1</span>) | (mantissa &amp; <span class="tok-number">1</span>);
                extra_bits -= <span class="tok-number">1</span>;
            }<span class="tok-comment">
            // Round to nearest, tie to even.
            </span>mantissa |= <span class="tok-builtin">@intFromBool</span>(mantissa &amp; <span class="tok-number">0b100</span> != <span class="tok-number">0</span>);
            mantissa += <span class="tok-number">1</span>;<span class="tok-comment">
            // Drop the excess bits.
            </span>mantissa &gt;&gt;= <span class="tok-number">2</span>;<span class="tok-comment">
            // Restore the alignment.
            </span>mantissa &lt;&lt;= <span class="tok-builtin">@as</span>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.Log2Int">Log2Int</a>(TU), <span class="tok-builtin">@intCast</span>((mantissa_digits - precision) * <span class="tok-number">4</span>));

            <span class="tok-kw">const</span> overflow = mantissa &amp; (<span class="tok-number">1</span> &lt;&lt; <span class="tok-number">1</span> + mantissa_digits * <span class="tok-number">4</span>) != <span class="tok-number">0</span>;<span class="tok-comment">
            // Prefer a normalized result in case of overflow.
            </span><span class="tok-kw">if</span> (overflow) {
                mantissa &gt;&gt;= <span class="tok-number">1</span>;
                exponent += <span class="tok-number">1</span>;
            }
        }
    }<span class="tok-comment">

    // +1 for the decimal part.
    </span><span class="tok-kw">var</span> buf: [<span class="tok-number">1</span> + mantissa_digits]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    _ = <a href="std.fmt.html#std.fmt.formatIntBuf">formatIntBuf</a>(&amp;buf, mantissa, <span class="tok-number">16</span>, .lower, .{ .fill = <span class="tok-str">'0'</span>, .width = <span class="tok-number">1</span> + mantissa_digits });

    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;0x&quot;</span>);
    <span class="tok-kw">try</span> writer.writeByte(buf[<span class="tok-number">0</span>]);
    <span class="tok-kw">const</span> trimmed = <a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.trimRight">trimRight</a>(<span class="tok-type">u8</span>, buf[<span class="tok-number">1</span>..], <span class="tok-str">&quot;0&quot;</span>);
    <span class="tok-kw">if</span> (options.precision) |precision| {
        <span class="tok-kw">if</span> (precision &gt; <span class="tok-number">0</span>) <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (trimmed.len &gt; <span class="tok-number">0</span>) {
        <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;.&quot;</span>);
    }
    <span class="tok-kw">try</span> writer.writeAll(trimmed);<span class="tok-comment">
    // Add trailing zeros if explicitly requested.
    </span><span class="tok-kw">if</span> (options.precision) |precision| <span class="tok-kw">if</span> (precision &gt; <span class="tok-number">0</span>) {
        <span class="tok-kw">if</span> (precision &gt; trimmed.len)
            <span class="tok-kw">try</span> writer.writeByteNTimes(<span class="tok-str">'0'</span>, precision - trimmed.len);
    };
    <span class="tok-kw">try</span> writer.writeAll(<span class="tok-str">&quot;p&quot;</span>);
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(exponent - exponent_bias, <span class="tok-number">10</span>, .lower, .{}, writer);
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatInt</span>(
    value: <span class="tok-kw">anytype</span>,
    base: <span class="tok-type">u8</span>,
    case: <a href="std.fmt.Case.html">Case</a>,
    options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
    writer: <span class="tok-kw">anytype</span>,
) !<span class="tok-type">void</span> {
    <a href="std.debug.html#std.debug.assert">assert</a>(base &gt;= <span class="tok-number">2</span>);

    <span class="tok-kw">const</span> int_value = <span class="tok-kw">if</span> (<span class="tok-builtin">@TypeOf</span>(value) == <span class="tok-type">comptime_int</span>) blk: {
        <span class="tok-kw">const</span> Int = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.IntFittingRange">IntFittingRange</a>(value, value);
        <span class="tok-kw">break</span> :blk <span class="tok-builtin">@as</span>(Int, value);
    } <span class="tok-kw">else</span> value;

    <span class="tok-kw">const</span> value_info = <span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(int_value)).int;<span class="tok-comment">

    // The type must have the same size as `base` or be wider in order for the
    // division to work
    </span><span class="tok-kw">const</span> min_int_bits = <span class="tok-kw">comptime</span> <span class="tok-builtin">@max</span>(value_info.bits, <span class="tok-number">8</span>);
    <span class="tok-kw">const</span> MinInt = <a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.Int">Int</a>(.unsigned, min_int_bits);

    <span class="tok-kw">const</span> abs_value = <span class="tok-builtin">@abs</span>(int_value);<span class="tok-comment">
    // The worst case in terms of space needed is base 2, plus 1 for the sign
    </span><span class="tok-kw">var</span> buf: [<span class="tok-number">1</span> + <span class="tok-builtin">@max</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">comptime_int</span>, value_info.bits), <span class="tok-number">1</span>)]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;

    <span class="tok-kw">var</span> a: MinInt = abs_value;
    <span class="tok-kw">var</span> index: <span class="tok-type">usize</span> = buf.len;

    <span class="tok-kw">if</span> (base == <span class="tok-number">10</span>) {
        <span class="tok-kw">while</span> (a &gt;= <span class="tok-number">100</span>) : (a = <span class="tok-builtin">@divTrunc</span>(a, <span class="tok-number">100</span>)) {
            index -= <span class="tok-number">2</span>;
            buf[index..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].* = <a href="std.fmt.html#std.fmt.digits2">digits2</a>(<span class="tok-builtin">@intCast</span>(a % <span class="tok-number">100</span>));
        }

        <span class="tok-kw">if</span> (a &lt; <span class="tok-number">10</span>) {
            index -= <span class="tok-number">1</span>;
            buf[index] = <span class="tok-str">'0'</span> + <span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-builtin">@intCast</span>(a));
        } <span class="tok-kw">else</span> {
            index -= <span class="tok-number">2</span>;
            buf[index..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].* = <a href="std.fmt.html#std.fmt.digits2">digits2</a>(<span class="tok-builtin">@intCast</span>(a));
        }
    } <span class="tok-kw">else</span> {
        <span class="tok-kw">while</span> (<span class="tok-null">true</span>) {
            <span class="tok-kw">const</span> digit = a % base;
            index -= <span class="tok-number">1</span>;
            buf[index] = <a href="std.fmt.html#std.fmt.digitToChar">digitToChar</a>(<span class="tok-builtin">@intCast</span>(digit), case);
            a /= base;
            <span class="tok-kw">if</span> (a == <span class="tok-number">0</span>) <span class="tok-kw">break</span>;
        }
    }

    <span class="tok-kw">if</span> (value_info.signedness == .signed) {
        <span class="tok-kw">if</span> (value &lt; <span class="tok-number">0</span>) {<span class="tok-comment">
            // Negative integer
            </span>index -= <span class="tok-number">1</span>;
            buf[index] = <span class="tok-str">'-'</span>;
        } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (options.width == <span class="tok-null">null</span> <span class="tok-kw">or</span> options.width.? == <span class="tok-number">0</span>) {<span class="tok-comment">
            // Positive integer, omit the plus sign
        </span>} <span class="tok-kw">else</span> {<span class="tok-comment">
            // Positive integer
            </span>index -= <span class="tok-number">1</span>;
            buf[index] = <span class="tok-str">'+'</span>;
        }
    }

    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(buf[index..], options, writer);
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">formatIntBuf</span>(out_buf: []<span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>) <span class="tok-type">usize</span> {
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(out_buf);
    <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(value, base, case, options, fbs.writer()) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    <span class="tok-kw">return</span> fbs.pos;
}

<span class="tok-comment">/// Converts values in the range [0, 100) to a base 10 string.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">digits2</span>(value: <span class="tok-type">u8</span>) [<span class="tok-number">2</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">if</span> (<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.mode">mode</a> == .ReleaseSmall) {
        <span class="tok-kw">return</span> .{ <span class="tok-builtin">@intCast</span>(<span class="tok-str">'0'</span> + value / <span class="tok-number">10</span>), <span class="tok-builtin">@intCast</span>(<span class="tok-str">'0'</span> + value % <span class="tok-number">10</span>) };
    } <span class="tok-kw">else</span> {
        <span class="tok-kw">return</span> <span class="tok-str">&quot;00010203040506070809101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899&quot;</span>[value * <span class="tok-number">2</span> ..][<span class="tok-number">0</span>..<span class="tok-number">2</span>].*;
    }
}

<span class="tok-kw">const</span> FormatDurationData = <span class="tok-kw">struct</span> {
    ns: <span class="tok-type">u64</span>,
    negative: <span class="tok-type">bool</span> = <span class="tok-null">false</span>,
};

<span class="tok-kw">fn</span> <span class="tok-fn">formatDuration</span>(data: <a href="std.fmt.FormatDurationData.html">FormatDurationData</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
    _ = fmt;<span class="tok-comment">

    // worst case: &quot;-XXXyXXwXXdXXhXXmXX.XXXs&quot;.len = 24
    </span><span class="tok-kw">var</span> buf: [<span class="tok-number">24</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(&amp;buf);
    <span class="tok-kw">var</span> buf_writer = fbs.writer();
    <span class="tok-kw">if</span> (data.negative) {
        buf_writer.writeByte(<span class="tok-str">'-'</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    }

    <span class="tok-kw">var</span> ns_remaining = data.ns;
    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .ns = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a>, .sep = <span class="tok-str">'y'</span> },
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a>, .sep = <span class="tok-str">'w'</span> },
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a>, .sep = <span class="tok-str">'d'</span> },
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a>, .sep = <span class="tok-str">'h'</span> },
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a>, .sep = <span class="tok-str">'m'</span> },
    }) |unit| {
        <span class="tok-kw">if</span> (ns_remaining &gt;= unit.ns) {
            <span class="tok-kw">const</span> units = ns_remaining / unit.ns;
            <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(units, <span class="tok-number">10</span>, .lower, .{}, buf_writer) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
            buf_writer.writeByte(unit.sep) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
            ns_remaining -= units * unit.ns;
            <span class="tok-kw">if</span> (ns_remaining == <span class="tok-number">0</span>)
                <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(fbs.getWritten(), options, writer);
        }
    }

    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a>, .sep = <span class="tok-str">&quot;s&quot;</span> },
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a>, .sep = <span class="tok-str">&quot;ms&quot;</span> },
        .{ .ns = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a>, .sep = <span class="tok-str">&quot;us&quot;</span> },
    }) |unit| {
        <span class="tok-kw">const</span> kunits = ns_remaining * <span class="tok-number">1000</span> / unit.ns;
        <span class="tok-kw">if</span> (kunits &gt;= <span class="tok-number">1000</span>) {
            <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(kunits / <span class="tok-number">1000</span>, <span class="tok-number">10</span>, .lower, .{}, buf_writer) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
            <span class="tok-kw">const</span> frac = kunits % <span class="tok-number">1000</span>;
            <span class="tok-kw">if</span> (frac &gt; <span class="tok-number">0</span>) {<span class="tok-comment">
                // Write up to 3 decimal places
                </span><span class="tok-kw">var</span> decimal_buf = [_]<span class="tok-type">u8</span>{ <span class="tok-str">'.'</span>, <span class="tok-number">0</span>, <span class="tok-number">0</span>, <span class="tok-number">0</span> };
                _ = <a href="std.fmt.html#std.fmt.formatIntBuf">formatIntBuf</a>(decimal_buf[<span class="tok-number">1</span>..], frac, <span class="tok-number">10</span>, .lower, .{ .fill = <span class="tok-str">'0'</span>, .width = <span class="tok-number">3</span> });
                <span class="tok-kw">var</span> end: <span class="tok-type">usize</span> = <span class="tok-number">4</span>;
                <span class="tok-kw">while</span> (end &gt; <span class="tok-number">1</span>) : (end -= <span class="tok-number">1</span>) {
                    <span class="tok-kw">if</span> (decimal_buf[end - <span class="tok-number">1</span>] != <span class="tok-str">'0'</span>) <span class="tok-kw">break</span>;
                }
                buf_writer.writeAll(decimal_buf[<span class="tok-number">0</span>..end]) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
            }
            buf_writer.writeAll(unit.sep) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
            <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(fbs.getWritten(), options, writer);
        }
    }

    <a href="std.fmt.html#std.fmt.formatInt">formatInt</a>(ns_remaining, <span class="tok-number">10</span>, .lower, .{}, buf_writer) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    buf_writer.writeAll(<span class="tok-str">&quot;ns&quot;</span>) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.formatBuf">formatBuf</a>(fbs.getWritten(), options, writer);
}

<span class="tok-comment">/// Return a Formatter for number of nanoseconds according to its magnitude:</span>
<span class="tok-comment">/// [#y][#w][#d][#h][#m]#[.###][n|u|m]s</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtDuration</span>(ns: <span class="tok-type">u64</span>) <a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatDuration">formatDuration</a>) {
    <span class="tok-kw">const</span> data = <a href="std.fmt.FormatDurationData.html">FormatDurationData</a>{ .ns = ns };
    <span class="tok-kw">return</span> .{ .data = data };
}

<span class="tok-kw">test</span> fmtDuration {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">24</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;0ns&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;999ns&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;1.45us&quot;</span>, .d = <span class="tok-number">1450</span> },
        .{ .s = <span class="tok-str">&quot;1.5us&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;14.5us&quot;</span>, .d = <span class="tok-number">14500</span> },
        .{ .s = <span class="tok-str">&quot;145us&quot;</span>, .d = <span class="tok-number">145000</span> },
        .{ .s = <span class="tok-str">&quot;999.999us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1.5ms&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;1.11ms&quot;</span>, .d = <span class="tok-number">1110000</span> },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111000</span> },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111100</span> },
        .{ .s = <span class="tok-str">&quot;999.999ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> },
        .{ .s = <span class="tok-str">&quot;59.999s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1m&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> },
        .{ .s = <span class="tok-str">&quot;1h&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> },
        .{ .s = <span class="tok-str">&quot;1d&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;1w&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a> },
        .{ .s = <span class="tok-str">&quot;1y&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;1y52w23h59m59.999s&quot;</span>, .d = <span class="tok-number">730</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> - <span class="tok-number">1</span> },<span class="tok-comment"> // 365d = 52w1d
        </span>.{ .s = <span class="tok-str">&quot;1y1h1.001s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;1y1h1s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <span class="tok-number">999</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;1y1h999.999us&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;1y1m999ns&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> + <span class="tok-number">999</span> },
        .{ .s = <span class="tok-str">&quot;584y49w23h34m33.709s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.maxInt">maxInt</a>(<span class="tok-type">u64</span>) },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, <span class="tok-str">&quot;{}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtDuration">fmtDuration</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }

    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;=======0ns&quot;</span>, .f = <span class="tok-str">&quot;{s:=&gt;10}&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns=======&quot;</span>, .f = <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;  999ns   &quot;</span>, .f = <span class="tok-str">&quot;{s:^10}&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span> },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, tc.f, .{<a href="std.fmt.html#std.fmt.fmtDuration">fmtDuration</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }
}

<span class="tok-kw">fn</span> <span class="tok-fn">formatDurationSigned</span>(ns: <span class="tok-type">i64</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
    <span class="tok-kw">const</span> data = <a href="std.fmt.FormatDurationData.html">FormatDurationData</a>{ .ns = <span class="tok-builtin">@abs</span>(ns), .negative = ns &lt; <span class="tok-number">0</span> };
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatDuration">formatDuration</a>(data, fmt, options, writer);
}

<span class="tok-comment">/// Return a Formatter for number of nanoseconds according to its signed magnitude:</span>
<span class="tok-comment">/// [#y][#w][#d][#h][#m]#[.###][n|u|m]s</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">fmtDurationSigned</span>(ns: <span class="tok-type">i64</span>) <a href="std.fmt.html#std.fmt.Formatter">Formatter</a>(<a href="std.fmt.html#std.fmt.formatDurationSigned">formatDurationSigned</a>) {
    <span class="tok-kw">return</span> .{ .data = ns };
}

<span class="tok-kw">test</span> fmtDurationSigned {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">24</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;0ns&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1ns&quot;</span>, .d = -(<span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;999ns&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-999ns&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;-1us&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a>) },
        .{ .s = <span class="tok-str">&quot;1.45us&quot;</span>, .d = <span class="tok-number">1450</span> },
        .{ .s = <span class="tok-str">&quot;-1.45us&quot;</span>, .d = -(<span class="tok-number">1450</span>) },
        .{ .s = <span class="tok-str">&quot;1.5us&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;-1.5us&quot;</span>, .d = -(<span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> / <span class="tok-number">2</span>) },
        .{ .s = <span class="tok-str">&quot;14.5us&quot;</span>, .d = <span class="tok-number">14500</span> },
        .{ .s = <span class="tok-str">&quot;-14.5us&quot;</span>, .d = -(<span class="tok-number">14500</span>) },
        .{ .s = <span class="tok-str">&quot;145us&quot;</span>, .d = <span class="tok-number">145000</span> },
        .{ .s = <span class="tok-str">&quot;-145us&quot;</span>, .d = -(<span class="tok-number">145000</span>) },
        .{ .s = <span class="tok-str">&quot;999.999us&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-999.999us&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1ms&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1.5ms&quot;</span>, .d = <span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> / <span class="tok-number">2</span> },
        .{ .s = <span class="tok-str">&quot;-1.5ms&quot;</span>, .d = -(<span class="tok-number">3</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> / <span class="tok-number">2</span>) },
        .{ .s = <span class="tok-str">&quot;1.11ms&quot;</span>, .d = <span class="tok-number">1110000</span> },
        .{ .s = <span class="tok-str">&quot;-1.11ms&quot;</span>, .d = -(<span class="tok-number">1110000</span>) },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111000</span> },
        .{ .s = <span class="tok-str">&quot;-1.111ms&quot;</span>, .d = -(<span class="tok-number">1111000</span>) },
        .{ .s = <span class="tok-str">&quot;1.111ms&quot;</span>, .d = <span class="tok-number">1111100</span> },
        .{ .s = <span class="tok-str">&quot;-1.111ms&quot;</span>, .d = -(<span class="tok-number">1111100</span>) },
        .{ .s = <span class="tok-str">&quot;999.999ms&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-999.999ms&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> },
        .{ .s = <span class="tok-str">&quot;-1s&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a>) },
        .{ .s = <span class="tok-str">&quot;59.999s&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-59.999s&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1m&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> },
        .{ .s = <span class="tok-str">&quot;-1m&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a>) },
        .{ .s = <span class="tok-str">&quot;1h&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> },
        .{ .s = <span class="tok-str">&quot;-1h&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a>) },
        .{ .s = <span class="tok-str">&quot;1d&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;-1d&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a>) },
        .{ .s = <span class="tok-str">&quot;1w&quot;</span>, .d = <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a> },
        .{ .s = <span class="tok-str">&quot;-1w&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_week">ns_per_week</a>) },
        .{ .s = <span class="tok-str">&quot;1y&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> },
        .{ .s = <span class="tok-str">&quot;-1y&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a>) },
        .{ .s = <span class="tok-str">&quot;1y52w23h59m59.999s&quot;</span>, .d = <span class="tok-number">730</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> - <span class="tok-number">1</span> },<span class="tok-comment"> // 365d = 52w1d
        </span>.{ .s = <span class="tok-str">&quot;-1y52w23h59m59.999s&quot;</span>, .d = -(<span class="tok-number">730</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> - <span class="tok-number">1</span>) },<span class="tok-comment"> // 365d = 52w1d
        </span>.{ .s = <span class="tok-str">&quot;1y1h1.001s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;-1y1h1.001s&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a>) },
        .{ .s = <span class="tok-str">&quot;1y1h1s&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <span class="tok-number">999</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> },
        .{ .s = <span class="tok-str">&quot;-1y1h1s&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_s">ns_per_s</a> + <span class="tok-number">999</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a>) },
        .{ .s = <span class="tok-str">&quot;1y1h999.999us&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1y1h999.999us&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> - <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> },
        .{ .s = <span class="tok-str">&quot;-1y1h1ms&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a>) },
        .{ .s = <span class="tok-str">&quot;1y1h1ms&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1y1h1ms&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_hour">ns_per_hour</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_ms">ns_per_ms</a> + <span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;1y1m999ns&quot;</span>, .d = <span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> + <span class="tok-number">999</span> },
        .{ .s = <span class="tok-str">&quot;-1y1m999ns&quot;</span>, .d = -(<span class="tok-number">365</span> * <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_day">ns_per_day</a> + <a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_min">ns_per_min</a> + <span class="tok-number">999</span>) },
        .{ .s = <span class="tok-str">&quot;292y24w3d23h47m16.854s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.maxInt">maxInt</a>(<span class="tok-type">i64</span>) },
        .{ .s = <span class="tok-str">&quot;-292y24w3d23h47m16.854s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i64</span>) + <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-292y24w3d23h47m16.854s&quot;</span>, .d = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i64</span>) },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, <span class="tok-str">&quot;{}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtDurationSigned">fmtDurationSigned</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }

    <span class="tok-kw">inline</span> <span class="tok-kw">for</span> (.{
        .{ .s = <span class="tok-str">&quot;=======0ns&quot;</span>, .f = <span class="tok-str">&quot;{s:=&gt;10}&quot;</span>, .d = <span class="tok-number">0</span> },
        .{ .s = <span class="tok-str">&quot;1ns=======&quot;</span>, .f = <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .d = <span class="tok-number">1</span> },
        .{ .s = <span class="tok-str">&quot;-1ns======&quot;</span>, .f = <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .d = -(<span class="tok-number">1</span>) },
        .{ .s = <span class="tok-str">&quot;  -999ns  &quot;</span>, .f = <span class="tok-str">&quot;{s:^10}&quot;</span>, .d = -(<a href="std.html">std</a>.<a href="std.time.html">time</a>.<a href="std.time.html#std.time.ns_per_us">ns_per_us</a> - <span class="tok-number">1</span>) },
    }) |tc| {
        <span class="tok-kw">const</span> slice = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, tc.f, .{<a href="std.fmt.html#std.fmt.fmtDurationSigned">fmtDurationSigned</a>(tc.d)});
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(tc.s, slice);
    }
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> ParseIntError = <span class="tok-kw">error</span>{
    <span class="tok-comment">/// The result cannot fit in the type specified</span>
    Overflow,

    <span class="tok-comment">/// The input was empty or contained an invalid character</span>
    InvalidCharacter,
};

<span class="tok-comment">/// Creates a Formatter type from a format function. Wrapping data in Formatter(func) causes</span>
<span class="tok-comment">/// the data to be formatted using the given function `func`.  `func` must be of the following</span>
<span class="tok-comment">/// form:</span>
<span class="tok-comment">///</span>
<span class="tok-comment">///     fn formatExample(</span>
<span class="tok-comment">///         data: T,</span>
<span class="tok-comment">///         comptime fmt: []const u8,</span>
<span class="tok-comment">///         options: std.fmt.FormatOptions,</span>
<span class="tok-comment">///         writer: anytype,</span>
<span class="tok-comment">///     ) !void;</span>
<span class="tok-comment">///</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">Formatter</span>(<span class="tok-kw">comptime</span> formatFn: <span class="tok-kw">anytype</span>) <span class="tok-type">type</span> {
    <span class="tok-kw">const</span> Data = <span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(formatFn)).@&quot;fn&quot;.params[<span class="tok-number">0</span>].<span class="tok-type">type</span>.?;
    <span class="tok-kw">return</span> <span class="tok-kw">struct</span> {
        data: Data,
        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            self: <span class="tok-builtin">@This</span>(),
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) <span class="tok-builtin">@TypeOf</span>(writer).Error!<span class="tok-type">void</span> {
            <span class="tok-kw">try</span> formatFn(self.data, fmt, options, writer);
        }
    };
}

<span class="tok-comment">/// Parses the string `buf` as signed or unsigned representation in the</span>
<span class="tok-comment">/// specified base of an integral value of type `T`.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// When `base` is zero the string prefix is examined to detect the true base:</span>
<span class="tok-comment">///  * A prefix of &quot;0b&quot; implies base=2,</span>
<span class="tok-comment">///  * A prefix of &quot;0o&quot; implies base=8,</span>
<span class="tok-comment">///  * A prefix of &quot;0x&quot; implies base=16,</span>
<span class="tok-comment">///  * Otherwise base=10 is assumed.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// Ignores '_' character in `buf`.</span>
<span class="tok-comment">/// See also `parseUnsigned`.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseInt</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!T {
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithGenericCharacter">parseIntWithGenericCharacter</a>(T, <span class="tok-type">u8</span>, buf, base);
}

<span class="tok-comment">/// Like `parseInt`, but with a generic `Character` type.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseIntWithGenericCharacter</span>(
    <span class="tok-kw">comptime</span> Result: <span class="tok-type">type</span>,
    <span class="tok-kw">comptime</span> Character: <span class="tok-type">type</span>,
    buf: []<span class="tok-kw">const</span> Character,
    base: <span class="tok-type">u8</span>,
) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!Result {
    <span class="tok-kw">if</span> (buf.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    <span class="tok-kw">if</span> (buf[<span class="tok-number">0</span>] == <span class="tok-str">'+'</span>) <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(Result, Character, buf[<span class="tok-number">1</span>..], base, .pos);
    <span class="tok-kw">if</span> (buf[<span class="tok-number">0</span>] == <span class="tok-str">'-'</span>) <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(Result, Character, buf[<span class="tok-number">1</span>..], base, .neg);
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(Result, Character, buf, base, .pos);
}

<span class="tok-kw">test</span> parseInt {
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">10</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">10</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">10</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;+10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot; 10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;10 &quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;_10_&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x_10_&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x10_&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x_10&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">255</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;255&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;256&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // +0 and -0 should work for unsigned
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-0&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;+0&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // ensure minInt is parsed correctly
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i1</span>), <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i1</span>, <span class="tok-str">&quot;-1&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i8</span>), <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i8</span>, <span class="tok-str">&quot;-128&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.minInt">minInt</a>(<span class="tok-type">i43</span>), <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i43</span>, <span class="tok-str">&quot;-4398046511104&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // empty string or bare +- is invalid
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;+&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;-&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // autodectect the base
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">111</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">111</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;1_1_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">111</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;1_1_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0b111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0B111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0b1_11&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0o111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0O111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0o11_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;+0x111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0b111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">7</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0b11_1&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">73</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0o111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0x111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0X111&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(-<span class="tok-number">273</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i32</span>, <span class="tok-str">&quot;-0x1_11&quot;</span>, <span class="tok-number">0</span>));<span class="tok-comment">

    // bare binary/octal/decimal prefix is invalid
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0b&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0o&quot;</span>, <span class="tok-number">0</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;0x&quot;</span>, <span class="tok-number">0</span>));<span class="tok-comment">

    // edge cases which previously errored due to base overflowing T
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">i2</span>, -<span class="tok-number">2</span>), <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i2</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">2</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">i4</span>, -<span class="tok-number">8</span>), <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i4</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">8</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">i5</span>, -<span class="tok-number">16</span>), <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">i5</span>, <span class="tok-str">&quot;-10&quot;</span>, <span class="tok-number">16</span>));
}

<span class="tok-kw">fn</span> <span class="tok-fn">parseIntWithSign</span>(
    <span class="tok-kw">comptime</span> Result: <span class="tok-type">type</span>,
    <span class="tok-kw">comptime</span> Character: <span class="tok-type">type</span>,
    buf: []<span class="tok-kw">const</span> Character,
    base: <span class="tok-type">u8</span>,
    <span class="tok-kw">comptime</span> sign: <span class="tok-kw">enum</span> { pos, neg },
) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!Result {
    <span class="tok-kw">if</span> (buf.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;

    <span class="tok-kw">var</span> buf_base = base;
    <span class="tok-kw">var</span> buf_start = buf;
    <span class="tok-kw">if</span> (base == <span class="tok-number">0</span>) {<span class="tok-comment">
        // Treat is as a decimal number by default.
        </span>buf_base = <span class="tok-number">10</span>;<span class="tok-comment">
        // Detect the base by looking at buf prefix.
        </span><span class="tok-kw">if</span> (buf.len &gt; <span class="tok-number">2</span> <span class="tok-kw">and</span> buf[<span class="tok-number">0</span>] == <span class="tok-str">'0'</span>) {
            <span class="tok-kw">if</span> (<a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(<span class="tok-type">u8</span>, buf[<span class="tok-number">1</span>])) |c| <span class="tok-kw">switch</span> (<a href="std.html">std</a>.<a href="std.ascii.html">ascii</a>.<a href="std.ascii.html#std.ascii.toLower">toLower</a>(c)) {
                <span class="tok-str">'b'</span> =&gt; {
                    buf_base = <span class="tok-number">2</span>;
                    buf_start = buf[<span class="tok-number">2</span>..];
                },
                <span class="tok-str">'o'</span> =&gt; {
                    buf_base = <span class="tok-number">8</span>;
                    buf_start = buf[<span class="tok-number">2</span>..];
                },
                <span class="tok-str">'x'</span> =&gt; {
                    buf_base = <span class="tok-number">16</span>;
                    buf_start = buf[<span class="tok-number">2</span>..];
                },
                <span class="tok-kw">else</span> =&gt; {},
            };
        }
    }

    <span class="tok-kw">const</span> add = <span class="tok-kw">switch</span> (sign) {
        .pos =&gt; <a href="std.math.html">math</a>.<a href="std.math.html#std.math.add">add</a>,
        .neg =&gt; <a href="std.math.html">math</a>.<a href="std.math.html#std.math.sub">sub</a>,
    };<span class="tok-comment">

    // accumulate into Accumulate which is always 8 bits or larger.  this prevents
    // `buf_base` from overflowing Result.
    </span><span class="tok-kw">const</span> info = <span class="tok-builtin">@typeInfo</span>(Result);
    <span class="tok-kw">const</span> Accumulate = <a href="std.html">std</a>.<a href="std.meta.html">meta</a>.<a href="std.meta.html#std.meta.Int">Int</a>(info.int.signedness, <span class="tok-builtin">@max</span>(<span class="tok-number">8</span>, info.int.bits));
    <span class="tok-kw">var</span> accumulate: Accumulate = <span class="tok-number">0</span>;

    <span class="tok-kw">if</span> (buf_start[<span class="tok-number">0</span>] == <span class="tok-str">'_'</span> <span class="tok-kw">or</span> buf_start[buf_start.len - <span class="tok-number">1</span>] == <span class="tok-str">'_'</span>) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;

    <span class="tok-kw">for</span> (buf_start) |c| {
        <span class="tok-kw">if</span> (c == <span class="tok-str">'_'</span>) <span class="tok-kw">continue</span>;
        <span class="tok-kw">const</span> digit = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.charToDigit">charToDigit</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(<span class="tok-type">u8</span>, c) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter, buf_base);
        <span class="tok-kw">if</span> (accumulate != <span class="tok-number">0</span>) {
            accumulate = <span class="tok-kw">try</span> <a href="std.math.html">math</a>.<a href="std.math.html#std.math.mul">mul</a>(Accumulate, accumulate, <a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(Accumulate, buf_base) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Overflow);
        } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (sign == .neg) {<span class="tok-comment">
            // The first digit of a negative number.
            // Consider parsing &quot;-4&quot; as an i3.
            // This should work, but positive 4 overflows i3, so we can't cast the digit to T and subtract.
            </span>accumulate = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(Accumulate, -<span class="tok-builtin">@as</span>(<span class="tok-type">i8</span>, <span class="tok-builtin">@intCast</span>(digit))) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Overflow;
            <span class="tok-kw">continue</span>;
        }
        accumulate = <span class="tok-kw">try</span> add(Accumulate, accumulate, <a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(Accumulate, digit) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Overflow);
    }

    <span class="tok-kw">return</span> <span class="tok-kw">if</span> (Result == Accumulate)
        accumulate
    <span class="tok-kw">else</span>
        <a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(Result, accumulate) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Overflow;
}

<span class="tok-comment">/// Parses the string `buf` as unsigned representation in the specified base</span>
<span class="tok-comment">/// of an integral value of type `T`.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// When `base` is zero the string prefix is examined to detect the true base:</span>
<span class="tok-comment">///  * A prefix of &quot;0b&quot; implies base=2,</span>
<span class="tok-comment">///  * A prefix of &quot;0o&quot; implies base=8,</span>
<span class="tok-comment">///  * A prefix of &quot;0x&quot; implies base=16,</span>
<span class="tok-comment">///  * Otherwise base=10 is assumed.</span>
<span class="tok-comment">///</span>
<span class="tok-comment">/// Ignores '_' character in `buf`.</span>
<span class="tok-comment">/// See also `parseInt`.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseUnsigned</span>(<span class="tok-kw">comptime</span> T: <span class="tok-type">type</span>, buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!T {
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.parseIntWithSign">parseIntWithSign</a>(T, <span class="tok-type">u8</span>, buf, base, .pos);
}

<span class="tok-kw">test</span> parseUnsigned {
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">50124</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;050124&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">65535</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;65535&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">65535</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;65_535&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u16</span>, <span class="tok-str">&quot;65536&quot;</span>, <span class="tok-number">10</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0xffffffffffffffff</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;0ffffffffffffffff&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0xffffffffffffffff</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;0f_fff_fff_fff_fff_fff&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;10000000000000000&quot;</span>, <span class="tok-number">16</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0xDEADBEEF</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;DeadBeef&quot;</span>, <span class="tok-number">16</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u7</span>, <span class="tok-str">&quot;1&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">8</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u7</span>, <span class="tok-str">&quot;1000&quot;</span>, <span class="tok-number">2</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;f&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;109&quot;</span>, <span class="tok-number">8</span>));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1442151747</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u32</span>, <span class="tok-str">&quot;NUMBER&quot;</span>, <span class="tok-number">36</span>));<span class="tok-comment">

    // these numbers should fit even though the base itself doesn't fit in the destination type
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">0</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;0&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;1&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;2&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">1</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u1</span>, <span class="tok-str">&quot;001&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">3</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u2</span>, <span class="tok-str">&quot;3&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.Overflow, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u2</span>, <span class="tok-str">&quot;4&quot;</span>, <span class="tok-number">16</span>));<span class="tok-comment">

    // parseUnsigned does not expect a sign
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;+0&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-0&quot;</span>, <span class="tok-number">10</span>));<span class="tok-comment">

    // test empty string error
    </span><span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
}

<span class="tok-comment">/// Parses a number like '2G', '2Gi', or '2GiB'.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">parseIntSizeSuffix</span>(buf: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, digit_base: <span class="tok-type">u8</span>) <a href="std.fmt.html#std.fmt.ParseIntError">ParseIntError</a>!<span class="tok-type">usize</span> {
    <span class="tok-kw">var</span> without_B = buf;
    <span class="tok-kw">if</span> (<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.endsWith">endsWith</a>(<span class="tok-type">u8</span>, buf, <span class="tok-str">&quot;B&quot;</span>)) without_B.len -= <span class="tok-number">1</span>;
    <span class="tok-kw">var</span> without_i = without_B;
    <span class="tok-kw">var</span> magnitude_base: <span class="tok-type">usize</span> = <span class="tok-number">1000</span>;
    <span class="tok-kw">if</span> (<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.endsWith">endsWith</a>(<span class="tok-type">u8</span>, without_B, <span class="tok-str">&quot;i&quot;</span>)) {
        without_i.len -= <span class="tok-number">1</span>;
        magnitude_base = <span class="tok-number">1024</span>;
    }
    <span class="tok-kw">if</span> (without_i.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    <span class="tok-kw">const</span> orders_of_magnitude: <span class="tok-type">usize</span> = <span class="tok-kw">switch</span> (without_i[without_i.len - <span class="tok-number">1</span>]) {
        <span class="tok-str">'k'</span>, <span class="tok-str">'K'</span> =&gt; <span class="tok-number">1</span>,
        <span class="tok-str">'M'</span> =&gt; <span class="tok-number">2</span>,
        <span class="tok-str">'G'</span> =&gt; <span class="tok-number">3</span>,
        <span class="tok-str">'T'</span> =&gt; <span class="tok-number">4</span>,
        <span class="tok-str">'P'</span> =&gt; <span class="tok-number">5</span>,
        <span class="tok-str">'E'</span> =&gt; <span class="tok-number">6</span>,
        <span class="tok-str">'Z'</span> =&gt; <span class="tok-number">7</span>,
        <span class="tok-str">'Y'</span> =&gt; <span class="tok-number">8</span>,
        <span class="tok-str">'R'</span> =&gt; <span class="tok-number">9</span>,
        <span class="tok-str">'Q'</span> =&gt; <span class="tok-number">10</span>,
        <span class="tok-kw">else</span> =&gt; <span class="tok-number">0</span>,
    };
    <span class="tok-kw">var</span> without_suffix = without_i;
    <span class="tok-kw">if</span> (orders_of_magnitude &gt; <span class="tok-number">0</span>) {
        without_suffix.len -= <span class="tok-number">1</span>;
    } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (without_i.len != without_B.len) {
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;
    }
    <span class="tok-kw">const</span> multiplier = <a href="std.math.html">math</a>.<a href="std.math.powi.html#std.math.powi.powi">powi</a>(<span class="tok-type">usize</span>, magnitude_base, orders_of_magnitude) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.Underflow =&gt; <span class="tok-kw">unreachable</span>,
        <span class="tok-kw">error</span>.Overflow =&gt; <span class="tok-kw">return</span> <span class="tok-kw">error</span>.Overflow,
    };
    <span class="tok-kw">const</span> number = <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.parseInt">parseInt</a>(<span class="tok-type">usize</span>, without_suffix, digit_base);
    <span class="tok-kw">return</span> <a href="std.math.html">math</a>.<a href="std.math.html#std.math.mul">mul</a>(<span class="tok-type">usize</span>, number, multiplier);
}

<span class="tok-kw">test</span> parseIntSizeSuffix {
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2B&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2000</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2kB&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2000</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2k&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2048</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2KiB&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2048</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2Ki&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">10240</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;aKiB&quot;</span>, <span class="tok-number">16</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;&quot;</span>, <span class="tok-number">10</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.parseIntSizeSuffix">parseIntSizeSuffix</a>(<span class="tok-str">&quot;2iB&quot;</span>, <span class="tok-number">10</span>));
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> parseFloat = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;fmt/parse_float.zig&quot;</span>).parseFloat;
<span class="tok-kw">pub</span> <span class="tok-kw">const</span> ParseFloatError = <span class="tok-builtin">@import</span>(<span class="tok-str">&quot;fmt/parse_float.zig&quot;</span>).ParseFloatError;

<span class="tok-kw">test</span> {
    _ = &amp;<a href="std.fmt.parse_float.html#std.fmt.parse_float.parseFloat">parseFloat</a>;
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">charToDigit</span>(c: <span class="tok-type">u8</span>, base: <span class="tok-type">u8</span>) (<span class="tok-kw">error</span>{InvalidCharacter}!<span class="tok-type">u8</span>) {
    <span class="tok-kw">const</span> value = <span class="tok-kw">switch</span> (c) {
        <span class="tok-str">'0'</span>...<span class="tok-str">'9'</span> =&gt; c - <span class="tok-str">'0'</span>,
        <span class="tok-str">'A'</span>...<span class="tok-str">'Z'</span> =&gt; c - <span class="tok-str">'A'</span> + <span class="tok-number">10</span>,
        <span class="tok-str">'a'</span>...<span class="tok-str">'z'</span> =&gt; c - <span class="tok-str">'a'</span> + <span class="tok-number">10</span>,
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter,
    };

    <span class="tok-kw">if</span> (value &gt;= base) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidCharacter;

    <span class="tok-kw">return</span> value;
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">digitToChar</span>(digit: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>) <span class="tok-type">u8</span> {
    <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (digit) {
        <span class="tok-number">0</span>...<span class="tok-number">9</span> =&gt; digit + <span class="tok-str">'0'</span>,
        <span class="tok-number">10</span>...<span class="tok-number">35</span> =&gt; digit + ((<span class="tok-kw">if</span> (case == .upper) <span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-str">'A'</span>) <span class="tok-kw">else</span> <span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-str">'a'</span>)) - <span class="tok-number">10</span>),
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
    };
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> BufPrintError = <span class="tok-kw">error</span>{
    <span class="tok-comment">/// As much as possible was written to the buffer, but it was too small to fit all the printed bytes.</span>
    NoSpaceLeft,
};

<span class="tok-comment">/// Print a Formatter string into `buf`. Actually just a thin wrapper around `format` and `fixedBufferStream`.</span>
<span class="tok-comment">/// Returns a slice of the bytes printed to.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrint</span>(buf: []<span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.BufPrintError">BufPrintError</a>![]<span class="tok-type">u8</span> {
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(buf);
    <a href="std.fmt.html#std.fmt.format">format</a>(fbs.writer().any(), fmt, args) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.NoSpaceLeft =&gt; <span class="tok-kw">return</span> <span class="tok-kw">error</span>.NoSpaceLeft,
        <span class="tok-kw">else</span> =&gt; <span class="tok-kw">unreachable</span>,
    };
    <span class="tok-kw">return</span> fbs.getWritten();
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrintZ</span>(buf: []<span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.BufPrintError">BufPrintError</a>![:<span class="tok-number">0</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf, fmt ++ <span class="tok-str">&quot;\x00&quot;</span>, args);
    <span class="tok-kw">return</span> result[<span class="tok-number">0</span> .. result.len - <span class="tok-number">1</span> :<span class="tok-number">0</span>];
}

<span class="tok-comment">/// Count the characters needed for format. Useful for preallocating memory</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">count</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <span class="tok-type">u64</span> {
    <span class="tok-kw">var</span> counting_writer = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.counting_writer.html#std.io.counting_writer.countingWriter">countingWriter</a>(<a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.html#std.io.null_writer">null_writer</a>);
    <a href="std.fmt.html#std.fmt.format">format</a>(counting_writer.writer().any(), fmt, args) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
    <span class="tok-kw">return</span> counting_writer.bytes_written;
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> AllocPrintError = <span class="tok-kw">error</span>{OutOfMemory};

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">allocPrint</span>(allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.AllocPrintError">AllocPrintError</a>![]<span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> size = <a href="std.math.html">math</a>.<a href="std.math.html#std.math.cast">cast</a>(<span class="tok-type">usize</span>, <a href="std.fmt.html#std.fmt.count">count</a>(fmt, args)) <span class="tok-kw">orelse</span> <span class="tok-kw">return</span> <span class="tok-kw">error</span>.OutOfMemory;
    <span class="tok-kw">const</span> buf = <span class="tok-kw">try</span> allocator.alloc(<span class="tok-type">u8</span>, size);
    <span class="tok-kw">return</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf, fmt, args) <span class="tok-kw">catch</span> |err| <span class="tok-kw">switch</span> (err) {
        <span class="tok-kw">error</span>.NoSpaceLeft =&gt; <span class="tok-kw">unreachable</span>,<span class="tok-comment"> // we just counted the size above
    </span>};
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">allocPrintZ</span>(allocator: <a href="std.mem.html">mem</a>.<a href="std.mem.Allocator.html">Allocator</a>, <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) <a href="std.fmt.html#std.fmt.AllocPrintError">AllocPrintError</a>![:<span class="tok-number">0</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.allocPrint">allocPrint</a>(allocator, fmt ++ <span class="tok-str">&quot;\x00&quot;</span>, args);
    <span class="tok-kw">return</span> result[<span class="tok-number">0</span> .. result.len - <span class="tok-number">1</span> :<span class="tok-number">0</span>];
}

<span class="tok-kw">test</span> bufPrintIntToSlice {
    <span class="tok-kw">var</span> buffer: [<span class="tok-number">100</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">const</span> buf = buffer[<span class="tok-number">0</span>..];

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-1&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i1</span>, -<span class="tok-number">1</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-101111000110000101001110&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">2</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-12345678&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-bc614e&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-BC614E&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">12345678</span>), <span class="tok-number">16</span>, .upper, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;12345678&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">12345678</span>), <span class="tok-number">10</span>, .upper, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;   666&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">666</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">6</span> }));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;  1234&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">0x1234</span>), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">6</span> }));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;1234&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">0x1234</span>), <span class="tok-number">16</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">1</span> }));

    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;+42&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, <span class="tok-number">42</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">3</span> }));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;-42&quot;</span>, <a href="std.fmt.html#std.fmt.bufPrintIntToSlice">bufPrintIntToSlice</a>(buf, <span class="tok-builtin">@as</span>(<span class="tok-type">i32</span>, -<span class="tok-number">42</span>), <span class="tok-number">10</span>, .lower, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{ .width = <span class="tok-number">3</span> }));
}

<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bufPrintIntToSlice</span>(buf: []<span class="tok-type">u8</span>, value: <span class="tok-kw">anytype</span>, base: <span class="tok-type">u8</span>, case: <a href="std.fmt.Case.html">Case</a>, options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>) []<span class="tok-type">u8</span> {
    <span class="tok-kw">return</span> buf[<span class="tok-number">0</span>..<a href="std.fmt.html#std.fmt.formatIntBuf">formatIntBuf</a>(buf, value, base, case, options)];
}

<span class="tok-kw">pub</span> <span class="tok-kw">inline</span> <span class="tok-kw">fn</span> <span class="tok-fn">comptimePrint</span>(<span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, args: <span class="tok-kw">anytype</span>) *<span class="tok-kw">const</span> [<a href="std.fmt.html#std.fmt.count">count</a>(fmt, args):<span class="tok-number">0</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">comptime</span> {
        <span class="tok-kw">var</span> buf: [<a href="std.fmt.html#std.fmt.count">count</a>(fmt, args):<span class="tok-number">0</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
        _ = <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(&amp;buf, fmt, args) <span class="tok-kw">catch</span> <span class="tok-kw">unreachable</span>;
        buf[buf.len] = <span class="tok-number">0</span>;
        <span class="tok-kw">const</span> final = buf;
        <span class="tok-kw">return</span> &amp;final;
    }
}

<span class="tok-kw">test</span> comptimePrint {
    <span class="tok-builtin">@setEvalBranchQuota</span>(<span class="tok-number">2000</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(*<span class="tok-kw">const</span> [<span class="tok-number">3</span>:<span class="tok-number">0</span>]<span class="tok-type">u8</span>, <span class="tok-builtin">@TypeOf</span>(<a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{}&quot;</span>, .{<span class="tok-number">100</span>})));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, <span class="tok-str">&quot;100&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{}&quot;</span>, .{<span class="tok-number">100</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;30&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d}&quot;</span>, .{<span class="tok-number">30.0</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;30.0&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d:3.1}&quot;</span>, .{<span class="tok-number">30.0</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;0.05&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{d}&quot;</span>, .{<span class="tok-number">0.05</span>}));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;5e-2&quot;</span>, <a href="std.fmt.html#std.fmt.comptimePrint">comptimePrint</a>(<span class="tok-str">&quot;{e}&quot;</span>, .{<span class="tok-number">0.05</span>}));
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parse u64 digit too big&quot;</span> {
    _ = <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">u64</span>, <span class="tok-str">&quot;123a&quot;</span>, <span class="tok-number">10</span>) <span class="tok-kw">catch</span> |err| {
        <span class="tok-kw">if</span> (err == <span class="tok-kw">error</span>.InvalidCharacter) <span class="tok-kw">return</span>;
        <span class="tok-kw">unreachable</span>;
    };
    <span class="tok-kw">unreachable</span>;
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parse unsigned comptime&quot;</span> {
    <span class="tok-kw">comptime</span> {
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-number">2</span>, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.parseUnsigned">parseUnsigned</a>(<span class="tok-type">usize</span>, <span class="tok-str">&quot;2&quot;</span>, <span class="tok-number">10</span>));
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;escaped braces&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;escaped: {{foo}}\n&quot;</span>, <span class="tok-str">&quot;escaped: {{{{foo}}}}\n&quot;</span>, .{});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;escaped: {foo}\n&quot;</span>, <span class="tok-str">&quot;escaped: {{foo}}\n&quot;</span>, .{});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;optional&quot;</span> {
    {
        <span class="tok-kw">const</span> value: ?<span class="tok-type">i32</span> = <span class="tok-number">1234</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;optional: 1234\n&quot;</span>, <span class="tok-str">&quot;optional: {?}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;optional: 1234\n&quot;</span>, <span class="tok-str">&quot;optional: {?d}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;optional: 4d2\n&quot;</span>, <span class="tok-str">&quot;optional: {?x}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: ?[]<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;string&quot;</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;optional: string\n&quot;</span>, <span class="tok-str">&quot;optional: {?s}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: ?<span class="tok-type">i32</span> = <span class="tok-null">null</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;optional: null\n&quot;</span>, <span class="tok-str">&quot;optional: {?}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value = <span class="tok-builtin">@as</span>(?*<span class="tok-type">i32</span>, <span class="tok-builtin">@ptrFromInt</span>(<span class="tok-number">0xf000d000</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;optional: *i32@f000d000\n&quot;</span>, <span class="tok-str">&quot;optional: {*}\n&quot;</span>, .{value});
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;error&quot;</span> {
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">anyerror</span>!<span class="tok-type">i32</span> = <span class="tok-number">1234</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;error union: 1234\n&quot;</span>, <span class="tok-str">&quot;error union: {!}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;error union: 1234\n&quot;</span>, <span class="tok-str">&quot;error union: {!d}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;error union: 4d2\n&quot;</span>, <span class="tok-str">&quot;error union: {!x}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">anyerror</span>![]<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;string&quot;</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;error union: string\n&quot;</span>, <span class="tok-str">&quot;error union: {!s}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">anyerror</span>!<span class="tok-type">i32</span> = <span class="tok-kw">error</span>.InvalidChar;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;error union: error.InvalidChar\n&quot;</span>, <span class="tok-str">&quot;error union: {!}\n&quot;</span>, .{value});
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;int.small&quot;</span> {
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u3</span> = <span class="tok-number">0b101</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u3: 5\n&quot;</span>, <span class="tok-str">&quot;u3: {}\n&quot;</span>, .{value});
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;int.specifier&quot;</span> {
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u8</span> = <span class="tok-str">'a'</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8: a\n&quot;</span>, <span class="tok-str">&quot;u8: {c}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u8</span> = <span class="tok-number">0b1100</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8: 0b1100\n&quot;</span>, <span class="tok-str">&quot;u8: 0b{b}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u16</span> = <span class="tok-number">0o1234</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u16: 0o1234\n&quot;</span>, <span class="tok-str">&quot;u16: 0o{o}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u8</span> = <span class="tok-str">'a'</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: a\n&quot;</span>, <span class="tok-str">&quot;UTF-8: {u}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u21</span> = <span class="tok-number">0x1F310</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: 🌐\n&quot;</span>, <span class="tok-str">&quot;UTF-8: {u}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u21</span> = <span class="tok-number">0xD800</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: �\n&quot;</span>, <span class="tok-str">&quot;UTF-8: {u}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value: <span class="tok-type">u21</span> = <span class="tok-number">0x110001</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: �\n&quot;</span>, <span class="tok-str">&quot;UTF-8: {u}\n&quot;</span>, .{value});
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;int.padded&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8: '   1'&quot;</span>, <span class="tok-str">&quot;u8: '{:4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8: '1000'&quot;</span>, <span class="tok-str">&quot;u8: '{:0&lt;4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8: '0001'&quot;</span>, <span class="tok-str">&quot;u8: '{:0&gt;4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8: '0100'&quot;</span>, <span class="tok-str">&quot;u8: '{:0^4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">u8</span>, <span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i8: '-1  '&quot;</span>, <span class="tok-str">&quot;i8: '{:&lt;4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i8</span>, -<span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i8: '  -1'&quot;</span>, <span class="tok-str">&quot;i8: '{:&gt;4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i8</span>, -<span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i8: ' -1 '&quot;</span>, <span class="tok-str">&quot;i8: '{:^4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i8</span>, -<span class="tok-number">1</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i16: '-1234'&quot;</span>, <span class="tok-str">&quot;i16: '{:4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i16</span>, -<span class="tok-number">1234</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i16: '+1234'&quot;</span>, <span class="tok-str">&quot;i16: '{:4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i16</span>, <span class="tok-number">1234</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i16: '-12345'&quot;</span>, <span class="tok-str">&quot;i16: '{:4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i16</span>, -<span class="tok-number">12345</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;i16: '+12345'&quot;</span>, <span class="tok-str">&quot;i16: '{:4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">i16</span>, <span class="tok-number">12345</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u16: '12345'&quot;</span>, <span class="tok-str">&quot;u16: '{:4}'&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">u16</span>, <span class="tok-number">12345</span>)});

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: 'ü   '&quot;</span>, <span class="tok-str">&quot;UTF-8: '{u:&lt;4}'&quot;</span>, .{<span class="tok-str">'ü'</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: '   ü'&quot;</span>, <span class="tok-str">&quot;UTF-8: '{u:&gt;4}'&quot;</span>, .{<span class="tok-str">'ü'</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;UTF-8: ' ü  '&quot;</span>, <span class="tok-str">&quot;UTF-8: '{u:^4}'&quot;</span>, .{<span class="tok-str">'ü'</span>});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;buffer&quot;</span> {
    {
        <span class="tok-kw">var</span> buf1: [<span class="tok-number">32</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
        <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(&amp;buf1);
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-number">1234</span>, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <a href="std.html">std</a>.<a href="std.html#std.options">options</a>.<a href="#">fmt_max_depth</a>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;1234&quot;</span>, fbs.getWritten());

        fbs.reset();
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-str">'a'</span>, <span class="tok-str">&quot;c&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <a href="std.html">std</a>.<a href="std.html#std.options">options</a>.<a href="#">fmt_max_depth</a>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;a&quot;</span>, fbs.getWritten());

        fbs.reset();
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(<span class="tok-number">0b1100</span>, <span class="tok-str">&quot;b&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <a href="std.html">std</a>.<a href="std.html#std.options">options</a>.<a href="#">fmt_max_depth</a>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;1100&quot;</span>, fbs.getWritten());
    }
}<span class="tok-comment">

// Test formatting of arrays by value, by single-item pointer, and as a slice
</span><span class="tok-kw">fn</span> <span class="tok-fn">expectArrayFmt</span>(expected: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> template: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, <span class="tok-kw">comptime</span> array_value: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(expected, template, .{array_value});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(expected, template, .{&amp;array_value});
    <span class="tok-kw">var</span> runtime_zero: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
    _ = &amp;runtime_zero;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(expected, template, .{array_value[runtime_zero..]});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;array&quot;</span> {
    {
        <span class="tok-kw">const</span> value: [<span class="tok-number">3</span>]<span class="tok-type">u8</span> = <span class="tok-str">&quot;abc&quot;</span>.*;
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: abc\n&quot;</span>, <span class="tok-str">&quot;array: {s}\n&quot;</span>, value);
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: { 97, 98, 99 }\n&quot;</span>, <span class="tok-str">&quot;array: {d}\n&quot;</span>, value);
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: { 61, 62, 63 }\n&quot;</span>, <span class="tok-str">&quot;array: {x}\n&quot;</span>, value);
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: { 97, 98, 99 }\n&quot;</span>, <span class="tok-str">&quot;array: {any}\n&quot;</span>, value);

        <span class="tok-kw">var</span> buf: [<span class="tok-number">100</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(
            <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf[<span class="tok-number">0</span>..], <span class="tok-str">&quot;array: [3]u8@{x}\n&quot;</span>, .{<span class="tok-builtin">@intFromPtr</span>(&amp;value)}),
            <span class="tok-str">&quot;array: {*}\n&quot;</span>,
            .{&amp;value},
        );
    }

    {
        <span class="tok-kw">const</span> value = [<span class="tok-number">2</span>][<span class="tok-number">3</span>]<span class="tok-type">u8</span>{ <span class="tok-str">&quot;abc&quot;</span>.*, <span class="tok-str">&quot;def&quot;</span>.* };

        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: { abc, def }\n&quot;</span>, <span class="tok-str">&quot;array: {s}\n&quot;</span>, value);
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: { { 97, 98, 99 }, { 100, 101, 102 } }\n&quot;</span>, <span class="tok-str">&quot;array: {d}\n&quot;</span>, value);
        <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.expectArrayFmt">expectArrayFmt</a>(<span class="tok-str">&quot;array: { { 61, 62, 63 }, { 64, 65, 66 } }\n&quot;</span>, <span class="tok-str">&quot;array: {x}\n&quot;</span>, value);
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;slice&quot;</span> {
    {
        <span class="tok-kw">const</span> value: []<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;abc&quot;</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: abc\n&quot;</span>, <span class="tok-str">&quot;slice: {s}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: { 97, 98, 99 }\n&quot;</span>, <span class="tok-str">&quot;slice: {d}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: { 61, 62, 63 }\n&quot;</span>, <span class="tok-str">&quot;slice: {x}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: { 97, 98, 99 }\n&quot;</span>, <span class="tok-str">&quot;slice: {any}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">var</span> runtime_zero: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
        _ = &amp;runtime_zero;
        <span class="tok-kw">const</span> value = <span class="tok-builtin">@as</span>([*]<span class="tok-kw">align</span>(<span class="tok-number">1</span>) <span class="tok-kw">const</span> []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, <span class="tok-builtin">@ptrFromInt</span>(<span class="tok-number">0xdeadbeef</span>))[runtime_zero..runtime_zero];
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: []const u8@deadbeef\n&quot;</span>, <span class="tok-str">&quot;slice: {*}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> null_term_slice: [:<span class="tok-number">0</span>]<span class="tok-kw">const</span> <span class="tok-type">u8</span> = <span class="tok-str">&quot;\x00hello\x00&quot;</span>;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;buf: \x00hello\x00\n&quot;</span>, <span class="tok-str">&quot;buf: {s}\n&quot;</span>, .{null_term_slice});
    }

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;buf:  Test\n&quot;</span>, <span class="tok-str">&quot;buf: {s:5}\n&quot;</span>, .{<span class="tok-str">&quot;Test&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;buf: Test\n Other text&quot;</span>, <span class="tok-str">&quot;buf: {s}\n Other text&quot;</span>, .{<span class="tok-str">&quot;Test&quot;</span>});

    {
        <span class="tok-kw">var</span> int_slice = [_]<span class="tok-type">u32</span>{ <span class="tok-number">1</span>, <span class="tok-number">4096</span>, <span class="tok-number">391891</span>, <span class="tok-number">1111111111</span> };
        <span class="tok-kw">var</span> runtime_zero: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
        _ = &amp;runtime_zero;
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;int: { 1, 4096, 391891, 1111111111 }&quot;</span>, <span class="tok-str">&quot;int: {any}&quot;</span>, .{int_slice[runtime_zero..]});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;int: { 1, 4096, 391891, 1111111111 }&quot;</span>, <span class="tok-str">&quot;int: {d}&quot;</span>, .{int_slice[runtime_zero..]});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;int: { 1, 1000, 5fad3, 423a35c7 }&quot;</span>, <span class="tok-str">&quot;int: {x}&quot;</span>, .{int_slice[runtime_zero..]});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;int: { 00001, 01000, 5fad3, 423a35c7 }&quot;</span>, <span class="tok-str">&quot;int: {x:0&gt;5}&quot;</span>, .{int_slice[runtime_zero..]});
    }
    {
        <span class="tok-kw">const</span> S1 = <span class="tok-kw">struct</span> {
            x: <span class="tok-type">u8</span>,
        };
        <span class="tok-kw">const</span> struct_slice: []<span class="tok-kw">const</span> S1 = &amp;[_]S1{ S1{ .x = <span class="tok-number">8</span> }, S1{ .x = <span class="tok-number">42</span> } };
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: { fmt.test.slice.S1{ .x = 8 }, fmt.test.slice.S1{ .x = 42 } }&quot;</span>, <span class="tok-str">&quot;slice: {any}&quot;</span>, .{struct_slice});
    }
    {
        <span class="tok-kw">const</span> S2 = <span class="tok-kw">struct</span> {
            x: <span class="tok-type">u8</span>,

            <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(s: <span class="tok-builtin">@This</span>(), <span class="tok-kw">comptime</span> _: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, _: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
                <span class="tok-kw">try</span> writer.print(<span class="tok-str">&quot;S2({})&quot;</span>, .{s.x});
            }
        };
        <span class="tok-kw">const</span> struct_slice: []<span class="tok-kw">const</span> S2 = &amp;[_]S2{ S2{ .x = <span class="tok-number">8</span> }, S2{ .x = <span class="tok-number">42</span> } };
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;slice: { S2(8), S2(42) }&quot;</span>, <span class="tok-str">&quot;slice: {any}&quot;</span>, .{struct_slice});
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;escape non-printable&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;abc 123&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceEscapeLower">fmtSliceEscapeLower</a>(<span class="tok-str">&quot;abc 123&quot;</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;ab\\xffc&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceEscapeLower">fmtSliceEscapeLower</a>(<span class="tok-str">&quot;ab\xffc&quot;</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;abc 123&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceEscapeUpper">fmtSliceEscapeUpper</a>(<span class="tok-str">&quot;abc 123&quot;</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;ab\\xFFc&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceEscapeUpper">fmtSliceEscapeUpper</a>(<span class="tok-str">&quot;ab\xffc&quot;</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;pointer&quot;</span> {
    {
        <span class="tok-kw">const</span> value = <span class="tok-builtin">@as</span>(*<span class="tok-kw">align</span>(<span class="tok-number">1</span>) <span class="tok-type">i32</span>, <span class="tok-builtin">@ptrFromInt</span>(<span class="tok-number">0xdeadbeef</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;pointer: i32@deadbeef\n&quot;</span>, <span class="tok-str">&quot;pointer: {}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;pointer: i32@deadbeef\n&quot;</span>, <span class="tok-str">&quot;pointer: {*}\n&quot;</span>, .{value});
    }
    <span class="tok-kw">const</span> FnPtr = *<span class="tok-kw">align</span>(<span class="tok-number">1</span>) <span class="tok-kw">const</span> <span class="tok-kw">fn</span> () <span class="tok-type">void</span>;
    {
        <span class="tok-kw">const</span> value = <span class="tok-builtin">@as</span>(FnPtr, <span class="tok-builtin">@ptrFromInt</span>(<span class="tok-number">0xdeadbeef</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;pointer: fn () void@deadbeef\n&quot;</span>, <span class="tok-str">&quot;pointer: {}\n&quot;</span>, .{value});
    }
    {
        <span class="tok-kw">const</span> value = <span class="tok-builtin">@as</span>(FnPtr, <span class="tok-builtin">@ptrFromInt</span>(<span class="tok-number">0xdeadbeef</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;pointer: fn () void@deadbeef\n&quot;</span>, <span class="tok-str">&quot;pointer: {}\n&quot;</span>, .{value});
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;cstr&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(
        <span class="tok-str">&quot;cstr: Test C\n&quot;</span>,
        <span class="tok-str">&quot;cstr: {s}\n&quot;</span>,
        .{<span class="tok-builtin">@as</span>([*c]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, <span class="tok-builtin">@ptrCast</span>(<span class="tok-str">&quot;Test C&quot;</span>))},
    );
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(
        <span class="tok-str">&quot;cstr:     Test C\n&quot;</span>,
        <span class="tok-str">&quot;cstr: {s:10}\n&quot;</span>,
        .{<span class="tok-builtin">@as</span>([*c]<span class="tok-kw">const</span> <span class="tok-type">u8</span>, <span class="tok-builtin">@ptrCast</span>(<span class="tok-str">&quot;Test C&quot;</span>))},
    );
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;filesize&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 42B\n&quot;</span>, <span class="tok-str">&quot;file size: {}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">42</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 42B\n&quot;</span>, <span class="tok-str">&quot;file size: {}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeBin">fmtIntSizeBin</a>(<span class="tok-number">42</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 63MB\n&quot;</span>, <span class="tok-str">&quot;file size: {}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">63</span> * <span class="tok-number">1000</span> * <span class="tok-number">1000</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 63MiB\n&quot;</span>, <span class="tok-str">&quot;file size: {}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeBin">fmtIntSizeBin</a>(<span class="tok-number">63</span> * <span class="tok-number">1024</span> * <span class="tok-number">1024</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 42B\n&quot;</span>, <span class="tok-str">&quot;file size: {:.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">42</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size:       42B\n&quot;</span>, <span class="tok-str">&quot;file size: {:&gt;9.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">42</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 66.06MB\n&quot;</span>, <span class="tok-str">&quot;file size: {:.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">63</span> * <span class="tok-number">1024</span> * <span class="tok-number">1024</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 60.08MiB\n&quot;</span>, <span class="tok-str">&quot;file size: {:.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeBin">fmtIntSizeBin</a>(<span class="tok-number">63</span> * <span class="tok-number">1000</span> * <span class="tok-number">1000</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: =66.06MB=\n&quot;</span>, <span class="tok-str">&quot;file size: {:=^9.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">63</span> * <span class="tok-number">1024</span> * <span class="tok-number">1024</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size:   66.06MB\n&quot;</span>, <span class="tok-str">&quot;file size: {: &gt;9.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">63</span> * <span class="tok-number">1024</span> * <span class="tok-number">1024</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 66.06MB  \n&quot;</span>, <span class="tok-str">&quot;file size: {: &lt;9.2}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<span class="tok-number">63</span> * <span class="tok-number">1024</span> * <span class="tok-number">1024</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;file size: 0.01844674407370955ZB\n&quot;</span>, <span class="tok-str">&quot;file size: {}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtIntSizeDec">fmtIntSizeDec</a>(<a href="std.math.html">math</a>.<a href="std.math.html#std.math.maxInt">maxInt</a>(<span class="tok-type">u64</span>))});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;struct&quot;</span> {
    {
        <span class="tok-kw">const</span> Struct = <span class="tok-kw">struct</span> {
            field: <span class="tok-type">u8</span>,
        };
        <span class="tok-kw">const</span> value = Struct{ .field = <span class="tok-number">42</span> };
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;struct: fmt.test.struct.Struct{ .field = 42 }\n&quot;</span>, <span class="tok-str">&quot;struct: {}\n&quot;</span>, .{value});
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;struct: fmt.test.struct.Struct{ .field = 42 }\n&quot;</span>, <span class="tok-str">&quot;struct: {}\n&quot;</span>, .{&amp;value});
    }
    {
        <span class="tok-kw">const</span> Struct = <span class="tok-kw">struct</span> {
            a: <span class="tok-type">u0</span>,
            b: <span class="tok-type">u1</span>,
        };
        <span class="tok-kw">const</span> value = Struct{ .a = <span class="tok-number">0</span>, .b = <span class="tok-number">1</span> };
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;struct: fmt.test.struct.Struct{ .a = 0, .b = 1 }\n&quot;</span>, <span class="tok-str">&quot;struct: {}\n&quot;</span>, .{value});
    }

    <span class="tok-kw">const</span> S = <span class="tok-kw">struct</span> {
        a: <span class="tok-type">u32</span>,
        b: <span class="tok-type">anyerror</span>,
    };

    <span class="tok-kw">const</span> inst = S{
        .a = <span class="tok-number">456</span>,
        .b = <span class="tok-kw">error</span>.Unused,
    };

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;fmt.test.struct.S{ .a = 456, .b = error.Unused }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{inst});<span class="tok-comment">
    // Tuples
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{.{}});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ -1 }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{.{-<span class="tok-number">1</span>}});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ -1, 42, 2.5e4 }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{.{ -<span class="tok-number">1</span>, <span class="tok-number">42</span>, <span class="tok-number">0.25e5</span> }});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;enum&quot;</span> {
    <span class="tok-kw">const</span> Enum = <span class="tok-kw">enum</span> {
        One,
        Two,
    };
    <span class="tok-kw">const</span> value = Enum.Two;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.enum.Enum.Two\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{value});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.enum.Enum.Two\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{&amp;value});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.enum.Enum.One\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{Enum.One});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.enum.Enum.Two\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{Enum.Two});<span class="tok-comment">

    // test very large enum to verify ct branch quota is large enough
    // TODO: https://github.com/ziglang/zig/issues/15609
    </span><span class="tok-kw">if</span> (!((<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.cpu">cpu</a>.<a href="#">arch</a> == .wasm32) <span class="tok-kw">and</span> <a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.mode">mode</a> == .Debug)) {
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: os.windows.win32error.Win32Error.INVALID_FUNCTION\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{<a href="std.html">std</a>.<a href="std.os.html">os</a>.<a href="std.os.windows.html">windows</a>.<a href="std.os.windows.win32error.Win32Error.html">Win32Error</a>.<a href="#">INVALID_FUNCTION</a>});
    }

    <span class="tok-kw">const</span> E = <span class="tok-kw">enum</span> {
        One,
        Two,
        Three,
    };

    <span class="tok-kw">const</span> inst = E.Two;

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;fmt.test.enum.E.Two&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{inst});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;non-exhaustive enum&quot;</span> {
    <span class="tok-kw">const</span> Enum = <span class="tok-kw">enum</span>(<span class="tok-type">u16</span>) {
        One = <span class="tok-number">0x000f</span>,
        Two = <span class="tok-number">0xbeef</span>,
        _,
    };
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum.One\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{Enum.One});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum.Two\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{Enum.Two});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum(4660)\n&quot;</span>, <span class="tok-str">&quot;enum: {}\n&quot;</span>, .{<span class="tok-builtin">@as</span>(Enum, <span class="tok-builtin">@enumFromInt</span>(<span class="tok-number">0x1234</span>))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum.One\n&quot;</span>, <span class="tok-str">&quot;enum: {x}\n&quot;</span>, .{Enum.One});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum.Two\n&quot;</span>, <span class="tok-str">&quot;enum: {x}\n&quot;</span>, .{Enum.Two});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum.Two\n&quot;</span>, <span class="tok-str">&quot;enum: {X}\n&quot;</span>, .{Enum.Two});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;enum: fmt.test.non-exhaustive enum.Enum(1234)\n&quot;</span>, <span class="tok-str">&quot;enum: {x}\n&quot;</span>, .{<span class="tok-builtin">@as</span>(Enum, <span class="tok-builtin">@enumFromInt</span>(<span class="tok-number">0x1234</span>))});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.scientific&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 1.34e0&quot;</span>, <span class="tok-str">&quot;f32: {e}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">1.34</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 1.234e1&quot;</span>, <span class="tok-str">&quot;f32: {e}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">12.34</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: -1.234e11&quot;</span>, <span class="tok-str">&quot;f64: {e}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, -<span class="tok-number">12.34e10</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 9.99996e-40&quot;</span>, <span class="tok-str">&quot;f64: {e}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">9.999960e-40</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.scientific.precision&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 1.40971e-42&quot;</span>, <span class="tok-str">&quot;f64: {e:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.409706e-42</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 1.00000e-9&quot;</span>, <span class="tok-str">&quot;f64: {e:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">814313563</span>))))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 7.81250e-3&quot;</span>, <span class="tok-str">&quot;f64: {e:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1006632960</span>))))});<span class="tok-comment">
    // libc rounds 1.000005e5 to 1.00000e5 but zig does 1.00001e5.
    // In fact, libc doesn't round a lot of 5 cases up when one past the precision point.
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 1.00001e5&quot;</span>, <span class="tok-str">&quot;f64: {e:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1203982400</span>))))});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.special&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: nan&quot;</span>, <span class="tok-str">&quot;f64: {}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.nan">nan</a>(<span class="tok-type">f64</span>)});<span class="tok-comment">
    // negative nan is not defined by IEE 754,
    // and ARM thus normalizes it to positive nan
    </span><span class="tok-kw">if</span> (<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.target">target</a>.<a href="#">cpu</a>.<a href="#">arch</a> != .arm) {
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: -nan&quot;</span>, <span class="tok-str">&quot;f64: {}&quot;</span>, .{-<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.nan">nan</a>(<span class="tok-type">f64</span>)});
    }
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: inf&quot;</span>, <span class="tok-str">&quot;f64: {}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.inf">inf</a>(<span class="tok-type">f64</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: -inf&quot;</span>, <span class="tok-str">&quot;f64: {}&quot;</span>, .{-<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.inf">inf</a>(<span class="tok-type">f64</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.hexadecimal.special&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: nan&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.nan">nan</a>(<span class="tok-type">f64</span>)});<span class="tok-comment">
    // negative nan is not defined by IEE 754,
    // and ARM thus normalizes it to positive nan
    </span><span class="tok-kw">if</span> (<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.target">target</a>.<a href="#">cpu</a>.<a href="#">arch</a> != .arm) {
        <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: -nan&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{-<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.nan">nan</a>(<span class="tok-type">f64</span>)});
    }
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: inf&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.inf">inf</a>(<span class="tok-type">f64</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: -inf&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{-<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.inf">inf</a>(<span class="tok-type">f64</span>)});

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x0.0p0&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: -0x0.0p0&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{-<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">0</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.hexadecimal&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f16: 0x1.554p-2&quot;</span>, <span class="tok-str">&quot;f16: {x}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f16</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0x1.555556p-2&quot;</span>, <span class="tok-str">&quot;f32: {x}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x1.5555555555555p-2&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f80: 0x1.5555555555555556p-2&quot;</span>, <span class="tok-str">&quot;f80: {x}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f80</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f128: 0x1.5555555555555555555555555555p-2&quot;</span>, <span class="tok-str">&quot;f128: {x}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f128</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f16: 0x1p-14&quot;</span>, <span class="tok-str">&quot;f16: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMin">floatMin</a>(<span class="tok-type">f16</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0x1p-126&quot;</span>, <span class="tok-str">&quot;f32: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMin">floatMin</a>(<span class="tok-type">f32</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x1p-1022&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMin">floatMin</a>(<span class="tok-type">f64</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f80: 0x1p-16382&quot;</span>, <span class="tok-str">&quot;f80: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMin">floatMin</a>(<span class="tok-type">f80</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f128: 0x1p-16382&quot;</span>, <span class="tok-str">&quot;f128: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMin">floatMin</a>(<span class="tok-type">f128</span>)});

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f16: 0x0.004p-14&quot;</span>, <span class="tok-str">&quot;f16: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatTrueMin">floatTrueMin</a>(<span class="tok-type">f16</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0x0.000002p-126&quot;</span>, <span class="tok-str">&quot;f32: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatTrueMin">floatTrueMin</a>(<span class="tok-type">f32</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x0.0000000000001p-1022&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatTrueMin">floatTrueMin</a>(<span class="tok-type">f64</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f80: 0x0.0000000000000002p-16382&quot;</span>, <span class="tok-str">&quot;f80: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatTrueMin">floatTrueMin</a>(<span class="tok-type">f80</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f128: 0x0.0000000000000000000000000001p-16382&quot;</span>, <span class="tok-str">&quot;f128: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatTrueMin">floatTrueMin</a>(<span class="tok-type">f128</span>)});

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f16: 0x1.ffcp15&quot;</span>, <span class="tok-str">&quot;f16: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMax">floatMax</a>(<span class="tok-type">f16</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0x1.fffffep127&quot;</span>, <span class="tok-str">&quot;f32: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMax">floatMax</a>(<span class="tok-type">f32</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x1.fffffffffffffp1023&quot;</span>, <span class="tok-str">&quot;f64: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMax">floatMax</a>(<span class="tok-type">f64</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f80: 0x1.fffffffffffffffep16383&quot;</span>, <span class="tok-str">&quot;f80: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMax">floatMax</a>(<span class="tok-type">f80</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f128: 0x1.ffffffffffffffffffffffffffffp16383&quot;</span>, <span class="tok-str">&quot;f128: {x}&quot;</span>, .{<a href="std.math.html">math</a>.<a href="std.math.float.html#std.math.float.floatMax">floatMax</a>(<span class="tok-type">f128</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.hexadecimal.precision&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f16: 0x1.5p-2&quot;</span>, <span class="tok-str">&quot;f16: {x:.1}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f16</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0x1.555p-2&quot;</span>, <span class="tok-str">&quot;f32: {x:.3}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x1.55555p-2&quot;</span>, <span class="tok-str">&quot;f64: {x:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f80: 0x1.5555555p-2&quot;</span>, <span class="tok-str">&quot;f80: {x:.7}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f80</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f128: 0x1.555555555p-2&quot;</span>, <span class="tok-str">&quot;f128: {x:.9}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f128</span>, <span class="tok-number">1.0</span> / <span class="tok-number">3.0</span>)});

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f16: 0x1.00000p0&quot;</span>, <span class="tok-str">&quot;f16: {x:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f16</span>, <span class="tok-number">1.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0x1.00000p0&quot;</span>, <span class="tok-str">&quot;f32: {x:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">1.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0x1.00000p0&quot;</span>, <span class="tok-str">&quot;f64: {x:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f80: 0x1.00000p0&quot;</span>, <span class="tok-str">&quot;f80: {x:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f80</span>, <span class="tok-number">1.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f128: 0x1.00000p0&quot;</span>, <span class="tok-str">&quot;f128: {x:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f128</span>, <span class="tok-number">1.0</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.decimal&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 152314000000000000000000000000&quot;</span>, <span class="tok-str">&quot;f64: {d}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.52314e29</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0&quot;</span>, <span class="tok-str">&quot;f32: {d}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">0.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 0&quot;</span>, <span class="tok-str">&quot;f32: {d:.0}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">0.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 1.1&quot;</span>, <span class="tok-str">&quot;f32: {d:.1}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">1.1234</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 1234.57&quot;</span>, <span class="tok-str">&quot;f32: {d:.2}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">1234.567</span>)});<span class="tok-comment">
    // -11.1234 is converted to f64 -11.12339... internally (errol3() function takes f64).
    // -11.12339... is rounded back up to -11.1234
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: -11.1234&quot;</span>, <span class="tok-str">&quot;f32: {d:.4}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, -<span class="tok-number">11.1234</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f32: 91.12345&quot;</span>, <span class="tok-str">&quot;f32: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-number">91.12345</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 91.1234567890&quot;</span>, <span class="tok-str">&quot;f64: {d:.10}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">91.12345678901235</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.00000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">0.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 6&quot;</span>, <span class="tok-str">&quot;f64: {d:.0}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">5.700</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 10.0&quot;</span>, <span class="tok-str">&quot;f64: {d:.1}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">9.999</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 1.000&quot;</span>, <span class="tok-str">&quot;f64: {d:.3}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.00030000&quot;</span>, <span class="tok-str">&quot;f64: {d:.8}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">0.0003</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.00000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1.40130e-45</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.00000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">9.999960e-40</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 10000000000000.00&quot;</span>, <span class="tok-str">&quot;f64: {d:.2}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">9999999999999.999</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 10000000000000000000000000000000000000&quot;</span>, <span class="tok-str">&quot;f64: {d}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1e37</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 100000000000000000000000000000000000000&quot;</span>, <span class="tok-str">&quot;f64: {d}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">1e38</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;float.libc.sanity&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.00001&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">916964781</span>))))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.00001&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">925353389</span>))))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.10000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1036831278</span>))))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 1.00000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1065353133</span>))))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 10.00000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1092616192</span>))))});<span class="tok-comment">

    // libc differences
    //
    // This is 0.015625 exactly according to gdb. We thus round down,
    // however glibc rounds up for some reason. This occurs for all
    // floats of the form x.yyyy25 on a precision point.
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 0.01563&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1015021568</span>))))});<span class="tok-comment">
    // errol3 rounds to ... 630 but libc rounds to ...632. Grisu3
    // also rounds to 630 so I'm inclined to believe libc is not
    // optimal here.
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;f64: 18014400656965630.00000&quot;</span>, <span class="tok-str">&quot;f64: {d:.5}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-builtin">@as</span>(<span class="tok-type">f32</span>, <span class="tok-builtin">@bitCast</span>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">1518338049</span>))))});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;custom&quot;</span> {
    <span class="tok-kw">const</span> Vec2 = <span class="tok-kw">struct</span> {
        <span class="tok-kw">const</span> SelfType = <span class="tok-builtin">@This</span>();
        x: <span class="tok-type">f32</span>,
        y: <span class="tok-type">f32</span>,

        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            self: <a href="std.fmt.html">SelfType</a>,
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) !<span class="tok-type">void</span> {
            _ = options;
            <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span> <span class="tok-kw">or</span> <span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;p&quot;</span>)) {
                <span class="tok-kw">return</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;({d:.3},{d:.3})&quot;</span>, .{ self.x, self.y });
            } <span class="tok-kw">else</span> <span class="tok-kw">if</span> (<span class="tok-kw">comptime</span> <a href="std.html">std</a>.<a href="std.mem.html">mem</a>.<a href="std.mem.html#std.mem.eql">eql</a>(<span class="tok-type">u8</span>, fmt, <span class="tok-str">&quot;d&quot;</span>)) {
                <span class="tok-kw">return</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;{d:.3}x{d:.3}&quot;</span>, .{ self.x, self.y });
            } <span class="tok-kw">else</span> {
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unknown format character: '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>);
            }
        }
    };

    <span class="tok-kw">var</span> value = Vec2{
        .x = <span class="tok-number">10.2</span>,
        .y = <span class="tok-number">2.22</span>,
    };
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;point: (10.200,2.220)\n&quot;</span>, <span class="tok-str">&quot;point: {}\n&quot;</span>, .{&amp;value});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;dim: 10.200x2.220\n&quot;</span>, <span class="tok-str">&quot;dim: {d}\n&quot;</span>, .{&amp;value});<span class="tok-comment">

    // same thing but not passing a pointer
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;point: (10.200,2.220)\n&quot;</span>, <span class="tok-str">&quot;point: {}\n&quot;</span>, .{value});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;dim: 10.200x2.220\n&quot;</span>, <span class="tok-str">&quot;dim: {d}\n&quot;</span>, .{value});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;union&quot;</span> {
    <span class="tok-kw">const</span> TU = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>) {
        float: <span class="tok-type">f32</span>,
        int: <span class="tok-type">u32</span>,
    };

    <span class="tok-kw">const</span> UU = <span class="tok-kw">union</span> {
        float: <span class="tok-type">f32</span>,
        int: <span class="tok-type">u32</span>,
    };

    <span class="tok-kw">const</span> EU = <span class="tok-kw">extern</span> <span class="tok-kw">union</span> {
        float: <span class="tok-type">f32</span>,
        int: <span class="tok-type">u32</span>,
    };

    <span class="tok-kw">const</span> tu_inst = TU{ .int = <span class="tok-number">123</span> };
    <span class="tok-kw">const</span> uu_inst = UU{ .int = <span class="tok-number">456</span> };
    <span class="tok-kw">const</span> eu_inst = EU{ .float = <span class="tok-number">321.123</span> };

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;fmt.test.union.TU{ .int = 123 }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{tu_inst});

    <span class="tok-kw">var</span> buf: [<span class="tok-number">100</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">const</span> uu_result = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf[<span class="tok-number">0</span>..], <span class="tok-str">&quot;{}&quot;</span>, .{uu_inst});
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;fmt.test.union.UU@&quot;</span>, uu_result[<span class="tok-number">0</span>..<span class="tok-number">18</span>]);

    <span class="tok-kw">const</span> eu_result = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(buf[<span class="tok-number">0</span>..], <span class="tok-str">&quot;{}&quot;</span>, .{eu_inst});
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;fmt.test.union.EU@&quot;</span>, eu_result[<span class="tok-number">0</span>..<span class="tok-number">18</span>]);
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;struct.self-referential&quot;</span> {
    <span class="tok-kw">const</span> S = <span class="tok-kw">struct</span> {
        <span class="tok-kw">const</span> SelfType = <span class="tok-builtin">@This</span>();
        a: ?*<a href="std.fmt.html">SelfType</a>,
    };

    <span class="tok-kw">var</span> inst = S{
        .a = <span class="tok-null">null</span>,
    };
    inst.a = &amp;inst;

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;fmt.test.struct.self-referential.S{ .a = fmt.test.struct.self-referential.S{ .a = fmt.test.struct.self-referential.S{ .a = fmt.test.struct.self-referential.S{ ... } } } }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{inst});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;struct.zero-size&quot;</span> {
    <span class="tok-kw">const</span> A = <span class="tok-kw">struct</span> {
        <span class="tok-kw">fn</span> <span class="tok-fn">foo</span>() <span class="tok-type">void</span> {}
    };
    <span class="tok-kw">const</span> B = <span class="tok-kw">struct</span> {
        a: A,
        c: <span class="tok-type">i32</span>,
    };

    <span class="tok-kw">const</span> a = A{};
    <span class="tok-kw">const</span> b = B{ .a = a, .c = <span class="tok-number">0</span> };

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;fmt.test.struct.zero-size.B{ .a = fmt.test.struct.zero-size.A{ }, .c = 0 }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{b});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;bytes.hex&quot;</span> {
    <span class="tok-kw">const</span> some_bytes = <span class="tok-str">&quot;\xCA\xFE\xBA\xBE&quot;</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;lowercase: cafebabe\n&quot;</span>, <span class="tok-str">&quot;lowercase: {x}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexLower">fmtSliceHexLower</a>(some_bytes)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;uppercase: CAFEBABE\n&quot;</span>, <span class="tok-str">&quot;uppercase: {X}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(some_bytes)});<span class="tok-comment">
    //Test Slices
    </span><span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;uppercase: CAFE\n&quot;</span>, <span class="tok-str">&quot;uppercase: {X}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(some_bytes[<span class="tok-number">0</span>..<span class="tok-number">2</span>])});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;lowercase: babe\n&quot;</span>, <span class="tok-str">&quot;lowercase: {x}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexLower">fmtSliceHexLower</a>(some_bytes[<span class="tok-number">2</span>..])});
    <span class="tok-kw">const</span> bytes_with_zeros = <span class="tok-str">&quot;\x00\x0E\xBA\xBE&quot;</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;lowercase: 000ebabe\n&quot;</span>, <span class="tok-str">&quot;lowercase: {x}\n&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexLower">fmtSliceHexLower</a>(bytes_with_zeros)});
}

<span class="tok-comment">/// Encodes a sequence of bytes as hexadecimal digits.</span>
<span class="tok-comment">/// Returns an array containing the encoded bytes.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">bytesToHex</span>(input: <span class="tok-kw">anytype</span>, case: <a href="std.fmt.Case.html">Case</a>) [input.len * <span class="tok-number">2</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">if</span> (input.len == <span class="tok-number">0</span>) <span class="tok-kw">return</span> [_]<span class="tok-type">u8</span>{};
    <span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(<span class="tok-builtin">@TypeOf</span>(input[<span class="tok-number">0</span>]) == <span class="tok-type">u8</span>);<span class="tok-comment"> // elements to encode must be unsigned bytes

    </span><span class="tok-kw">const</span> charset = <span class="tok-str">&quot;0123456789&quot;</span> ++ <span class="tok-kw">if</span> (case == .upper) <span class="tok-str">&quot;ABCDEF&quot;</span> <span class="tok-kw">else</span> <span class="tok-str">&quot;abcdef&quot;</span>;
    <span class="tok-kw">var</span> result: [input.len * <span class="tok-number">2</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">for</span> (input, <span class="tok-number">0</span>..) |b, i| {
        result[i * <span class="tok-number">2</span> + <span class="tok-number">0</span>] = charset[b &gt;&gt; <span class="tok-number">4</span>];
        result[i * <span class="tok-number">2</span> + <span class="tok-number">1</span>] = charset[b &amp; <span class="tok-number">15</span>];
    }
    <span class="tok-kw">return</span> result;
}

<span class="tok-comment">/// Decodes the sequence of bytes represented by the specified string of</span>
<span class="tok-comment">/// hexadecimal characters.</span>
<span class="tok-comment">/// Returns a slice of the output buffer containing the decoded bytes.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hexToBytes</span>(out: []<span class="tok-type">u8</span>, input: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>) ![]<span class="tok-type">u8</span> {<span class="tok-comment">
    // Expect 0 or n pairs of hexadecimal digits.
    </span><span class="tok-kw">if</span> (input.len &amp; <span class="tok-number">1</span> != <span class="tok-number">0</span>)
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.InvalidLength;
    <span class="tok-kw">if</span> (out.len * <span class="tok-number">2</span> &lt; input.len)
        <span class="tok-kw">return</span> <span class="tok-kw">error</span>.NoSpaceLeft;

    <span class="tok-kw">var</span> in_i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
    <span class="tok-kw">while</span> (in_i &lt; input.len) : (in_i += <span class="tok-number">2</span>) {
        <span class="tok-kw">const</span> hi = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.charToDigit">charToDigit</a>(input[in_i], <span class="tok-number">16</span>);
        <span class="tok-kw">const</span> lo = <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.charToDigit">charToDigit</a>(input[in_i + <span class="tok-number">1</span>], <span class="tok-number">16</span>);
        out[in_i / <span class="tok-number">2</span>] = (hi &lt;&lt; <span class="tok-number">4</span>) | lo;
    }

    <span class="tok-kw">return</span> out[<span class="tok-number">0</span> .. in_i / <span class="tok-number">2</span>];
}

<span class="tok-kw">test</span> bytesToHex {
    <span class="tok-kw">const</span> input = <span class="tok-str">&quot;input slice&quot;</span>;
    <span class="tok-kw">const</span> encoded = <a href="std.fmt.html#std.fmt.bytesToHex">bytesToHex</a>(input, .lower);
    <span class="tok-kw">var</span> decoded: [input.len]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualSlices">expectEqualSlices</a>(<span class="tok-type">u8</span>, input, <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;decoded, &amp;encoded));
}

<span class="tok-kw">test</span> hexToBytes {
    <span class="tok-kw">var</span> buf: [<span class="tok-number">32</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;90&quot;</span> ** <span class="tok-number">32</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;90&quot;</span> ** <span class="tok-number">32</span>))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;ABCD&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;ABCD&quot;</span>))});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<a href="std.fmt.html#std.fmt.fmtSliceHexUpper">fmtSliceHexUpper</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;&quot;</span>))});
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidCharacter, <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;012Z&quot;</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.InvalidLength, <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(&amp;buf, <span class="tok-str">&quot;AAA&quot;</span>));
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-kw">error</span>.NoSpaceLeft, <a href="std.fmt.html#std.fmt.hexToBytes">hexToBytes</a>(buf[<span class="tok-number">0</span>..<span class="tok-number">1</span>], <span class="tok-str">&quot;ABAB&quot;</span>));
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;formatIntValue with comptime_int&quot;</span> {
    <span class="tok-kw">const</span> value: <span class="tok-type">comptime_int</span> = <span class="tok-number">123456789123456789</span>;

    <span class="tok-kw">var</span> buf: [<span class="tok-number">20</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(&amp;buf);
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatIntValue">formatIntValue</a>(value, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer());
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;123456789123456789&quot;</span>, fbs.getWritten());
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;formatFloatValue with comptime_float&quot;</span> {
    <span class="tok-kw">const</span> value: <span class="tok-type">comptime_float</span> = <span class="tok-number">1.0</span>;

    <span class="tok-kw">var</span> buf: [<span class="tok-number">20</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(&amp;buf);
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatFloatValue">formatFloatValue</a>(value, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer());
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(fbs.getWritten(), <span class="tok-str">&quot;1e0&quot;</span>);

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;1e0&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{value});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;1e0&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{<span class="tok-number">1.0</span>});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;formatType max_depth&quot;</span> {
    <span class="tok-kw">const</span> Vec2 = <span class="tok-kw">struct</span> {
        <span class="tok-kw">const</span> SelfType = <span class="tok-builtin">@This</span>();
        x: <span class="tok-type">f32</span>,
        y: <span class="tok-type">f32</span>,

        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(
            self: <a href="std.fmt.html">SelfType</a>,
            <span class="tok-kw">comptime</span> fmt: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>,
            options: <a href="std.fmt.FormatOptions.html">FormatOptions</a>,
            writer: <span class="tok-kw">anytype</span>,
        ) !<span class="tok-type">void</span> {
            _ = options;
            <span class="tok-kw">if</span> (fmt.len == <span class="tok-number">0</span>) {
                <span class="tok-kw">return</span> <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;({d:.3},{d:.3})&quot;</span>, .{ self.x, self.y });
            } <span class="tok-kw">else</span> {
                <span class="tok-builtin">@compileError</span>(<span class="tok-str">&quot;unknown format string: '&quot;</span> ++ fmt ++ <span class="tok-str">&quot;'&quot;</span>);
            }
        }
    };
    <span class="tok-kw">const</span> E = <span class="tok-kw">enum</span> {
        One,
        Two,
        Three,
    };
    <span class="tok-kw">const</span> TU = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>) {
        <span class="tok-kw">const</span> SelfType = <span class="tok-builtin">@This</span>();
        float: <span class="tok-type">f32</span>,
        int: <span class="tok-type">u32</span>,
        ptr: ?*<a href="std.fmt.html">SelfType</a>,
    };
    <span class="tok-kw">const</span> S = <span class="tok-kw">struct</span> {
        <span class="tok-kw">const</span> SelfType = <span class="tok-builtin">@This</span>();
        a: ?*<a href="std.fmt.html">SelfType</a>,
        tu: TU,
        e: E,
        vec: Vec2,
    };

    <span class="tok-kw">var</span> inst = S{
        .a = <span class="tok-null">null</span>,
        .tu = TU{ .ptr = <span class="tok-null">null</span> },
        .e = E.Two,
        .vec = Vec2{ .x = <span class="tok-number">10.2</span>, .y = <span class="tok-number">2.22</span> },
    };
    inst.a = &amp;inst;
    inst.tu.ptr = &amp;inst.tu;

    <span class="tok-kw">var</span> buf: [<span class="tok-number">1000</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">var</span> fbs = <a href="std.html">std</a>.<a href="std.io.html">io</a>.<a href="std.io.fixed_buffer_stream.html#std.io.fixed_buffer_stream.fixedBufferStream">fixedBufferStream</a>(&amp;buf);
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(inst, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <span class="tok-number">0</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;fmt.test.formatType max_depth.S{ ... }&quot;</span>, fbs.getWritten());

    fbs.reset();
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(inst, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <span class="tok-number">1</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;fmt.test.formatType max_depth.S{ .a = fmt.test.formatType max_depth.S{ ... }, .tu = fmt.test.formatType max_depth.TU{ ... }, .e = fmt.test.formatType max_depth.E.Two, .vec = (10.200,2.220) }&quot;</span>, fbs.getWritten());

    fbs.reset();
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(inst, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <span class="tok-number">2</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;fmt.test.formatType max_depth.S{ .a = fmt.test.formatType max_depth.S{ .a = fmt.test.formatType max_depth.S{ ... }, .tu = fmt.test.formatType max_depth.TU{ ... }, .e = fmt.test.formatType max_depth.E.Two, .vec = (10.200,2.220) }, .tu = fmt.test.formatType max_depth.TU{ .ptr = fmt.test.formatType max_depth.TU{ ... } }, .e = fmt.test.formatType max_depth.E.Two, .vec = (10.200,2.220) }&quot;</span>, fbs.getWritten());

    fbs.reset();
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(inst, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <span class="tok-number">3</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;fmt.test.formatType max_depth.S{ .a = fmt.test.formatType max_depth.S{ .a = fmt.test.formatType max_depth.S{ .a = fmt.test.formatType max_depth.S{ ... }, .tu = fmt.test.formatType max_depth.TU{ ... }, .e = fmt.test.formatType max_depth.E.Two, .vec = (10.200,2.220) }, .tu = fmt.test.formatType max_depth.TU{ .ptr = fmt.test.formatType max_depth.TU{ ... } }, .e = fmt.test.formatType max_depth.E.Two, .vec = (10.200,2.220) }, .tu = fmt.test.formatType max_depth.TU{ .ptr = fmt.test.formatType max_depth.TU{ .ptr = fmt.test.formatType max_depth.TU{ ... } } }, .e = fmt.test.formatType max_depth.E.Two, .vec = (10.200,2.220) }&quot;</span>, fbs.getWritten());

    <span class="tok-kw">const</span> vec: <span class="tok-builtin">@Vector</span>(<span class="tok-number">4</span>, <span class="tok-type">i32</span>) = .{ <span class="tok-number">1</span>, <span class="tok-number">2</span>, <span class="tok-number">3</span>, <span class="tok-number">4</span> };
    fbs.reset();
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(vec, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <span class="tok-number">0</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;{ ... }&quot;</span>, fbs.getWritten());

    fbs.reset();
    <span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.formatType">formatType</a>(vec, <span class="tok-str">&quot;&quot;</span>, <a href="std.fmt.FormatOptions.html">FormatOptions</a>{}, fbs.writer(), <span class="tok-number">1</span>);
    <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;{ 1, 2, 3, 4 }&quot;</span>, fbs.getWritten());
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;positional&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;2 1 0&quot;</span>, <span class="tok-str">&quot;{2} {1} {0}&quot;</span>, .{ <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">0</span>), <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">1</span>), <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">2</span>) });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;2 1 0&quot;</span>, <span class="tok-str">&quot;{2} {1} {}&quot;</span>, .{ <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">0</span>), <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">1</span>), <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">2</span>) });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;0 0&quot;</span>, <span class="tok-str">&quot;{0} {0}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">0</span>)});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;0 1&quot;</span>, <span class="tok-str">&quot;{} {1}&quot;</span>, .{ <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">0</span>), <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">1</span>) });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;1 0 0 1&quot;</span>, <span class="tok-str">&quot;{1} {} {0} {}&quot;</span>, .{ <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">0</span>), <span class="tok-builtin">@as</span>(<span class="tok-type">usize</span>, <span class="tok-number">1</span>) });
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;positional with specifier&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;10.0&quot;</span>, <span class="tok-str">&quot;{0d:.1}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">9.999</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;positional/alignment/width/precision&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;10.0&quot;</span>, <span class="tok-str">&quot;{0d: &gt;3.1}&quot;</span>, .{<span class="tok-builtin">@as</span>(<span class="tok-type">f64</span>, <span class="tok-number">9.999</span>)});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;vector&quot;</span> {
    <span class="tok-kw">if</span> ((<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.cpu">cpu</a>.<a href="#">arch</a> == .armeb <span class="tok-kw">or</span> <a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.cpu">cpu</a>.<a href="#">arch</a> == .thumbeb) <span class="tok-kw">and</span> <a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.zig_backend">zig_backend</a> == .stage2_llvm) <span class="tok-kw">return</span> <span class="tok-kw">error</span>.SkipZigTest;<span class="tok-comment"> // https://github.com/ziglang/zig/issues/22060
    </span><span class="tok-kw">if</span> (<a href="builtin.html">builtin</a>.<a href="builtin.html#builtin.target">target</a>.<a href="#">cpu</a>.<a href="#">arch</a> == .riscv64) {<span class="tok-comment">
        // https://github.com/ziglang/zig/issues/4486
        </span><span class="tok-kw">return</span> <span class="tok-kw">error</span>.SkipZigTest;
    }

    <span class="tok-kw">const</span> vbool: <span class="tok-builtin">@Vector</span>(<span class="tok-number">4</span>, <span class="tok-type">bool</span>) = [_]<span class="tok-type">bool</span>{ <span class="tok-null">true</span>, <span class="tok-null">false</span>, <span class="tok-null">true</span>, <span class="tok-null">false</span> };
    <span class="tok-kw">const</span> vi64: <span class="tok-builtin">@Vector</span>(<span class="tok-number">4</span>, <span class="tok-type">i64</span>) = [_]<span class="tok-type">i64</span>{ -<span class="tok-number">2</span>, -<span class="tok-number">1</span>, <span class="tok-number">0</span>, <span class="tok-number">1</span> };
    <span class="tok-kw">const</span> vu64: <span class="tok-builtin">@Vector</span>(<span class="tok-number">4</span>, <span class="tok-type">u64</span>) = [_]<span class="tok-type">u64</span>{ <span class="tok-number">1000</span>, <span class="tok-number">2000</span>, <span class="tok-number">3000</span>, <span class="tok-number">4000</span> };

    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ true, false, true, false }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{vbool});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ -2, -1, 0, 1 }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{vi64});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{    -2,    -1,    +0,    +1 }&quot;</span>, <span class="tok-str">&quot;{d:5}&quot;</span>, .{vi64});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ 1000, 2000, 3000, 4000 }&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{vu64});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;{ 3e8, 7d0, bb8, fa0 }&quot;</span>, <span class="tok-str">&quot;{x}&quot;</span>, .{vu64});

    <span class="tok-kw">const</span> x: [<span class="tok-number">4</span>]<span class="tok-type">u64</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">const</span> vp: <span class="tok-builtin">@Vector</span>(<span class="tok-number">4</span>, *<span class="tok-kw">const</span> <span class="tok-type">u64</span>) = [_]*<span class="tok-kw">const</span> <span class="tok-type">u64</span>{ &amp;x[<span class="tok-number">0</span>], &amp;x[<span class="tok-number">1</span>], &amp;x[<span class="tok-number">2</span>], &amp;x[<span class="tok-number">3</span>] };
    <span class="tok-kw">const</span> vop: <span class="tok-builtin">@Vector</span>(<span class="tok-number">4</span>, ?*<span class="tok-kw">const</span> <span class="tok-type">u64</span>) = [_]?*<span class="tok-kw">const</span> <span class="tok-type">u64</span>{ &amp;x[<span class="tok-number">0</span>], <span class="tok-null">null</span>, <span class="tok-null">null</span>, &amp;x[<span class="tok-number">3</span>] };

    <span class="tok-kw">var</span> expect_buffer: [<span class="tok-builtin">@sizeOf</span>(<span class="tok-type">usize</span>) * <span class="tok-number">2</span> * <span class="tok-number">4</span> + <span class="tok-number">64</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(
        &amp;expect_buffer,
        <span class="tok-str">&quot;{{ {}, {}, {}, {} }}&quot;</span>,
        .{ &amp;x[<span class="tok-number">0</span>], &amp;x[<span class="tok-number">1</span>], &amp;x[<span class="tok-number">2</span>], &amp;x[<span class="tok-number">3</span>] },
    ), <span class="tok-str">&quot;{}&quot;</span>, .{vp});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-kw">try</span> <a href="std.fmt.html#std.fmt.bufPrint">bufPrint</a>(
        &amp;expect_buffer,
        <span class="tok-str">&quot;{{ {?}, null, null, {?} }}&quot;</span>,
        .{ &amp;x[<span class="tok-number">0</span>], &amp;x[<span class="tok-number">3</span>] },
    ), <span class="tok-str">&quot;{any}&quot;</span>, .{vop});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;enum-literal&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;.hello_world&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{.hello_world});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;padding&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;Simple&quot;</span>, <span class="tok-str">&quot;{s}&quot;</span>, .{<span class="tok-str">&quot;Simple&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;      true&quot;</span>, <span class="tok-str">&quot;{:10}&quot;</span>, .{<span class="tok-null">true</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;      true&quot;</span>, <span class="tok-str">&quot;{:&gt;10}&quot;</span>, .{<span class="tok-null">true</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;======true&quot;</span>, <span class="tok-str">&quot;{:=&gt;10}&quot;</span>, .{<span class="tok-null">true</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;true======&quot;</span>, <span class="tok-str">&quot;{:=&lt;10}&quot;</span>, .{<span class="tok-null">true</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;   true   &quot;</span>, <span class="tok-str">&quot;{:^10}&quot;</span>, .{<span class="tok-null">true</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;===true===&quot;</span>, <span class="tok-str">&quot;{:=^10}&quot;</span>, .{<span class="tok-null">true</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;           Minimum width&quot;</span>, <span class="tok-str">&quot;{s:18} width&quot;</span>, .{<span class="tok-str">&quot;Minimum&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;==================Filled&quot;</span>, <span class="tok-str">&quot;{s:=&gt;24}&quot;</span>, .{<span class="tok-str">&quot;Filled&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;        Centered        &quot;</span>, <span class="tok-str">&quot;{s:^24}&quot;</span>, .{<span class="tok-str">&quot;Centered&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;-&quot;</span>, <span class="tok-str">&quot;{s:-^1}&quot;</span>, .{<span class="tok-str">&quot;&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;==crêpe===&quot;</span>, <span class="tok-str">&quot;{s:=^10}&quot;</span>, .{<span class="tok-str">&quot;crêpe&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;=====crêpe&quot;</span>, <span class="tok-str">&quot;{s:=&gt;10}&quot;</span>, .{<span class="tok-str">&quot;crêpe&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;crêpe=====&quot;</span>, <span class="tok-str">&quot;{s:=&lt;10}&quot;</span>, .{<span class="tok-str">&quot;crêpe&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;====a&quot;</span>, <span class="tok-str">&quot;{c:=&gt;5}&quot;</span>, .{<span class="tok-str">'a'</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;==a==&quot;</span>, <span class="tok-str">&quot;{c:=^5}&quot;</span>, .{<span class="tok-str">'a'</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;a====&quot;</span>, <span class="tok-str">&quot;{c:=&lt;5}&quot;</span>, .{<span class="tok-str">'a'</span>});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;padding fill char utf&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;──crêpe───&quot;</span>, <span class="tok-str">&quot;{s:─^10}&quot;</span>, .{<span class="tok-str">&quot;crêpe&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;─────crêpe&quot;</span>, <span class="tok-str">&quot;{s:─&gt;10}&quot;</span>, .{<span class="tok-str">&quot;crêpe&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;crêpe─────&quot;</span>, <span class="tok-str">&quot;{s:─&lt;10}&quot;</span>, .{<span class="tok-str">&quot;crêpe&quot;</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;────a&quot;</span>, <span class="tok-str">&quot;{c:─&gt;5}&quot;</span>, .{<span class="tok-str">'a'</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;──a──&quot;</span>, <span class="tok-str">&quot;{c:─^5}&quot;</span>, .{<span class="tok-str">'a'</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;a────&quot;</span>, <span class="tok-str">&quot;{c:─&lt;5}&quot;</span>, .{<span class="tok-str">'a'</span>});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;decimal float padding&quot;</span> {
    <span class="tok-kw">const</span> number: <span class="tok-type">f32</span> = <span class="tok-number">3.1415</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;left-pad:   **3.142\n&quot;</span>, <span class="tok-str">&quot;left-pad:   {d:*&gt;7.3}\n&quot;</span>, .{number});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;center-pad: *3.142*\n&quot;</span>, <span class="tok-str">&quot;center-pad: {d:*^7.3}\n&quot;</span>, .{number});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;right-pad:  3.142**\n&quot;</span>, <span class="tok-str">&quot;right-pad:  {d:*&lt;7.3}\n&quot;</span>, .{number});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;sci float padding&quot;</span> {
    <span class="tok-kw">const</span> number: <span class="tok-type">f32</span> = <span class="tok-number">3.1415</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;left-pad:   ****3.142e0\n&quot;</span>, <span class="tok-str">&quot;left-pad:   {e:*&gt;11.3}\n&quot;</span>, .{number});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;center-pad: **3.142e0**\n&quot;</span>, <span class="tok-str">&quot;center-pad: {e:*^11.3}\n&quot;</span>, .{number});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;right-pad:  3.142e0****\n&quot;</span>, <span class="tok-str">&quot;right-pad:  {e:*&lt;11.3}\n&quot;</span>, .{number});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;padding.zero&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;zero-pad: '0042'&quot;</span>, <span class="tok-str">&quot;zero-pad: '{:04}'&quot;</span>, .{<span class="tok-number">42</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;std-pad: '        42'&quot;</span>, <span class="tok-str">&quot;std-pad: '{:10}'&quot;</span>, .{<span class="tok-number">42</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;std-pad-1: '001'&quot;</span>, <span class="tok-str">&quot;std-pad-1: '{:0&gt;3}'&quot;</span>, .{<span class="tok-number">1</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;std-pad-2: '911'&quot;</span>, <span class="tok-str">&quot;std-pad-2: '{:1&lt;03}'&quot;</span>, .{<span class="tok-number">9</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;std-pad-3: '  1'&quot;</span>, <span class="tok-str">&quot;std-pad-3: '{:&gt;03}'&quot;</span>, .{<span class="tok-number">1</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;center-pad: '515'&quot;</span>, <span class="tok-str">&quot;center-pad: '{:5^03}'&quot;</span>, .{<span class="tok-number">1</span>});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;null&quot;</span> {
    <span class="tok-kw">const</span> inst = <span class="tok-null">null</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;null&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{inst});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;type&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;u8&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{<span class="tok-type">u8</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;?f32&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{?<span class="tok-type">f32</span>});
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;[]const u8&quot;</span>, <span class="tok-str">&quot;{}&quot;</span>, .{[]<span class="tok-kw">const</span> <span class="tok-type">u8</span>});
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;named arguments&quot;</span> {
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;hello world!&quot;</span>, <span class="tok-str">&quot;{s} world{c}&quot;</span>, .{ <span class="tok-str">&quot;hello&quot;</span>, <span class="tok-str">'!'</span> });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;hello world!&quot;</span>, <span class="tok-str">&quot;{[greeting]s} world{[punctuation]c}&quot;</span>, .{ .punctuation = <span class="tok-str">'!'</span>, .greeting = <span class="tok-str">&quot;hello&quot;</span> });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;hello world!&quot;</span>, <span class="tok-str">&quot;{[1]s} world{[0]c}&quot;</span>, .{ <span class="tok-str">'!'</span>, <span class="tok-str">&quot;hello&quot;</span> });
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;runtime width specifier&quot;</span> {
    <span class="tok-kw">const</span> width: <span class="tok-type">usize</span> = <span class="tok-number">9</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;~~hello~~&quot;</span>, <span class="tok-str">&quot;{s:~^[1]}&quot;</span>, .{ <span class="tok-str">&quot;hello&quot;</span>, width });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;~~hello~~&quot;</span>, <span class="tok-str">&quot;{s:~^[width]}&quot;</span>, .{ .string = <span class="tok-str">&quot;hello&quot;</span>, .width = width });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;    hello&quot;</span>, <span class="tok-str">&quot;{s:[1]}&quot;</span>, .{ <span class="tok-str">&quot;hello&quot;</span>, width });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;42     hello&quot;</span>, <span class="tok-str">&quot;{d} {s:[2]}&quot;</span>, .{ <span class="tok-number">42</span>, <span class="tok-str">&quot;hello&quot;</span>, width });
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;runtime precision specifier&quot;</span> {
    <span class="tok-kw">const</span> number: <span class="tok-type">f32</span> = <span class="tok-number">3.1415</span>;
    <span class="tok-kw">const</span> precision: <span class="tok-type">usize</span> = <span class="tok-number">2</span>;
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;3.14e0&quot;</span>, <span class="tok-str">&quot;{:1.[1]}&quot;</span>, .{ number, precision });
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;3.14e0&quot;</span>, <span class="tok-str">&quot;{:1.[precision]}&quot;</span>, .{ .number = number, .precision = precision });
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;recursive format function&quot;</span> {
    <span class="tok-kw">const</span> R = <span class="tok-kw">union</span>(<span class="tok-kw">enum</span>) {
        <span class="tok-kw">const</span> R = <span class="tok-builtin">@This</span>();
        Leaf: <span class="tok-type">i32</span>,
        Branch: <span class="tok-kw">struct</span> { left: *<span class="tok-kw">const</span> <a href="std.fmt.html">R</a>, right: *<span class="tok-kw">const</span> <a href="std.fmt.html">R</a> },

        <span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">format</span>(self: <a href="std.fmt.html">R</a>, <span class="tok-kw">comptime</span> _: []<span class="tok-kw">const</span> <span class="tok-type">u8</span>, _: <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.FormatOptions.html">FormatOptions</a>, writer: <span class="tok-kw">anytype</span>) !<span class="tok-type">void</span> {
            <span class="tok-kw">return</span> <span class="tok-kw">switch</span> (self) {
                .Leaf =&gt; |n| <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;Leaf({})&quot;</span>, .{n}),
                .Branch =&gt; |b| <a href="std.html">std</a>.<a href="std.fmt.html">fmt</a>.<a href="std.fmt.html#std.fmt.format">format</a>(writer, <span class="tok-str">&quot;Branch({}, {})&quot;</span>, .{ b.left, b.right }),
            };
        }
    };

    <span class="tok-kw">var</span> r = R{ .Leaf = <span class="tok-number">1</span> };
    <span class="tok-kw">try</span> <a href="std.testing.html#std.testing.expectFmt">expectFmt</a>(<span class="tok-str">&quot;Leaf(1)\n&quot;</span>, <span class="tok-str">&quot;{}\n&quot;</span>, .{&amp;r});
}

<span class="tok-kw">pub</span> <span class="tok-kw">const</span> hex_charset = <span class="tok-str">&quot;0123456789abcdef&quot;</span>;

<span class="tok-comment">/// Converts an unsigned integer of any multiple of u8 to an array of lowercase</span>
<span class="tok-comment">/// hex bytes, little endian.</span>
<span class="tok-kw">pub</span> <span class="tok-kw">fn</span> <span class="tok-fn">hex</span>(x: <span class="tok-kw">anytype</span>) [<span class="tok-builtin">@sizeOf</span>(<span class="tok-builtin">@TypeOf</span>(x)) * <span class="tok-number">2</span>]<span class="tok-type">u8</span> {
    <span class="tok-kw">comptime</span> <a href="std.debug.html#std.debug.assert">assert</a>(<span class="tok-builtin">@typeInfo</span>(<span class="tok-builtin">@TypeOf</span>(x)).int.signedness == .unsigned);
    <span class="tok-kw">var</span> result: [<span class="tok-builtin">@sizeOf</span>(<span class="tok-builtin">@TypeOf</span>(x)) * <span class="tok-number">2</span>]<span class="tok-type">u8</span> = <span class="tok-null">undefined</span>;
    <span class="tok-kw">var</span> i: <span class="tok-type">usize</span> = <span class="tok-number">0</span>;
    <span class="tok-kw">while</span> (i &lt; result.len / <span class="tok-number">2</span>) : (i += <span class="tok-number">1</span>) {
        <span class="tok-kw">const</span> byte: <span class="tok-type">u8</span> = <span class="tok-builtin">@truncate</span>(x &gt;&gt; <span class="tok-builtin">@intCast</span>(<span class="tok-number">8</span> * i));
        result[i * <span class="tok-number">2</span> + <span class="tok-number">0</span>] = <a href="std.fmt.html#std.fmt.hex_charset">hex_charset</a>[byte &gt;&gt; <span class="tok-number">4</span>];
        result[i * <span class="tok-number">2</span> + <span class="tok-number">1</span>] = <a href="std.fmt.html#std.fmt.hex_charset">hex_charset</a>[byte &amp; <span class="tok-number">15</span>];
    }
    <span class="tok-kw">return</span> result;
}

<span class="tok-kw">test</span> hex {
    {
        <span class="tok-kw">const</span> x = <a href="std.fmt.html#std.fmt.hex">hex</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u32</span>, <span class="tok-number">0xdeadbeef</span>));
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(x.len == <span class="tok-number">8</span>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;efbeadde&quot;</span>, &amp;x);
    }
    {
        <span class="tok-kw">const</span> s = <span class="tok-str">&quot;[&quot;</span> ++ <a href="std.fmt.html#std.fmt.hex">hex</a>(<span class="tok-builtin">@as</span>(<span class="tok-type">u64</span>, <span class="tok-number">0x12345678_abcdef00</span>)) ++ <span class="tok-str">&quot;]&quot;</span>;
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(s.len == <span class="tok-number">18</span>);
        <span class="tok-kw">try</span> <a href="std.html">std</a>.<a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;[00efcdab78563412]&quot;</span>, s);
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parser until&quot;</span> {
    {<span class="tok-comment"> // return substring till ':'
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;abc:1234&quot;</span>, .i = <span class="tok-number">0</span> },
        };
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;abc&quot;</span>, parser.until(<span class="tok-str">':'</span>));
    }

    {<span class="tok-comment"> // return the entire string - `ch` not found
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;abc1234&quot;</span>, .i = <span class="tok-number">0</span> },
        };
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;abc1234&quot;</span>, parser.until(<span class="tok-str">':'</span>));
    }

    {<span class="tok-comment"> // substring is empty - `ch` is the only character
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;:&quot;</span>, .i = <span class="tok-number">0</span> },
        };
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;&quot;</span>, parser.until(<span class="tok-str">':'</span>));
    }

    {<span class="tok-comment"> // empty string and `ch` not found
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;&quot;</span>, .i = <span class="tok-number">0</span> },
        };
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;&quot;</span>, parser.until(<span class="tok-str">':'</span>));
    }

    {<span class="tok-comment"> // substring starts at index 2 and goes upto `ch`
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;abc:1234&quot;</span>, .i = <span class="tok-number">2</span> },
        };
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;c&quot;</span>, parser.until(<span class="tok-str">':'</span>));
    }

    {<span class="tok-comment"> // substring starts at index 4 and goes upto the end - `ch` not found
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;abc1234&quot;</span>, .i = <span class="tok-number">4</span> },
        };
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(<span class="tok-str">&quot;234&quot;</span>, parser.until(<span class="tok-str">':'</span>));
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parser peek&quot;</span> {
    {<span class="tok-comment"> // start iteration from the first index
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;hello world&quot;</span>, .i = <span class="tok-number">0</span> },
        };

        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'h'</span>, parser.peek(<span class="tok-number">0</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'e'</span>, parser.peek(<span class="tok-number">1</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">' '</span>, parser.peek(<span class="tok-number">5</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'d'</span>, parser.peek(<span class="tok-number">10</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.peek(<span class="tok-number">11</span>));
    }

    {<span class="tok-comment"> // start iteration from the second last index
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;hello world!&quot;</span>, .i = <span class="tok-number">10</span> },
        };

        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'d'</span>, parser.peek(<span class="tok-number">0</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'!'</span>, parser.peek(<span class="tok-number">1</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.peek(<span class="tok-number">5</span>));
    }

    {<span class="tok-comment"> // start iteration beyond the length of the string
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;hello&quot;</span>, .i = <span class="tok-number">5</span> },
        };

        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.peek(<span class="tok-number">0</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.peek(<span class="tok-number">1</span>));
    }

    {<span class="tok-comment"> // empty string
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{
            .iter = .{ .bytes = <span class="tok-str">&quot;&quot;</span>, .i = <span class="tok-number">0</span> },
        };

        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.peek(<span class="tok-number">0</span>));
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.peek(<span class="tok-number">2</span>));
    }
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parser char&quot;</span> {<span class="tok-comment">
    // character exists - iterator at 0
    </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;~~hello&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'~'</span>, parser.char());<span class="tok-comment">

    // character exists - iterator in the middle
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;~~hello&quot;</span>, .i = <span class="tok-number">3</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'e'</span>, parser.char());<span class="tok-comment">

    // character exists - iterator at the end
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;~~hello&quot;</span>, .i = <span class="tok-number">6</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-str">'o'</span>, parser.char());<span class="tok-comment">

    // character doesn't exist - iterator beyond the length of the string
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;~~hello&quot;</span>, .i = <span class="tok-number">7</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.char());
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parser maybe&quot;</span> {<span class="tok-comment">
    // character exists - iterator at 0
    </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;hello world&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(parser.maybe(<span class="tok-str">'h'</span>));<span class="tok-comment">

    // character exists - iterator at space
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;hello world&quot;</span>, .i = <span class="tok-number">5</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(parser.maybe(<span class="tok-str">' '</span>));<span class="tok-comment">

    // character exists - iterator at the end
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;hello world&quot;</span>, .i = <span class="tok-number">10</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(parser.maybe(<span class="tok-str">'d'</span>));<span class="tok-comment">

    // character doesn't exist - iterator beyond the length of the string
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;hello world&quot;</span>, .i = <span class="tok-number">11</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(!parser.maybe(<span class="tok-str">'e'</span>));
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parser number&quot;</span> {<span class="tok-comment">
    // input is a single digit natural number - iterator at 0
    </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;7&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(<span class="tok-number">7</span> == parser.number());<span class="tok-comment">

    // input is a two digit natural number - iterator at 1
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;29&quot;</span>, .i = <span class="tok-number">1</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(<span class="tok-number">9</span> == parser.number());<span class="tok-comment">

    // input is a two digit natural number - iterator beyond the length of the string
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;32&quot;</span>, .i = <span class="tok-number">2</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.number());<span class="tok-comment">

    // input is an integer
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;0&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(<span class="tok-number">0</span> == parser.number());<span class="tok-comment">

    // input is a negative integer
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;-2&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.number());<span class="tok-comment">

    // input is a string
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;no_number&quot;</span>, .i = <span class="tok-number">2</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.number());<span class="tok-comment">

    // input is a single character string
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;n&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.number());<span class="tok-comment">

    // input is an empty string
    </span>parser = .{ .iter = .{ .bytes = <span class="tok-str">&quot;&quot;</span>, .i = <span class="tok-number">0</span> } };
    <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(<span class="tok-null">null</span>, parser.number());
}

<span class="tok-kw">test</span> <span class="tok-str">&quot;parser specifier&quot;</span> {
    {<span class="tok-comment"> // input string is a digit; iterator at 0
        </span><span class="tok-kw">const</span> expected: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .number = <span class="tok-number">1</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;1&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(expected.number == result.number);
    }

    {<span class="tok-comment"> // input string is a two digit number; iterator at 0
        </span><span class="tok-kw">const</span> digit: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .number = <span class="tok-number">42</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;42&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(digit.number == result.number);
    }

    {<span class="tok-comment"> // input string is a two digit number digit; iterator at 1
        </span><span class="tok-kw">const</span> digit: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .number = <span class="tok-number">8</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;28&quot;</span>, .i = <span class="tok-number">1</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expect">expect</a>(digit.number == result.number);
    }

    {<span class="tok-comment"> // input string is a two digit number with square brackets; iterator at 0
        </span><span class="tok-kw">const</span> digit: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .named = <span class="tok-str">&quot;15&quot;</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;[15]&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(digit.named, result.named);
    }

    {<span class="tok-comment"> // input string is not a number and contains square brackets; iterator at 0
        </span><span class="tok-kw">const</span> digit: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .named = <span class="tok-str">&quot;hello&quot;</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;[hello]&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(digit.named, result.named);
    }

    {<span class="tok-comment"> // input string is not a number and doesn't contain closing square bracket; iterator at 0
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;[hello&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-builtin">@field</span>(<span class="tok-type">anyerror</span>, <span class="tok-str">&quot;Expected closing ]&quot;</span>), result);
    }

    {<span class="tok-comment"> // input string is not a number and doesn't contain closing square bracket; iterator at 2
        </span><span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;[[[[hello&quot;</span>, .i = <span class="tok-number">2</span> } };

        <span class="tok-kw">const</span> result = parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectError">expectError</a>(<span class="tok-builtin">@field</span>(<span class="tok-type">anyerror</span>, <span class="tok-str">&quot;Expected closing ]&quot;</span>), result);
    }

    {<span class="tok-comment"> // input string is not a number and contains unbalanced square brackets; iterator at 0
        </span><span class="tok-kw">const</span> digit: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .named = <span class="tok-str">&quot;[[hello&quot;</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;[[[hello]&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(digit.named, result.named);
    }

    {<span class="tok-comment"> // input string is not a number and contains unbalanced square brackets; iterator at 1
        </span><span class="tok-kw">const</span> digit: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .named = <span class="tok-str">&quot;[[hello&quot;</span> };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;[[[[hello]]]]]&quot;</span>, .i = <span class="tok-number">1</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqualStrings">expectEqualStrings</a>(digit.named, result.named);
    }

    {<span class="tok-comment"> // input string is neither a digit nor a named argument
        </span><span class="tok-kw">const</span> char: <a href="std.fmt.Specifier.html">Specifier</a> = <a href="std.fmt.Specifier.html">Specifier</a>{ .none = {} };
        <span class="tok-kw">var</span> parser: <a href="std.fmt.Parser.html">Parser</a> = .{ .iter = .{ .bytes = <span class="tok-str">&quot;hello&quot;</span>, .i = <span class="tok-number">0</span> } };

        <span class="tok-kw">const</span> result = <span class="tok-kw">try</span> parser.specifier();
        <span class="tok-kw">try</span> <a href="std.testing.html">testing</a>.<a href="std.testing.html#std.testing.expectEqual">expectEqual</a>(char.none, result.none);
    }
}</code></pre></details></div></div></section>
    <div class="sectSearchResults hidden">
      <h2>Search Results</h2>
      <ul class="listSearchResults"></ul>
    </div>
    <div class="sectSearchNoResults hidden">
      <h2>No Results Found</h2>
      <p>Press escape to exit search and then '?' to see more options.</p>
    </div>
    <div id="helpDialog" class="hidden">
      <h1>Keyboard Shortcuts</h1>
      <dl><dt><kbd>?</kbd></dt><dd>Show this help dialog</dd></dl>
      <dl><dt><kbd>Esc</kbd></dt><dd>Clear focus; close this dialog</dd></dl>
      <dl><dt><kbd>s</kbd></dt><dd>Focus the search field</dd></dl>
      <dl><dt><kbd>u</kbd></dt><dd>Go to source code</dd></dl>
      <dl><dt><kbd>↑</kbd></dt><dd>Move up in search results</dd></dl>
      <dl><dt><kbd>↓</kbd></dt><dd>Move down in search results</dd></dl>
      <dl><dt><kbd>⏎</kbd></dt><dd>Go to active search result</dd></dl>
    </div>
    <div id="errors" class="hidden">
      <h1>Errors</h1>
      <pre id="errorsText"></pre>
    </div>
    <script src="main.js"></script>
  </body>
</html>
